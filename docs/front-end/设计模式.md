---
title: ğŸ•¹ï¸ 14 ç§è®¾è®¡æ¨¡å¼
tag:
  - è®¾è®¡æ¨¡å¼
  - å‰ç«¯
---
# è®¾è®¡æ¨¡å¼
## å•ä¾‹æ¨¡å¼ (Singleton Pattern)

### å®šä¹‰æˆ–æ¦‚å¿µ

- å•ä¾‹æ¨¡å¼ï¼š`ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®çš„å…¨å±€è®¿é—®ç‚¹ã€‚`
- å®ç°çš„å…³é”®æ­¥éª¤ï¼š`å®ç°ä¸€ä¸ªæ ‡å‡†çš„å•ä¾‹æ¨¡å¼å…¶å®å°±æ˜¯ç”¨ä¸€ä¸ªå˜é‡æ¥è¡¨ç¤ºæ˜¯å¦å·²ç»ä¸ºå½“å‰ç±»åˆ›å»ºè¿‡å®ä¾‹åŒ–å¯¹è±¡ï¼Œè‹¥åˆ›å»ºè¿‡ï¼Œåœ¨ä¸‹æ¬¡è·å–æˆ–åˆ›å»ºå®ä¾‹æ—¶ç›´æ¥è¿”å›ä¹‹å‰åˆ›å»ºçš„å®ä¾‹åŒ–å¯¹è±¡å³å¯ï¼Œè‹¥æ²¡æœ‰åˆ›å»ºè¿‡ï¼Œåˆ™ç›´æ¥åˆ›å»º`ã€‚

### Demo

#### é€æ˜ç‰ˆæœ¬

```JavaScript
// é€æ˜ç‰ˆ å•ä¾‹æ¨¡å¼
var CreateStr = (function () {
    var instance = null;

    return function (str) {
        if (instance) {
            return instance;
        }
        this.str = str;
        return instance = this;
    }
})();

CreateStr.prototype.getStr = function () {
    console.log(this.str);
}

let a = new CreateStr('s1');
let b = new CreateStr('s2');

console.log('a ------>', a);    // { str: 's1' }
console.log('b ------>', b);    // { str: 's1' }
a.getStr();     //  s1
b.getStr();     //  s1
console.log(a === b);   // true
```

#### ä»£ç†ç‰ˆæœ¬

```javascript
// ä»£ç†ç‰ˆ å•ä¾‹æ¨¡å¼
function CreateStr(str){
    this.str = str;
    this.getStr();
}

CreateStr.prototype.getStr = function (){
    console.log(this.str);
}

var ProxyObj = (function () {
    var instance = null;
    return function (str) {
        if (!instance) {
            instance = new CreateStr(str);
        }
        return instance;
    }
})();

var a = new ProxyObj('s1');
var b = new ProxyObj('s2');
console.log('a ------>', a);    // CreateStr { str: 's1' }
console.log('b ------>', b);    // CreateStr { str: 's1' }
a.getStr();     //  s1
b.getStr();     //  s1
console.log('b ------>', a === b);  // true
```

### é€‚ç”¨åœºæ™¯

1. å…¨å±€ç¼“å­˜ç®¡ç†å™¨
2. æ¶ˆæ¯æ€»çº¿
3. è´­ç‰©è½¦
4. å…¨å±€çŠ¶æ€ç®¡ç†
5. å…¨å±€äº‹ä»¶ç®¡ç†å™¨

### ä¼˜ç¼ºç‚¹

ä¼˜ç‚¹:

1. å…¨å±€è®¿é—®å’Œå•ä¸€å®ä¾‹ï¼šå› ä¸ºå…¨å±€ä»…æœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥å¯¹å•ä¾‹çš„å¤šä¸ªå®ä¾‹åŒ–éƒ½ä¼šå¾—åˆ°çš„åŒä¸€ä¸ªå®ä¾‹ï¼Œè¿™å°±å¯ä»¥ç¡®ä¿æ‰€æœ‰çš„å¯¹è±¡éƒ½å¯è®¿é—®ä¸€ä¸ªå®ä¾‹ã€‚
2. èŠ‚çœèµ„æºï¼šå› ä¸ºå…¨å±€ä»…æœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥å¯èŠ‚çº¦ç³»ç»Ÿèµ„æºï¼Œé¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¯¹è±¡ï¼Œé€ æˆç³»ç»Ÿæ€§èƒ½çš„æµªè´¹

ç¼ºç‚¹:

1. è¿åå•ä¸€èŒè´£åŸåˆ™ï¼šå•ä¾‹æ¨¡å¼å¾€å¾€è´Ÿè´£åˆ›å»ºå’Œç®¡ç†å®ä¾‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´èŒè´£è¿‡é‡
2. ç´§å¯†è€¦åˆï¼šå¼•å…¥äº†å…¨å±€è®¿é—®ï¼Œä½¿ä»£ç è¿‡åº¦ä¾èµ–ï¼Œéš¾ä»¥ç»´æŠ¤å’Œæµ‹è¯•

## ç­–ç•¥æ¨¡å¼ (Strategy Pattern)

### å®šä¹‰æˆ–æ¦‚å¿µ

ç­–ç•¥æ¨¡å¼ï¼š`å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼Œå°†ä»–ä»¬ä¸€ä¸ªä¸ªå°è£…ï¼Œå¹¶ä½¿ä»–ä»¬å¯ç›¸äº’æ›¿æ¢ã€‚`

### Demo

#### ç¤ºä¾‹1: è–ªèµ„è®¡ç®—

```javascript
var strategies = {
    S: function (salary) {
        return salary * 4;
    },
    A: function (salary) {
        return salary * 3;
    },
    B: function (salary) {
        return salary * 2;
    },
};

var calcBonus = function (level, salary) {
    return strategies[level](salary);
}

calcBonus('A', 20000); // 60000
calcBonus('B', 8000); // 16000

```

#### ç¤ºä¾‹ 2:è¿œç®—

```javascript
// å®šä¹‰ä¸€ä¸ªç­–ç•¥å¯¹è±¡
const strategies = {
  add: function (a, b) {
    return a + b;
  },
  subtract: function (a, b) {
    return a - b;
  },
  multiply: function (a, b) {
    return a * b;
  },
};

// å®šä¹‰ä¸€ä¸ªæ‰§è¡Œç­–ç•¥çš„å‡½æ•°
function executeStrategy(strategy, a, b) {
  if (strategy in strategies) {
    return strategies[strategy](a, b);
  } else {
    throw new Error("Invalid strategy.");
  }
}

// ä½¿ç”¨ç­–ç•¥æ¨¡å¼è¿›è¡Œè®¡ç®—
console.log(executeStrategy("add", 5, 3));      // è¾“å‡º: 8
console.log(executeStrategy("subtract", 7, 2)); // è¾“å‡º: 5
console.log(executeStrategy("multiply", 4, 6)); // è¾“å‡º: 24
console.log(executeStrategy("divide", 10, 2));  // æŠ›å‡ºé”™è¯¯: Invalid strategy.
```

### é€‚ç”¨åœºæ™¯

1. æƒ³ä½¿ç”¨å¯¹è±¡ä¸­å„ç§ä¸åŒç®—æ³•å˜ä½“æ¥åœ¨è¿è¡Œæ—¶åˆ‡æ¢ç®—æ³•æ—¶
2. æ‹¥æœ‰å¾ˆå¤šåœ¨æ‰§è¡ŒæŸäº›è¡Œä¸ºæ—¶æœ‰ç€ä¸åŒçš„è§„åˆ™æ—¶

### ä¼˜ç¼ºç‚¹

ä¼˜ç‚¹ï¼š

1. åˆ©ç”¨ç»„åˆï¼Œå§”æ‰˜ï¼Œå¤šæ€ç­‰æŠ€æœ¯æœ‰æ•ˆé¿å…äº†å¤šé‡æ¡ä»¶è¯­å¥
2. æä¾›äº†å¯¹å¼€å°â€”â€”å°é—­åŸåˆ™çš„å®Œç¾æ”¯æŒ
3. å¤ç”¨æ€§è¾ƒå¼ºï¼Œé¿å…è®¸å¤šé‡å¤çš„ C,V å·¥ä½œ

ç¼ºç‚¹ï¼š

1. å®¢æˆ·ç«¯è¦äº†è§£æ‰€æœ‰çš„ç­–ç•¥ç±»ï¼Œæ‰å¯é€‰æ‹©åˆé€‚çš„ç­–ç•¥ç±»å»ä½¿ç”¨
2. ä¼šåœ¨ç¨‹åºä¸­æ·»åŠ è¾ƒå¤šçš„ç­–ç•¥ç±»å’Œç­–ç•¥å¯¹è±¡

### æ³¨æ„ç‚¹

å…¶å®ï¼Œç­–ç•¥æ¨¡å¼çš„å®ç°å¹¶ä¸å¤æ‚ï¼Œå…³é”®åœ¨äºä»ç­–ç•¥æ¨¡å¼çš„å®ç°èƒŒåæ‰¾åˆ°å°è£…çš„å˜åŒ–ï¼Œå§”æ‰˜å’Œå¤šæ€æ€§è¿™äº›æ€æƒ³çš„ä»·å€¼ã€‚

## ä»£ç†æ¨¡å¼ (Proxy Pattern)

### å®šä¹‰æˆ–æ¦‚å¿µ

ä»£ç†æ¨¡å¼çš„å…³é”®æ˜¯æœ‰ä¸ªä¸­é—´è€…æ¥åè°ƒä½ ä¸å¯¹æ–¹ä¹‹é—´çš„äº‹æƒ…ï¼Œåªèƒ½é€šè¿‡ä¸­é—´è€…å°†äº‹æƒ…è½¬è¾¾ç»™å¦ä¸€æ–¹

### Demo

1. è™šæ‹Ÿä»£ç†ï¼ˆVirtual Proxyï¼‰ï¼šè¿™ç§ä»£ç†åœ¨éœ€è¦æ—¶åˆ›å»ºæˆ–åŠ è½½çœŸå®å¯¹è±¡ï¼Œå®ƒå¯ä»¥ç”¨äºå¤„ç†æ˜‚è´µèµ„æºçš„å»¶è¿ŸåŠ è½½ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå›¾ç‰‡åŠ è½½å™¨å¯ä»¥ä½¿ç”¨è™šæ‹Ÿä»£ç†æ¥åŠ è½½å¤§å‹å›¾åƒï¼Œè€Œä¸æ˜¯ç«‹å³åŠ è½½ã€‚

```javascript
class Image {
  constructor(url) {
    this.url = url;
    this.loadImage();
  }

  loadImage() {
    console.log(`Loading image: ${this.url}`);
  }
}

class ImageProxy {
  constructor(url) {
    this.url = url;
  }

  loadImage() {
    if (!this.image) {
      this.image = new Image(this.url);
    }
    console.log(`Proxy: Loading image: ${this.url}`);
    this.image.loadImage();
  }
}

const imageProxy = new ImageProxy("https://example.com/image.jpg");
imageProxy.loadImage(); // å®é™…çš„å›¾ç‰‡åŠ è½½æ“ä½œå‘ç”Ÿåœ¨æ­¤æ—¶
```

2. å®‰å…¨ä»£ç†ï¼ˆProtection Proxyï¼‰ï¼šè¿™ç§ä»£ç†ç”¨äºæ§åˆ¶å¯¹æ•æ„Ÿå¯¹è±¡çš„è®¿é—®ï¼Œå¯é€šè¿‡æ£€æŸ¥ç”¨æˆ·æƒé™æˆ–å…¶ä»–æ¡ä»¶æ¥éªŒè¯æ“ä½œçš„åˆæ³•æ€§ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨æˆ·èº«ä»½éªŒè¯ä»£ç†å¯ä»¥é™åˆ¶æœªç»æˆæƒç”¨æˆ·çš„è®¿é—®ã€‚

```javascript
class BankAccount {
  constructor(balance) {
    this.balance = balance;
  }

  withdraw(amount) {
    if (amount > this.balance) {
      throw new Error("Insufficient balance");
    }
    this.balance -= amount;
    console.log(`Withdrew ${amount}. New balance: ${this.balance}`);
  }
}

class BankAccountProxy {
  constructor(balance, user) {
    this.bankAccount = new BankAccount(balance);
    this.user = user;
  }

  withdraw(amount) {
    if (this.user === "admin") {
      this.bankAccount.withdraw(amount);
    } else {
      throw new Error("Unauthorized access");
    }
  }
}

const adminBankAccount = new BankAccountProxy(1000, "admin");
adminBankAccount.withdraw(500); // ææ¬¾æˆåŠŸ

const userBankAccount = new BankAccountProxy(1000, "user");
userBankAccount.withdraw(500);  // æŠ›å‡ºé”™è¯¯ï¼šæœªç»æˆæƒçš„è®¿é—®
```

3. ç¼“å­˜ä»£ç†ï¼ˆCaching Proxyï¼‰ï¼šè¿™ç§ä»£ç†åœ¨æ“ä½œè¢«è°ƒç”¨åä¼šç¼“å­˜ç»“æœï¼Œå¹¶åœ¨ä¸‹æ¬¡ç›¸åŒæ“ä½œè¢«è°ƒç”¨æ—¶è¿”å›ç¼“å­˜çš„ç»“æœã€‚è¿™å¯ä»¥æé«˜æ€§èƒ½ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå‡½æ•°æ‰§è¡Œçš„ç»“æœå¯ä»¥è¢«ç¼“å­˜èµ·æ¥ï¼Œä»¥ä¾¿ä¸‹æ¬¡ç›´æ¥è¿”å›ã€‚

```javascript
function expensiveOperation() {
  console.log("Executing expensive operation...");
  // å¤æ‚çš„è®¡ç®—è¿‡ç¨‹
  return "Result";
}

const cachedExpensiveOperation = (() => {
  let result;

  return () => {
    if (!result) {
      result = expensiveOperation();
    }
    console.log("Returning cached result.");
    return result;
  };
})();

console.log(cachedExpensiveOperation());  // é¦–æ¬¡è°ƒç”¨ï¼Œæ‰§è¡Œæ˜‚è´µæ“ä½œ
console.log(cachedExpensiveOperation());  // è¿”å›ç¼“å­˜çš„ç»“æœï¼Œçœå»è®¡ç®—è¿‡ç¨‹
```

## ç®€å•å·¥å‚æ¨¡å¼( Simple Factory )

å®šä¹‰ä¸€ä¸ªç”¨ä»¥åˆ›å»ºå¯¹è±¡çš„å·¥å‚, æ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„å¯¹è±¡.ç®€å•å·¥å‚æ¨¡å¼é€šå¸¸ç”±ä¸€ä¸ªé™æ€æ–¹æ³•å’Œä¸€ä¸ªæˆ–å¤šä¸ªäº§å“ç±»ç»„æˆã€‚ä¸‹é¢æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„ç»“æ„ï¼š

1. ç®€å•å·¥å‚ç±»ï¼ˆSimple Factoryï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ªåŒ…å«é™æ€æ–¹æ³•çš„ç±»ï¼Œæ ¹æ®ä¸åŒçš„å‚æ•°æ¥åˆ›å»ºå¹¶è¿”å›ä¸åŒçš„äº§å“å®ä¾‹ã€‚
2. äº§å“ç±»ï¼ˆProductï¼‰ï¼šå®ƒæ˜¯ç®€å•å·¥å‚åˆ›å»ºçš„å¯¹è±¡å®ä¾‹ï¼Œå…·æœ‰å…±åŒçš„æ¥å£æˆ–åŸºç±»ã€‚

```javascript
// ç®€å•å·¥å‚ç±»
class FoodFactory {
  static createFood(type) {
    switch (type) {
      case "pizza":
        return new Pizza();
      case "burger":
        return new Burger();
      case "sushi":
        return new Sushi();
      default:
        throw new Error("Invalid food type.");
    }
  }
}

// äº§å“ç±»
class Pizza {
  constructor() {
    this.type = "Pizza";
  }

  describe() {
    console.log(`I am a ${this.type}.`);
  }
}

class Burger {
  constructor() {
    this.type = "Burger";
  }

  describe() {
    console.log(`I am a ${this.type}.`);
  }
}

class Sushi {
  constructor() {
    this.type = "Sushi";
  }

  describe() {
    console.log(`I am a ${this.type}.`);
  }
}

// ä½¿ç”¨ç®€å•å·¥å‚åˆ›å»ºé£Ÿç‰©å¯¹è±¡
const pizza = FoodFactory.createFood("pizza");
pizza.describe(); // è¾“å‡º: I am a Pizza.

const burger = FoodFactory.createFood("burger");
burger.describe(); // è¾“å‡º: I am a Burger.

const sushi = FoodFactory.createFood("sushi");
sushi.describe(); // è¾“å‡º: I am a Sushi.
```

åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ`FoodFactory` ç±»æ˜¯ä¸€ä¸ªç®€å•å·¥å‚ç±»ï¼Œå®ƒçš„ `createFood` æ–¹æ³•æ ¹æ®ä¼ å…¥çš„å‚æ•°æ¥åˆ›å»ºå¹¶è¿”å›ä¸åŒçš„é£Ÿç‰©å¯¹è±¡å®ä¾‹ã€‚`Pizza`ã€`Burger` å’Œ `Sushi` æ˜¯äº§å“ç±»ï¼Œå®ƒä»¬éƒ½å…·æœ‰ä¸€ä¸ªå…±åŒçš„æ¥å£ `describe`ã€‚

é€šè¿‡è°ƒç”¨ `FoodFactory.createFood` æ–¹æ³•ï¼Œå¹¶ä¼ å…¥ä¸åŒçš„å‚æ•°ï¼ˆé£Ÿç‰©ç±»å‹ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸åŒçš„é£Ÿç‰©å¯¹è±¡ã€‚è¿™ç§æ–¹å¼éšè—äº†å¯¹è±¡çš„åˆ›å»ºé€»è¾‘ï¼Œå¹¶é€šè¿‡ç®€å•å·¥å‚ç±»æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æ–°çš„äº§å“ç±»åˆ°å·¥å‚ä¸­ï¼Œæ— éœ€ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç ã€‚

ç®€å•å·¥å‚æ¨¡å¼é€‚ç”¨äºéœ€è¦æ ¹æ®ä¼ å…¥å‚æ•°åˆ›å»ºä¸åŒå¯¹è±¡å®ä¾‹çš„åœºæ™¯ï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€å•ä¸”æ‰©å±•æ€§è¾ƒå¥½çš„æ–¹å¼æ¥åˆ›å»ºå¯¹è±¡ã€‚ç„¶è€Œï¼Œå½“éœ€è¦åˆ›å»ºå¤æ‚çš„å¯¹è±¡å±‚æ¬¡ç»“æ„æ—¶ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘å…¶ä»–åˆ›å»ºå‹æ¨¡å¼ï¼Œå¦‚å·¥å‚æ–¹æ³•æ¨¡å¼æˆ–æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚

## å·¥å‚æ¨¡å¼( Factory )

é’ˆå¯¹æ¯ä¸€ç§äº§å“æä¾›ä¸€ä¸ªå·¥å‚ç±»ï¼Œé€šè¿‡ä¸åŒçš„**å·¥å‚**å®ä¾‹æ¥åˆ›å»ºä¸åŒçš„**äº§å“**å®ä¾‹

ä»¥ä¸‹æ˜¯ä¸€ä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼çš„ç¤ºä¾‹ï¼š

```javascript
// å·¥å‚æŠ½è±¡æ¥å£
class AnimalFactory {
  createAnimal() {
    throw new Error("createAnimal() method must be implemented.");
  }
}

// å…·ä½“å·¥å‚ç±» A
class DogFactory extends AnimalFactory {
  createAnimal() {
    return new Dog();
  }
}

// å…·ä½“å·¥å‚ç±» B
class CatFactory extends AnimalFactory {
  createAnimal() {
    return new Cat();
  }
}

// äº§å“æ¥å£
class Animal {
  speak() {
    throw new Error("speak() method must be implemented.");
  }
}

// å…·ä½“äº§å“ç±» A
class Dog extends Animal {
  speak() {
    console.log("Woof!");
  }
}

// å…·ä½“äº§å“ç±» B
class Cat extends Animal {
  speak() {
    console.log("Meow!");
  }
}

// ä½¿ç”¨å·¥å‚æ–¹æ³•åˆ›å»ºå¯¹è±¡
const dogFactory = new DogFactory();
const dog = dogFactory.createAnimal();
dog.speak(); // è¾“å‡º: Woof!

const catFactory = new CatFactory();
const cat = catFactory.createAnimal();
cat.speak(); // è¾“å‡º: Meow!
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`AnimalFactory` æ˜¯ä¸€ä¸ªå·¥å‚æŠ½è±¡æ¥å£ï¼Œå®šä¹‰äº† `createAnimal()` æ–¹æ³•ï¼Œå®ƒç”±å…·ä½“çš„å·¥å‚ç±» `DogFactory` å’Œ `CatFactory` å®ç°ã€‚æ¯ä¸ªå…·ä½“å·¥å‚ç±»è´Ÿè´£åˆ›å»ºç‰¹å®šçš„äº§å“å¯¹è±¡ï¼Œå³ `Dog` å’Œ `Cat`ã€‚

`Animal` æ˜¯äº§å“æ¥å£ï¼Œå®šä¹‰äº† `speak()` æ–¹æ³•ï¼Œå®ƒç”±å…·ä½“äº§å“ç±» `Dog` å’Œ `Cat` å®ç°ã€‚

é€šè¿‡å®ä¾‹åŒ–å…·ä½“çš„å·¥å‚ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å·¥å‚æ–¹æ³• `createAnimal()` æ¥åˆ›å»ºå¯¹åº”çš„äº§å“å¯¹è±¡ã€‚è¿™ç§æ–¹å¼å¯ä»¥æ ¹æ®å…·ä½“çš„å·¥å‚ç±»é€‰æ‹©ä¸åŒçš„äº§å“å¯¹è±¡ï¼Œä»è€Œçµæ´»åœ°åˆ›å»ºä¸åŒç±»å‹çš„å¯¹è±¡ã€‚

## è£…é¥°è€…æ¨¡å¼( Decorator )

åŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„åŠŸèƒ½

> è£…é¥°è€…æ¨¡å¼ï¼ˆDecorator Patternï¼‰æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå…è®¸åœ¨ä¸æ”¹å˜ç°æœ‰å¯¹è±¡ç»“æ„çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°å°†æ–°çš„è¡Œä¸ºæ·»åŠ åˆ°å¯¹è±¡ä¸Šã€‚
>
> åœ¨è£…é¥°è€…æ¨¡å¼ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªæ ¸å¿ƒå¯¹è±¡ï¼ˆè¢«è£…é¥°è€…ï¼‰ï¼Œå¹¶é€šè¿‡è£…é¥°å™¨å¯¹è±¡æ¥æ‰©å±•å…¶åŠŸèƒ½ã€‚è£…é¥°å™¨å¯¹è±¡åŒ…è£…äº†æ ¸å¿ƒå¯¹è±¡ï¼Œå¹¶åœ¨è°ƒç”¨æ ¸å¿ƒå¯¹è±¡çš„æ–¹æ³•å‰åæ‰§è¡Œé¢å¤–çš„æ“ä½œï¼Œä»è€Œåœ¨ä¸ä¿®æ”¹æ ¸å¿ƒå¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œå¯¹å…¶è¡Œä¸ºè¿›è¡Œå¢å¼ºæˆ–ä¿®æ”¹ã€‚
>
> ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„è£…é¥°è€…æ¨¡å¼çš„ç¤ºä¾‹ï¼š

```javascript
// æ ¸å¿ƒå¯¹è±¡æ¥å£
class Pizza {
  getDescription() {
    return "Plain pizza";
  }

  cost() {
    return 10;
  }
}

// è£…é¥°å™¨æŠ½è±¡ç±»
class PizzaDecorator extends Pizza {
  constructor(pizza) {
    super();
    this.pizza = pizza;
  }

  getDescription() {
    return this.pizza.getDescription();
  }

  cost() {
    return this.pizza.cost();
  }
}

// å…·ä½“è£…é¥°å™¨ç±» A
class CheeseDecorator extends PizzaDecorator {
  getDescription() {
    return `${this.pizza.getDescription()}, with cheese`;
  }

  cost() {
    return this.pizza.cost() + 2;
  }
}

// å…·ä½“è£…é¥°å™¨ç±» B
class VeggieDecorator extends PizzaDecorator {
  getDescription() {
    return `${this.pizza.getDescription()}, with veggies`;
  }

  cost() {
    return this.pizza.cost() + 3;
  }
}

// åˆ›å»ºè¢«è£…é¥°çš„æ ¸å¿ƒå¯¹è±¡
const pizza = new Pizza();

// ä½¿ç”¨è£…é¥°å™¨åŒ…è£…æ ¸å¿ƒå¯¹è±¡
const pizzaWithCheese = new CheeseDecorator(pizza);
const pizzaWithVeggies = new VeggieDecorator(pizza);

console.log(pizzaWithCheese.getDescription()); // è¾“å‡º: Plain pizza, with cheese
console.log(pizzaWithCheese.cost()); // è¾“å‡º: 12

console.log(pizzaWithVeggies.getDescription()); // è¾“å‡º: Plain pizza, with veggies
console.log(pizzaWithVeggies.cost()); // è¾“å‡º: 13
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`Pizza` æ˜¯æ ¸å¿ƒå¯¹è±¡æ¥å£ï¼Œå®šä¹‰äº†åŸºæœ¬çš„æè¿°å’Œæˆæœ¬æ–¹æ³•ã€‚`PizzaDecorator` æ˜¯è£…é¥°å™¨æŠ½è±¡ç±»ï¼Œå®ƒç»§æ‰¿è‡ª `Pizza` å¹¶æŒæœ‰ä¸€ä¸ªæ ¸å¿ƒå¯¹è±¡ã€‚å…·ä½“çš„è£…é¥°å™¨ç±»ï¼ˆ`CheeseDecorator` å’Œ `VeggieDecorator`ï¼‰æ‰©å±•äº†æ ¸å¿ƒå¯¹è±¡çš„åŠŸèƒ½ï¼Œé€šè¿‡åœ¨æè¿°å’Œæˆæœ¬æ–¹æ³•ä¸Šæ·»åŠ é¢å¤–çš„é€»è¾‘ã€‚

é€šè¿‡åˆ›å»ºå…·ä½“çš„è£…é¥°å™¨å¯¹è±¡å¹¶ä¼ å…¥æ ¸å¿ƒå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€åœ°æ·»åŠ æ–°çš„è¡Œä¸ºæˆ–ä¿®æ”¹æ ¸å¿ƒå¯¹è±¡çš„è¡Œä¸ºã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»„åˆä¸åŒçš„è£…é¥°å™¨å¯¹è±¡æ¥æ„å»ºå‡ºå…·æœ‰ä¸åŒç‰¹æ€§çš„å¯¹è±¡ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹æ ¸å¿ƒå¯¹è±¡çš„ä»£ç ã€‚
