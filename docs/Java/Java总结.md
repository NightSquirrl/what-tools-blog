---
sticky: 99
title: ğŸ˜¢ Java æ€»ç»“
tag:
  - Java
recommend: 1
---

## 1. Java çš„ä¸‰å¤§å¹³å°

â€‹	JavaSEã€JavaMEã€JavaEE

â€‹	JavaSEã€JavaMEã€JavaEE

### 1.1 JavaSE

â€‹	æ˜¯å…¶ä»–ä¸¤ä¸ªç‰ˆæœ¬çš„åŸºç¡€ã€‚

### 1.2 JavaME

â€‹	Javaè¯­è¨€çš„å°å‹ç‰ˆï¼Œç”¨äºåµŒå…¥å¼æ¶ˆè´¹ç±»ç”µå­è®¾å¤‡æˆ–è€…å°å‹ç§»åŠ¨è®¾å¤‡çš„å¼€å‘ã€‚

â€‹	å…¶ä¸­æœ€ä¸ºä¸»è¦çš„è¿˜æ˜¯å°å‹ç§»åŠ¨è®¾å¤‡çš„å¼€å‘ï¼ˆæ‰‹æœºï¼‰ã€‚æ¸æ¸çš„æ²¡è½äº†ï¼Œå·²ç»è¢«å®‰å“å’ŒIOSç»™æ›¿ä»£äº†ã€‚

â€‹	ä½†æ˜¯ï¼Œå®‰å“ä¹Ÿæ˜¯å¯ä»¥ç”¨Javaæ¥å¼€å‘çš„ã€‚

### 1.3 JavaEE

â€‹	ç”¨äºWebæ–¹å‘çš„ç½‘ç«™å¼€å‘ã€‚ï¼ˆä¸»è¦ä»äº‹åå°æœåŠ¡å™¨çš„å¼€å‘ï¼‰

## 2. Javaçš„ä¸»è¦ç‰¹æ€§

- é¢å‘å¯¹è±¡
- å®‰å…¨æ€§
- å¤šçº¿ç¨‹
- ç®€å•æ˜“ç”¨
- å¼€æº
- è·¨å¹³å°

## 3. JREå’ŒJDK

JVMï¼ˆJava Virtual Machineï¼‰ï¼ŒJavaè™šæ‹Ÿæœº

JREï¼ˆJava Runtime Environmentï¼‰ï¼ŒJavaè¿è¡Œç¯å¢ƒï¼ŒåŒ…å«äº†JVMå’ŒJavaçš„æ ¸å¿ƒç±»åº“ï¼ˆJava APIï¼‰

JDKï¼ˆJava Development Kitï¼‰ç§°ä¸ºJavaå¼€å‘å·¥å…·ï¼ŒåŒ…å«äº†JREå’Œå¼€å‘å·¥å…·

æ€»ç»“ï¼šæˆ‘ä»¬åªéœ€å®‰è£…JDKå³å¯ï¼Œå®ƒåŒ…å«äº†javaçš„è¿è¡Œç¯å¢ƒå’Œè™šæ‹Ÿæœºã€‚

## 4.æ•°æ®ç±»å‹

> - åŸºæœ¬æ•°æ®ç±»å‹
> - å¼•ç”¨æ•°æ®ç±»å‹

### 4.1 åŸºæœ¬æ•°æ®ç±»å‹çš„å››ç±»å…«ç§

| æ•°æ®ç±»å‹ | å…³é”®å­—  | å†…å­˜å ç”¨ |                 å–å€¼èŒƒå›´                  |
| :------: | :-----: | :------: | :---------------------------------------: |
|   æ•´æ•°   |  byte   |    1     |    è´Ÿçš„2çš„7æ¬¡æ–¹ ~ 2çš„7æ¬¡æ–¹-1(-128~127)    |
|          |  short  |    2     | è´Ÿçš„2çš„15æ¬¡æ–¹ ~ 2çš„15æ¬¡æ–¹-1(-32768~32767) |
|          |   int   |    4     |        è´Ÿçš„2çš„31æ¬¡æ–¹ ~ 2çš„31æ¬¡æ–¹-1        |
|          |  long   |    8     |        è´Ÿçš„2çš„63æ¬¡æ–¹ ~ 2çš„63æ¬¡æ–¹-1        |
|  æµ®ç‚¹æ•°  |  float  |    4     |        1.401298e-45 ~ 3.402823e+38        |
|          | double  |    8     |      4.9000000e-324 ~ 1.797693e+308       |
|   å­—ç¬¦   |  char   |    2     |                  0-65535                  |
|   å¸ƒå°”   | boolean |    1     |                trueï¼Œfalse                |

>  æ•°æ®ç±»å‹çš„å®šä¹‰Demo 
>
> TipğŸ’¡:
>
> â€‹	L F

```java
public class VariableDemo3{
    public static void main(String[] args){
        //1.å®šä¹‰byteç±»å‹çš„å˜é‡
        //æ•°æ®ç±»å‹ å˜é‡å = æ•°æ®å€¼;
        byte a = 10;
        System.out.println(a);

        //2.å®šä¹‰shortç±»å‹çš„å˜é‡
        short b = 20;
        System.out.println(b);

        //3.å®šä¹‰intç±»å‹çš„å˜é‡
        int c = 30;
        System.out.println(c);

        //4.å®šä¹‰longç±»å‹çš„å˜é‡
        long d = 123456789123456789L;
        System.out.println(d);

        //5.å®šä¹‰floatç±»å‹çš„å˜é‡
        float e = 10.1F;
        System.out.println(e);

        //6.å®šä¹‰doubleç±»å‹çš„å˜é‡
        double f = 20.3;
        System.out.println(f);

        //7.å®šä¹‰charç±»å‹çš„å˜é‡
        char g = 'a';
        System.out.println(g);

        //8.å®šä¹‰booleanç±»å‹çš„å˜é‡
        boolean h = true;
        System.out.println(h);

    }
}
```

### 4.2 å¼•ç”¨æ•°æ®ç±»å‹

#### 4.2.1 ç±»(Class)

> ç±»æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºæœ¬å•ä½,ç”¨äºå°è£…å±æ€§å’Œè¡Œä¸ºã€‚ç±»åŒ…å«æˆå‘˜å˜é‡(å±æ€§)å’Œæ–¹æ³•(è¡Œä¸º)ã€‚ç±»éœ€è¦å®ä¾‹åŒ–ä»¥åˆ›å»ºå¯¹è±¡,å¯¹è±¡æ‰èƒ½è®¿é—®ç±»ä¸­çš„å±æ€§å’Œæ–¹æ³•ã€‚ä¾‹å¦‚:

```java
public class Person {
  private String name;
  private int age;

  public Person(String name, int age) {
    this.name = name;
    this.age = age; 
  }

  public void incrementAge() {
    age++;
  }
}
```

#### 4.2.2 æ¥å£(Interface)

> æ¥å£ç”¨äºå®šä¹‰ç±»éœ€è¦å®ç°çš„æ–¹æ³•ç­¾å,æ˜¯ä¸€ç§<span style="color:red">æŠ½è±¡ç±»å‹</span>ã€‚æ¥å£ä¸­åªåŒ…å«å¸¸é‡å’Œæ–¹æ³•ç­¾åã€‚æ¥å£éœ€è¦ç”±ç±»æ¥å®ç°æ¥å£å®šä¹‰çš„æ–¹æ³•ã€‚ä¾‹å¦‚:

```java
public interface Animal {
  void makeSound();
}

public class Dog implements Animal {
  public void makeSound() {
    System.out.println("Woof"); 
  }
}
```

#### 4.2.3 æ•°ç»„(Array)

> ä¸è¦åŒ Javascript æ··æ·†

æ•°ç»„ç”¨äºå­˜å‚¨åŒä¸€ç±»å‹çš„æ•°æ®çš„é›†åˆ,<span style="color:red">æ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„</span>ã€‚æ•°ç»„å¯ä»¥æ˜¯ä¸€ç»´å’Œå¤šç»´çš„ã€‚ä¾‹å¦‚:

##### æ•°ç»„åˆå§‹åŒ–

1. é™æ€åˆå§‹åŒ–:åœ¨å®šä¹‰æ•°ç»„æ—¶å°±ç›´æ¥æŒ‡å®šæ•°ç»„å…ƒç´ çš„å€¼,å½¢å¼å¦‚ä¸‹:

```java
int[] arr = {1, 2, 3};
String[] names = {"John", "Mary", "Tom"};
```

2. åŠ¨æ€åˆå§‹åŒ–:åœ¨å®šä¹‰æ•°ç»„æ—¶åªæŒ‡å®šæ•°ç»„é•¿åº¦,è€Œåœ¨åç»­ä»£ç ä¸­å†é€ä¸ªèµ‹å€¼,å½¢å¼å¦‚ä¸‹:

```java
int[] arr = new int[3];
arr[0] = 1; 
arr[1] = 2;
arr[2] = 3;
```

3. é»˜è®¤åˆå§‹åŒ–:å®šä¹‰æ•°ç»„æ—¶ä¸ç«‹å³èµ‹å€¼,æ•°ç»„å…ƒç´ ä¼šæœ‰ä¸€ä¸ªé»˜è®¤åˆå§‹å€¼,ä¾‹å¦‚æ•°å€¼ç±»å‹æ•°ç»„å…ƒç´ é»˜è®¤ä¸º0,å¸ƒå°”ç±»å‹é»˜è®¤ä¸ºfalseã€‚

```java
int[] arr = new int[3]; //æ•°ç»„å…ƒç´ é»˜è®¤ä¸º0
boolean[] flags = new boolean[2]; //æ•°ç»„å…ƒç´ é»˜è®¤ä¸ºfalse
```

4. ä½¿ç”¨Arrays.fill()æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–:

```java
int[] arr = new int[3];
Arrays.fill(arr, 1); //æ•°ç»„å…ƒç´ å…¨éƒ¨åˆå§‹åŒ–ä¸º1
```

##### æ•°ç»„çš„éå†

```java
for(int i = 0; i < arr.length; i++){
    //åœ¨å¾ªç¯çš„è¿‡ç¨‹ä¸­ï¼Œiä¾æ¬¡è¡¨ç¤ºæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªç´¢å¼•
    sout(arr[i]);//å°±å¯ä»¥æŠŠæ•°ç»„é‡Œé¢çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½è·å–å‡ºæ¥ï¼Œå¹¶æ‰“å°åœ¨æ§åˆ¶å°ä¸Šäº†ã€‚
}
```





#### 4.2.4 String

> Stringä¸æ˜¯åŸºæœ¬ç±»å‹,æ˜¯ä¸å¯å˜çš„å¯¹è±¡,ç”¨äºå­˜å‚¨æ–‡æœ¬æ•°æ®ã€‚Stringæœ‰å¾ˆå¤šå®ç”¨çš„æ–¹æ³•ç”¨äºå­—ç¬¦ä¸²æ“ä½œã€‚Stringå¯¹è±¡ä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½æ›´æ”¹ã€‚

- length():è¿”å›å­—ç¬¦ä¸²é•¿åº¦
- charAt():è¿”å›æŒ‡å®šç´¢å¼•å¤„çš„å­—ç¬¦
- substring():è¿”å›å­å­—ç¬¦ä¸²
- contains():åˆ¤æ–­æ˜¯å¦åŒ…å«å­å­—ç¬¦ä¸²
- indexOf():è¿”å›å­å­—ç¬¦ä¸²çš„ç´¢å¼•
- replace():æ›¿æ¢å­å­—ç¬¦ä¸²
- equals():åˆ¤æ–­å­—ç¬¦ä¸²ç›¸ç­‰æ€§
- split():åˆ†å‰²å­—ç¬¦ä¸²
- toUpperCase()/toLowerCase():è½¬æ¢å¤§å°å†™
- trim():å»é™¤ä¸¤ç«¯ç©ºæ ¼

##### StringBuilder

> å­—ç¬¦ä¸²æ‹¼æ¥
>
> ä½¿ç”¨Stringè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ä¼šäº§ç”Ÿå¤§é‡ä¸´æ—¶å¯¹è±¡,æ•ˆç‡ä½ä¸‹ã€‚StringBuilderå¯ä»¥æé«˜å­—ç¬¦ä¸²æ‹¼æ¥çš„æ•ˆç‡ã€‚

- append():è¿½åŠ å­—ç¬¦ä¸²
- insert():åœ¨æŒ‡å®šç´¢å¼•æ’å…¥å­—ç¬¦ä¸²
- delete():åˆ é™¤å­—ç¬¦ä¸²åŒºé—´
- reverse():åè½¬å­—ç¬¦ä¸²
- capacity():è¿”å›å½“å‰å®¹é‡
- ensureCapacity():ç¡®ä¿æœ€å°å®¹é‡
- replace():æ›¿æ¢å­—ç¬¦ä¸²åŒºé—´
- toString():è½¬æ¢ä¸ºString

## 5. é”®ç›˜å½•å…¥

```java
//å¯¼åŒ…ï¼Œå…¶å®å°±æ˜¯å…ˆæ‰¾åˆ°Scannerè¿™ä¸ªç±»åœ¨å“ª
import java.util.Scanner;
public class ScannerDemo1{
	public static void main(String[] args){
		//2.åˆ›å»ºå¯¹è±¡ï¼Œå…¶å®å°±æ˜¯ç”³æ˜ä¸€ä¸‹ï¼Œæˆ‘å‡†å¤‡å¼€å§‹ç”¨Scannerè¿™ä¸ªç±»äº†ã€‚
		Scanner sc = new Scanner(System.in);
		//3.æ¥æ”¶æ•°æ®
		//å½“ç¨‹åºè¿è¡Œä¹‹åï¼Œæˆ‘ä»¬åœ¨é”®ç›˜è¾“å…¥çš„æ•°æ®å°±ä¼šè¢«å˜é‡iç»™æ¥æ”¶äº†
		System.out.println("è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—");
		int i = sc.nextInt();
		System.out.println(i);
	}
}
```

### next()\nextLine()

- next()è¯»å–é‡åˆ°ç©ºæ ¼æˆ–æ¢è¡Œæ‰åœæ­¢,nextLine()è¯»å–æ•´è¡Œç›´åˆ°é‡åˆ°æ¢è¡Œç¬¦
- next()ä¸ä¼šè¯»å–æ¢è¡Œç¬¦,nextLine()ä¼šè¯»å–æ¢è¡Œç¬¦

### nextInt()

åªèƒ½æ¥å—æ•´æ•°ã€‚

æ¯”å¦‚ï¼šé”®ç›˜å½•å…¥123ï¼Œé‚£ä¹ˆä¼šæŠŠ123å½“åšintç±»å‹çš„æ•´æ•°è¿”å›ã€‚

â€‹	é”®ç›˜å½•å…¥å°æ•°æˆ–è€…å…¶ä»–å­—æ¯ï¼Œå°±ä¼šæŠ¥é”™ã€‚

### nextDouble()

èƒ½æ¥æ”¶æ•´æ•°å’Œå°æ•°ï¼Œä½†æ˜¯éƒ½ä¼šçœ‹åšå°æ•°è¿”å›ã€‚

å½•å…¥å­—æ¯ä¼šæŠ¥é”™ã€‚

## 6. é¢ç›¸å¯¹è±¡

### 6.1 å°è£…

1. ä½¿ç”¨ `private` å…³é”®å­—æ¥ä¿®é¥°æˆå‘˜å˜é‡ã€‚

2. ä½¿ç”¨`public`ä¿®é¥°getterå’Œsetteræ–¹æ³•ã€‚

> Demo

```java
public class Student {
    private String name;
    private int age;

  
  
  
   /*
   *
   *--------------------
   *
   */
    public void setName(String n) {
      	name = n;
    }

    public String getName() {
      	return name;
    }

    public void setAge(int a) {
        if (a > 0 && a <200) {
            age = a;
        } else {
            System.out.println("å¹´é¾„éæ³•ï¼");
        }
    }

    public int getAge() {
      	return age;
    }
}
```

### 6.2 æ„é€ æ–¹æ³•

åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œç»™æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ–ã€‚

åˆå§‹åŒ–å³èµ‹å€¼çš„æ„æ€ã€‚

> Demo

```java
public class Student {
    // 1.æˆå‘˜å˜é‡
    public String name;
    public int age;

    // 2.æ„é€ æ–¹æ³• --- æ— å‚æ„é€ å™¨
    public Student() {
		System.out.println("æ— å‚æ•°æ„é€ æ–¹æ³•è¢«è°ƒç”¨")ï¼›
    }
}
```

### 6.3 static å…³é”®å­—

è¢«staticä¿®é¥°çš„æˆå‘˜æ˜¯**å±äºç±»**çš„æ˜¯æ”¾åœ¨é™æ€åŒºä¸­ï¼Œæ²¡æœ‰staticä¿®é¥°çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•åˆ™æ˜¯**å±äºå¯¹è±¡**çš„ã€‚

> Demo

```java
// å£°æ˜å®šä¹‰
public static String schoolName = "ä¼ æ™ºæ’­å®¢"ï¼› // å±äºç±»ï¼Œåªæœ‰ä¸€ä»½ã€‚
// åªæœ‰ä¸€ä»½çš„æ„æ€æ˜¯,åŒä¸€ä¸ªå¯¹è±¡ new å¤šæ¬¡,ä½†æ˜¯ static çš„å˜é‡ä¾æ—§ä¹‹åä¸€ä¸ª,æ‰€æœ‰ç›¸åŒçš„å¯¹è±¡çš„ static æ˜¯å…±äº«çš„
    
// è®¿é—®
//ç±»å.é™æ€æ–¹æ³•
  Student.schoolName;
```

### 6.4 ç»§æ‰¿

å°±æ˜¯å­ç±»ç»§æ‰¿çˆ¶ç±»çš„**å±æ€§**å’Œ**è¡Œä¸º**ï¼Œä½¿å¾—å­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥å…·æœ‰ä¸çˆ¶ç±»ç›¸åŒçš„å±æ€§ã€ç›¸åŒçš„è¡Œä¸ºã€‚å­ç±»å¯ä»¥ç›´æ¥è®¿é—®çˆ¶ç±»ä¸­çš„<span style="color:red">**éç§æœ‰**</span>çš„å±æ€§å’Œè¡Œä¸ºã€‚

**éœ€è¦æ³¨æ„ï¼šJavaæ˜¯å•ç»§æ‰¿çš„ï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç›´æ¥çˆ¶ç±»ï¼Œè·Ÿç°å®ä¸–ç•Œå¾ˆåƒï¼Œä½†æ˜¯Javaä¸­çš„å­ç±»æ˜¯æ›´åŠ å¼ºå¤§çš„ã€‚**

#### 6.4.1 å­ç±»ä¸èƒ½ç»§æ‰¿çš„å†…å®¹

å­ç±»ä¸èƒ½ç»§æ‰¿çˆ¶ç±»çš„æ„é€ æ–¹æ³•ã€‚

**å€¼å¾—æ³¨æ„çš„æ˜¯å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„ç§æœ‰æˆå‘˜ï¼ˆæˆå‘˜å˜é‡ï¼Œæ–¹æ³•ï¼‰ï¼Œåªæ˜¯å­ç±»æ— æ³•ç›´æ¥è®¿é—®è€Œå·²ï¼Œå¯ä»¥é€šè¿‡getter/setteræ–¹æ³•è®¿é—®çˆ¶ç±»çš„privateæˆå‘˜å˜é‡ã€‚**

#### 6.4.2 ç»§æ‰¿çš„ç‰¹ç‚¹

* <span style="color:red">ç»§æ‰¿åå­ç±»æ„æ–¹æ³•å™¨ç‰¹ç‚¹:å­ç±»æ‰€æœ‰æ„é€ æ–¹æ³•çš„ç¬¬ä¸€è¡Œéƒ½ä¼šé»˜è®¤å…ˆè°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ æ–¹æ³•</span>

* æˆå‘˜å˜é‡ä¸é‡å
  * å­ç±»ä¼šä¼˜å…ˆè®¿é—®è‡ªå·±å¯¹è±¡ä¸­çš„æˆå‘˜å˜é‡ã€‚å¦‚æœæ­¤æ—¶æƒ³è®¿é—®çˆ¶ç±»æˆå‘˜å˜é‡å¦‚ä½•è§£å†³å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨superå…³é”®å­—ã€‚
* superè®¿é—®çˆ¶ç±»æˆå‘˜å˜é‡
* æˆå‘˜æ–¹æ³•ä¸é‡å

#### 6.4.3 æ–¹æ³•é‡å†™

**æ–¹æ³•é‡å†™** ï¼šå­ç±»ä¸­å‡ºç°ä¸çˆ¶ç±»ä¸€æ¨¡ä¸€æ ·çš„æ–¹æ³•æ—¶ï¼ˆè¿”å›å€¼ç±»å‹ï¼Œæ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨éƒ½ç›¸åŒï¼‰ï¼Œä¼šå‡ºç°è¦†ç›–æ•ˆæœï¼Œä¹Ÿç§°ä¸ºé‡å†™æˆ–è€…å¤å†™ã€‚**å£°æ˜ä¸å˜ï¼Œé‡æ–°å®ç°**ã€‚

### 6.5 å¤šæ€

1. æœ‰ç»§æ‰¿æˆ–è€…å®ç°å…³ç³»
2. æ–¹æ³•çš„é‡å†™ã€æ„ä¹‰ä½“ç°ï¼šä¸é‡å†™ï¼Œæ— æ„ä¹‰ã€‘
3. çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ã€æ ¼å¼ä½“ç°ã€‘

**å¤šæ€æ˜¯å‡ºç°åœ¨ç»§æ‰¿æˆ–è€…å®ç°å…³ç³»ä¸­çš„**ã€‚

å¤šæ€çš„æ ¼å¼:

```java
çˆ¶ç±»ç±»å‹ å˜é‡å = new å­ç±»/å®ç°ç±»æ„é€ å™¨;
å˜é‡å.æ–¹æ³•å();
```

> è°ƒç”¨æˆå‘˜å˜é‡æ—¶ï¼šç¼–è¯‘çœ‹å·¦è¾¹ï¼Œè¿è¡Œçœ‹å·¦è¾¹
>
> è°ƒç”¨æˆå‘˜æ–¹æ³•æ—¶ï¼šç¼–è¯‘çœ‹å·¦è¾¹ï¼Œè¿è¡Œçœ‹å³è¾¹

```java
Fu f = new Zi()ï¼›
//ç¼–è¯‘çœ‹å·¦è¾¹çš„çˆ¶ç±»ä¸­æœ‰æ²¡æœ‰nameè¿™ä¸ªå±æ€§ï¼Œæ²¡æœ‰å°±æŠ¥é”™
//åœ¨å®é™…è¿è¡Œçš„æ—¶å€™ï¼ŒæŠŠçˆ¶ç±»nameå±æ€§çš„å€¼æ‰“å°å‡ºæ¥
System.out.println(f.name);
//ç¼–è¯‘çœ‹å·¦è¾¹çš„çˆ¶ç±»ä¸­æœ‰æ²¡æœ‰showè¿™ä¸ªæ–¹æ³•ï¼Œæ²¡æœ‰å°±æŠ¥é”™
//åœ¨å®é™…è¿è¡Œçš„æ—¶å€™ï¼Œè¿è¡Œçš„æ˜¯å­ç±»ä¸­çš„showæ–¹æ³•
f.show();
```

#### 6.5.1 <span style="color:red">**è¦æ³¨æ„çš„æ˜¯ï¼š**</span>

* å½“ä¸€ä¸ªæ–¹æ³•çš„å½¢å‚æ˜¯ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’è¿™ä¸ªç±»æ‰€æœ‰çš„å­ç±»å¯¹è±¡ã€‚
* å½“ä¸€ä¸ªæ–¹æ³•çš„å½¢å‚æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’è¿™ä¸ªæ¥å£æ‰€æœ‰çš„å®ç°ç±»å¯¹è±¡ï¼ˆåé¢ä¼šå­¦ï¼‰ã€‚
* è€Œä¸”å¤šæ€è¿˜å¯ä»¥æ ¹æ®ä¼ é€’çš„ä¸åŒå¯¹è±¡æ¥è°ƒç”¨ä¸åŒç±»ä¸­çš„æ–¹æ³•ã€‚

#### 6.5.2 å¼Šç«¯

> æˆ‘ä»¬å·²ç»çŸ¥é“å¤šæ€ç¼–è¯‘é˜¶æ®µæ˜¯çœ‹å·¦è¾¹çˆ¶ç±»ç±»å‹çš„ï¼Œå¦‚æœå­ç±»æœ‰äº›ç‹¬æœ‰çš„åŠŸèƒ½ï¼Œæ­¤æ—¶**å¤šæ€çš„å†™æ³•å°±æ— æ³•è®¿é—®å­ç±»ç‹¬æœ‰åŠŸèƒ½äº†**ã€‚

#### 6.5.3 å¼•ç”¨ç±»å‹è½¬æ¢

##### å‘ä¸Šè½¬å‹ï¼ˆè‡ªåŠ¨è½¬æ¢ï¼‰

* **å‘ä¸Šè½¬å‹**ï¼šå¤šæ€æœ¬èº«æ˜¯å­ç±»ç±»å‹å‘çˆ¶ç±»ç±»å‹å‘ä¸Šè½¬æ¢ï¼ˆè‡ªåŠ¨è½¬æ¢ï¼‰çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯é»˜è®¤çš„ã€‚
  å½“çˆ¶ç±»å¼•ç”¨æŒ‡å‘ä¸€ä¸ªå­ç±»å¯¹è±¡æ—¶ï¼Œä¾¿æ˜¯å‘ä¸Šè½¬å‹ã€‚
  ä½¿ç”¨æ ¼å¼ï¼š

##### å‘ä¸‹è½¬å‹ï¼ˆå¼ºåˆ¶è½¬æ¢ï¼‰

- **å‘ä¸‹è½¬å‹**ï¼šçˆ¶ç±»ç±»å‹å‘å­ç±»ç±»å‹å‘ä¸‹è½¬æ¢çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¼ºåˆ¶çš„ã€‚
  ä¸€ä¸ªå·²ç»å‘ä¸Šè½¬å‹çš„å­ç±»å¯¹è±¡ï¼Œå°†çˆ¶ç±»å¼•ç”¨è½¬ä¸ºå­ç±»å¼•ç”¨ï¼Œå¯ä»¥ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢çš„æ ¼å¼ï¼Œä¾¿æ˜¯å‘ä¸‹è½¬å‹ã€‚

- ```java
  å­ç±»ç±»å‹ å˜é‡å = (å­ç±»ç±»å‹) çˆ¶ç±»å˜é‡å;
  å¦‚:Aniaml a = new Cat();
     Cat c =(Cat) a;  
  ```

### 6.6 æƒé™ä¿®é¥°ç¬¦

|                  | public | protected | é»˜è®¤ | private |
| ---------------- | ------ | --------- | ---- | ------- |
| åŒä¸€ç±»ä¸­         | âˆš      | âˆš         | âˆš    | âˆš       |
| åŒä¸€åŒ…ä¸­çš„ç±»     | âˆš      | âˆš         | âˆš    |         |
| ä¸åŒåŒ…çš„å­ç±»     | âˆš      | âˆš         |      |         |
| ä¸åŒåŒ…ä¸­çš„æ— å…³ç±» | âˆš      |           |      |         |

### 6.7 finalå…³é”®å­—

**final**ï¼š  ä¸å¯æ”¹å˜ï¼Œæœ€ç»ˆçš„å«ä¹‰ã€‚å¯ä»¥ç”¨äºä¿®é¥°ç±»ã€æ–¹æ³•å’Œå˜é‡ã€‚

- ç±»ï¼šè¢«ä¿®é¥°çš„ç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿ã€‚
- æ–¹æ³•ï¼šè¢«ä¿®é¥°çš„æ–¹æ³•ï¼Œä¸èƒ½è¢«é‡å†™ã€‚
- å˜é‡ï¼šè¢«ä¿®é¥°çš„å˜é‡ï¼Œæœ‰ä¸”ä»…èƒ½è¢«èµ‹å€¼ä¸€æ¬¡ã€‚

### 6.8 æŠ½è±¡ç±»

> **æˆ‘ä»¬æŠŠæ²¡æœ‰æ–¹æ³•ä½“çš„æ–¹æ³•ç§°ä¸ºæŠ½è±¡æ–¹æ³•ã€‚Javaè¯­æ³•è§„å®šï¼ŒåŒ…å«æŠ½è±¡æ–¹æ³•çš„ç±»å°±æ˜¯æŠ½è±¡ç±»**ã€‚

- **æŠ½è±¡æ–¹æ³•** ï¼š æ²¡æœ‰æ–¹æ³•ä½“çš„æ–¹æ³•ã€‚
- **æŠ½è±¡ç±»**ï¼šåŒ…å«æŠ½è±¡æ–¹æ³•çš„ç±»ã€‚

> Demo

```java
public abstract class Animal {
    public abstract void run()ï¼›
}
```

#### ç‰¹ç‚¹

æŠ½è±¡ç±»çš„ç‰¹å¾æ€»ç»“èµ·æ¥å¯ä»¥è¯´æ˜¯ **æœ‰å¾—æœ‰å¤±**

**æœ‰å¾—ï¼šæŠ½è±¡ç±»å¾—åˆ°äº†æ‹¥æœ‰æŠ½è±¡æ–¹æ³•çš„èƒ½åŠ›ã€‚**

**æœ‰å¤±ï¼šæŠ½è±¡ç±»å¤±å»äº†åˆ›å»ºå¯¹è±¡çš„èƒ½åŠ›ã€‚**

å…¶ä»–æˆå‘˜ï¼ˆæ„é€ æ–¹æ³•ï¼Œå®ä¾‹æ–¹æ³•ï¼Œé™æ€æ–¹æ³•ç­‰ï¼‰æŠ½è±¡ç±»éƒ½æ˜¯å…·å¤‡çš„ã€‚

#### æ„ä¹‰

â€‹	æŠ½è±¡ç±»å­˜åœ¨çš„æ„ä¹‰æ˜¯ä¸ºäº†è¢«å­ç±»ç»§æ‰¿ï¼Œå¦åˆ™æŠ½è±¡ç±»å°†æ¯«æ— æ„ä¹‰ã€‚æŠ½è±¡ç±»å¯ä»¥å¼ºåˆ¶è®©å­ç±»ï¼Œä¸€å®šè¦æŒ‰ç…§è§„å®šçš„æ ¼å¼è¿›è¡Œé‡å†™ã€‚

### 6.9 æ¥å£

> åœ¨JDK7ï¼ŒåŒ…æ‹¬JDK7ä¹‹å‰ï¼Œæ¥å£ä¸­çš„**åªæœ‰**åŒ…å«ï¼šæŠ½è±¡æ–¹æ³•å’Œå¸¸é‡

æŠ½è±¡ç±»ä¸­å¯ä»¥ç”¨æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æœ‰æ™®é€šæ–¹æ³•ï¼Œæ„é€ æ–¹æ³•ï¼Œæˆå‘˜å˜é‡ç­‰ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯æ¥å£å‘¢ï¼Ÿ**æ¥å£æ˜¯æ›´åŠ å½»åº•çš„æŠ½è±¡ï¼ŒJDK7ä¹‹å‰ï¼ŒåŒ…æ‹¬JDK7ï¼Œæ¥å£ä¸­å…¨éƒ¨æ˜¯æŠ½è±¡æ–¹æ³•ã€‚æ¥å£åŒæ ·æ˜¯ä¸èƒ½åˆ›å»ºå¯¹è±¡çš„**ã€‚

```tex
//æ¥å£çš„å®šä¹‰æ ¼å¼ï¼š
interface æ¥å£åç§°{
    // æŠ½è±¡æ–¹æ³•
}

// æ¥å£çš„å£°æ˜ï¼šinterface
// æ¥å£åç§°ï¼šé¦–å­—æ¯å¤§å†™ï¼Œæ»¡è¶³â€œé©¼å³°æ¨¡å¼â€
```

> Demo

```java
public interface InterF {
    // æŠ½è±¡æ–¹æ³•ï¼
    //    public abstract void run();
    void run();

    //    public abstract String getName();
    String getName();

    //    public abstract int add(int a , int b);
    int add(int a , int b);


    // å®ƒçš„æœ€ç»ˆå†™æ³•æ˜¯ï¼š
    // public static final int AGE = 12 ;
    int AGE  = 12; //å¸¸é‡
    String SCHOOL_NAME = "é»‘é©¬ç¨‹åºå‘˜";

}
```

> å®ç°æ¥å£çš„æ ¼å¼

```java
/**æ¥å£çš„å®ç°ï¼š
    åœ¨Javaä¸­æ¥å£æ˜¯è¢«å®ç°çš„ï¼Œå®ç°æ¥å£çš„ç±»ç§°ä¸ºå®ç°ç±»ã€‚
    å®ç°ç±»çš„æ ¼å¼:*/
class ç±»å implements æ¥å£1,æ¥å£2,æ¥å£3...{

}
```

#### 6.9.1 æ¥å£ä¸æ¥å£çš„å¤šç»§æ‰¿

æ¥å£ä¸æ¥å£ä¹‹é—´æ˜¯å¯ä»¥å¤šç»§æ‰¿çš„ï¼šä¹Ÿå°±æ˜¯ä¸€ä¸ªæ¥å£å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªæ¥å£ã€‚å¤§å®¶ä¸€å®šè¦æ³¨æ„ï¼š

**ç±»ä¸æ¥å£æ˜¯å®ç°å…³ç³»**

**æ¥å£ä¸æ¥å£æ˜¯ç»§æ‰¿å…³ç³»**

> Demo

```java
public interface Abc {
    void go();
    void test();
}

/** æ³•å¾‹è§„èŒƒï¼šæ¥å£*/
public interface Law {
    void rule();
    void test();
}

 *
 *  æ€»ç»“ï¼š
 *     æ¥å£ä¸ç±»ä¹‹é—´æ˜¯å¤šå®ç°çš„ã€‚
 *     æ¥å£ä¸æ¥å£ä¹‹é—´æ˜¯å¤šç»§æ‰¿çš„ã€‚
 * */
public interface SportMan extends Law , Abc {
    void run();
}
```

### <span style="color:red">6.10 å†…éƒ¨ç±»</span>

å°†ä¸€ä¸ªç±»Aå®šä¹‰åœ¨å¦ä¸€ä¸ªç±»Bé‡Œé¢ï¼Œé‡Œé¢çš„é‚£ä¸ªç±»Aå°±ç§°ä¸º**å†…éƒ¨ç±»**ï¼ŒBåˆ™ç§°ä¸º**å¤–éƒ¨ç±»**ã€‚å¯ä»¥æŠŠå†…éƒ¨ç±»ç†è§£æˆå¯„ç”Ÿï¼Œå¤–éƒ¨ç±»ç†è§£æˆå®¿ä¸»ã€‚

#### 6.10.1 ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å†…éƒ¨ç±»

ä¸€ä¸ªäº‹ç‰©å†…éƒ¨è¿˜æœ‰ä¸€ä¸ªç‹¬ç«‹çš„äº‹ç‰©ï¼Œå†…éƒ¨çš„äº‹ç‰©è„±ç¦»å¤–éƒ¨çš„äº‹ç‰©æ— æ³•ç‹¬ç«‹ä½¿ç”¨

1. äººé‡Œé¢æœ‰ä¸€é¢—å¿ƒè„ã€‚
2. æ±½è½¦å†…éƒ¨æœ‰ä¸€ä¸ªå‘åŠ¨æœºã€‚
3. ä¸ºäº†å®ç°æ›´å¥½çš„å°è£…æ€§ã€‚

#### 6.10.2  å†…éƒ¨ç±»çš„åˆ†ç±»

æŒ‰å®šä¹‰çš„ä½ç½®æ¥åˆ†

1. **æˆå‘˜å†…éƒ¨å†…**ï¼Œç±»å®šä¹‰åœ¨äº†æˆå‘˜ä½ç½® (ç±»ä¸­æ–¹æ³•å¤–ç§°ä¸ºæˆå‘˜ä½ç½®ï¼Œæ— staticä¿®é¥°çš„å†…éƒ¨ç±»)
2. **é™æ€å†…éƒ¨ç±»**ï¼Œç±»å®šä¹‰åœ¨äº†æˆå‘˜ä½ç½® (ç±»ä¸­æ–¹æ³•å¤–ç§°ä¸ºæˆå‘˜ä½ç½®ï¼Œæœ‰staticä¿®é¥°çš„å†…éƒ¨ç±»)
3. **å±€éƒ¨å†…éƒ¨ç±»**ï¼Œç±»å®šä¹‰åœ¨æ–¹æ³•å†…
4. **åŒ¿åå†…éƒ¨ç±»**ï¼Œæ²¡æœ‰åå­—çš„å†…éƒ¨ç±»ï¼Œå¯ä»¥åœ¨æ–¹æ³•ä¸­ï¼Œä¹Ÿå¯ä»¥åœ¨ç±»ä¸­æ–¹æ³•å¤–ã€‚

#### 6.10.3 ä½¿ç”¨

##### æˆå‘˜å†…éƒ¨ç±»

> åœ¨æˆå‘˜å†…éƒ¨ç±»é‡Œé¢ï¼ŒJDK16ä¹‹å‰ä¸èƒ½å®šä¹‰é™æ€å˜é‡ï¼ŒJDK16å¼€å§‹æ‰å¯ä»¥å®šä¹‰é™æ€å˜é‡ã€‚
>
> <span style="color:red">åˆ›å»ºå†…éƒ¨ç±»å¯¹è±¡æ—¶ï¼Œå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªéšå«çš„Outer.thisè®°å½•å¤–éƒ¨ç±»å¯¹è±¡çš„åœ°å€å€¼ã€‚</span>

```java
public class Test {
    public static void main(String[] args) {
        //  å®¿ä¸»ï¼šå¤–éƒ¨ç±»å¯¹è±¡ã€‚
       // Outer out = new Outer();
        // åˆ›å»ºå†…éƒ¨ç±»å¯¹è±¡ã€‚
        Outer.Inner oi = new Outer().new Inner();
        oi.method();
    }
}

class Outer {
    // æˆå‘˜å†…éƒ¨ç±»ï¼Œå±äºå¤–éƒ¨ç±»å¯¹è±¡çš„ã€‚
    // æ‹“å±•ï¼šæˆå‘˜å†…éƒ¨ç±»ä¸èƒ½å®šä¹‰é™æ€æˆå‘˜ã€‚
    public class Inner{
        // è¿™é‡Œé¢çš„ä¸œè¥¿ä¸ç±»æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚
        public void method(){
            System.out.println("å†…éƒ¨ç±»ä¸­çš„æ–¹æ³•è¢«è°ƒç”¨äº†");
        }
    }
}

```

##### é™æ€å†…éƒ¨ç±»

###### ç‰¹ç‚¹:

* é™æ€å†…éƒ¨ç±»æ˜¯ä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å†…éƒ¨ç±»ã€‚

- æœ‰staticä¿®é¥°ï¼Œå±äºå¤–éƒ¨ç±»æœ¬èº«çš„ã€‚
- æ€»ç»“ï¼šé™æ€å†…éƒ¨ç±»ä¸å…¶ä»–ç±»çš„ç”¨æ³•å®Œå…¨ä¸€æ ·ã€‚åªæ˜¯è®¿é—®çš„æ—¶å€™éœ€è¦åŠ ä¸Šå¤–éƒ¨ç±».å†…éƒ¨ç±»ã€‚
- **æ‹“å±•1**:é™æ€å†…éƒ¨ç±»å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜ã€‚
- **æ‹“å±•2**:é™æ€å†…éƒ¨ç±»ä¸å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€æˆå‘˜ï¼Œå¦‚æœè¦è®¿é—®éœ€è¦åˆ›å»ºå¤–éƒ¨ç±»çš„å¯¹è±¡ã€‚
- **æ‹“å±•3**:é™æ€å†…éƒ¨ç±»ä¸­æ²¡æœ‰é“¶è¡Œçš„Outer.thisã€‚

**å†…éƒ¨ç±»çš„ä½¿ç”¨æ ¼å¼**ï¼š

```
å¤–éƒ¨ç±».å†…éƒ¨ç±»ã€‚
```

**é™æ€å†…éƒ¨ç±»å¯¹è±¡çš„åˆ›å»ºæ ¼å¼**ï¼š

```java
å¤–éƒ¨ç±».å†…éƒ¨ç±»  å˜é‡ = new  å¤–éƒ¨ç±».å†…éƒ¨ç±»æ„é€ å™¨;
```

> Demo

```java
// å¤–éƒ¨ç±»ï¼šOuter01
class Outer01{
    private static  String sc_name = "é»‘é©¬ç¨‹åº";
    // å†…éƒ¨ç±»: Inner01
    public static class Inner01{
        // è¿™é‡Œé¢çš„ä¸œè¥¿ä¸ç±»æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚
        private String name;
        public Inner01(String name) {
            this.name = name;
        }
        public void showName(){
            System.out.println(this.name);
            // æ‹“å±•:é™æ€å†…éƒ¨ç±»å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜ã€‚
            System.out.println(sc_name);
        }
    }
}

public class InnerClassDemo01 {
    public static void main(String[] args) {
        // åˆ›å»ºé™æ€å†…éƒ¨ç±»å¯¹è±¡ã€‚
        // å¤–éƒ¨ç±».å†…éƒ¨ç±»  å˜é‡ = new  å¤–éƒ¨ç±».å†…éƒ¨ç±»æ„é€ å™¨;
      // æ³¨æ„è¿™ä¸ªä½ç½®  new Outer01.Inner01("å¼ ä¸‰"); Outer01 åé¢æ˜¯æ²¡æœ‰()
        Outer01.Inner01 in  = new Outer01.Inner01("å¼ ä¸‰");
        in.showName();
    }
}
```

##### åŒ¿åå†…éƒ¨ç±»ã€é‡ç‚¹ã€‘

**åŒ¿åå†…éƒ¨ç±»** ï¼šæ˜¯å†…éƒ¨ç±»çš„ç®€åŒ–å†™æ³•ã€‚ä»–æ˜¯ä¸€ä¸ªéšå«äº†åå­—çš„å†…éƒ¨ç±»ã€‚å¼€å‘ä¸­ï¼Œæœ€å¸¸ç”¨åˆ°çš„å†…éƒ¨ç±»å°±æ˜¯åŒ¿åå†…éƒ¨ç±»äº†ã€‚

```java
new ç±»åæˆ–è€…æ¥å£å() {
     é‡å†™æ–¹æ³•;
};
```

åŒ…å«äº†ï¼š

* ç»§æ‰¿æˆ–è€…å®ç°å…³ç³»

* æ–¹æ³•é‡å†™
* åˆ›å»ºå¯¹è±¡

æ‰€ä»¥ä»è¯­æ³•ä¸Šæ¥è®²ï¼Œè¿™ä¸ªæ•´ä½“å…¶å®æ˜¯åŒ¿åå†…éƒ¨ç±»å¯¹è±¡

###### åŒ¿åå†…éƒ¨ç±»å‰æå’Œæ ¼å¼

åŒ¿åå†…éƒ¨ç±»å¿…é¡»**ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»**æˆ–è€…**å®ç°ä¸€ä¸ªçˆ¶æ¥å£**ã€‚

**åŒ¿åå†…éƒ¨ç±»æ ¼å¼**

```java
new çˆ¶ç±»åæˆ–è€…æ¥å£å(){
    // æ–¹æ³•é‡å†™
    @Override 
    public void method() {
        // æ‰§è¡Œè¯­å¥
    }
};
```

> Demo

```java
interface Swim {
    public abstract void swimming();
}

public class Demo07 {
    public static void main(String[] args) {
        // ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»
		new Swim() {
			@Override
			public void swimming() {
				System.out.println("è‡ªç”±æ³³...");
			}
		}.swimming();

        // æ¥å£ å˜é‡ = new å®ç°ç±»(); // å¤šæ€,èµ°å­ç±»çš„é‡å†™æ–¹æ³•
        Swim s2 = new Swim() {
            @Override
            public void swimming() {
                System.out.println("è›™æ³³...");
            }
        };

        s2.swimming();
        s2.swimming();
    }
}
```

## 7. å¸¸ç”¨ API

### 7.1 Math

> è¿”å›å‚æ•°çš„ç»å¯¹å€¼

```java
Math.abs(-2)
```

> è¿”å›å¤§äºæˆ–ç­‰äºå‚æ•°çš„æœ€å°æ•´æ•°
>
> å‘ä¸Šå–æ•´

```java
Math.ceil(23.45)
```

> è¿”å›å°äºæˆ–ç­‰äºå‚æ•°çš„æœ€å¤§æ•´æ•°
>
> å‘ä¸‹å–æ•´

```java
Math.floor(23.45)
```

> æŒ‰ç…§å››èˆäº”å…¥è¿”å›æœ€æ¥è¿‘å‚æ•°çš„intç±»å‹çš„å€¼

```java
Math.round(float a)
```

> è·å–ä¸¤ä¸ªintå€¼ä¸­çš„è¾ƒå¤§å€¼

```java
Math.max(int a,int b)	
```

> è·å–ä¸¤ä¸ªintå€¼ä¸­çš„è¾ƒå°å€¼

```java
Math.min(int a,int b)		
```

> è®¡ç®—açš„bæ¬¡å¹‚çš„å€¼

```java
Math.pow (double a,double b)
```

> è¿”å›ä¸€ä¸ª[0.0,1.0)çš„éšæœºå€¼

```java
Math.random()	
```

### 7.2 System

> è·å–å½“å‰æ—¶é—´æ‰€å¯¹åº”çš„æ¯«ç§’å€¼ï¼ˆå½“å‰æ—¶é—´ä¸º0æ—¶åŒºæ‰€å¯¹åº”çš„æ—¶é—´å³å°±æ˜¯è‹±å›½æ ¼æ—å°¼æ²»å¤©æ–‡å°æ—§å€æ‰€åœ¨ä½ç½®ï¼‰

```java
System.currentTimeMillis()
```

> ç»ˆæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„Javaè™šæ‹Ÿæœºï¼Œ0è¡¨ç¤ºæ­£å¸¸é€€å‡ºï¼Œéé›¶è¡¨ç¤ºå¼‚å¸¸é€€å‡º

```java
System.exit(0);
```

> è¿›è¡Œæ•°å€¼å…ƒç´ copy

```java
System.arraycopy(Object src,  int  srcPos, Object dest, int destPos, int length)
  
// src: 	 æºæ•°ç»„
// srcPosï¼š  æºæ•°å€¼çš„å¼€å§‹ä½ç½®
// destï¼š    ç›®æ ‡æ•°ç»„
// destPosï¼š ç›®æ ‡æ•°ç»„å¼€å§‹ä½ç½®
// length:   è¦å¤åˆ¶çš„å…ƒç´ ä¸ªæ•°
public static native void arraycopy(Object src,  int  srcPos, Object dest, int destPos, int length); 


 // å®šä¹‰æºæ•°ç»„
        int[] srcArray = {23 , 45 , 67 , 89 , 14 , 56 } ;

        // å®šä¹‰ç›®æ ‡æ•°ç»„
        int[] desArray = new int[10] ;

        // è¿›è¡Œæ•°ç»„å…ƒç´ çš„copy: æŠŠsrcArrayæ•°ç»„ä¸­ä»0ç´¢å¼•å¼€å§‹çš„3ä¸ªå…ƒç´ ï¼Œä»desArrayæ•°ç»„ä¸­çš„1ç´¢å¼•å¼€å§‹å¤åˆ¶è¿‡å»
        System.arraycopy(srcArray , 0 , desArray , 1 , 3);
```

### 7.3 Runtime

Runtimeè¡¨ç¤ºJavaä¸­è¿è¡Œæ—¶å¯¹è±¡ï¼Œå¯ä»¥è·å–åˆ°ç¨‹åºè¿è¡Œæ—¶è®¾è®¡åˆ°çš„ä¸€äº›ä¿¡æ¯

> å½“å‰ç³»ç»Ÿçš„è¿è¡Œç¯å¢ƒå¯¹è±¡

```java
Runtime r1 =Runtime.getRuntime();
```

> åœæ­¢è™šæ‹Ÿæœº

```java
Runtime.getRuntime().exit(0);
```

> è·å¾—CPUçš„çº¿ç¨‹æ•°

```java
Runtime.getRuntime().availableProcessors()
```

> JVMèƒ½ä»ç³»ç»Ÿä¸­è·å–æ€»å†…å­˜å¤§å°ï¼ˆå•ä½byteï¼‰

```java
Runtime.getRuntime().maxMemory() / 1024 / 1024
```

> JVMå·²ç»ä»ç³»ç»Ÿä¸­è·å–æ€»å†…å­˜å¤§å°ï¼ˆå•ä½byteï¼‰

```java
Runtime.getRuntime().totalMemory() / 1024 / 1024
```

> JVMå‰©ä½™å†…å­˜å¤§å°ï¼ˆå•ä½byteï¼‰

```java
Runtime.getRuntime().freeMemory() / 1024 / 1024
```

> è¿è¡Œcmdå‘½ä»¤

```java
//shutdown :å…³æœº
//åŠ ä¸Šå‚æ•°æ‰èƒ½æ‰§è¡Œ
//-s :é»˜è®¤åœ¨1åˆ†é’Ÿä¹‹åå…³æœº
//-s -t æŒ‡å®šæ—¶é—´ : æŒ‡å®šå…³æœºæ—¶é—´
//-a :å–æ¶ˆå…³æœºæ“ä½œ
//-r: å…³æœºå¹¶é‡å¯
        Runtime.getRuntime().exec("shutdown -s -t 3600");
```

### 7.4 Object

> è¿”å›è¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼(å¯ä»¥çœ‹åšæ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€å€¼)

```java
// åˆ›å»ºå­¦ç”Ÿå¯¹è±¡
Student s1 = new Student("itheima" , "14") ;

// è°ƒç”¨toStringæ–¹æ³•è·å–s1å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç°å½¢å¼
String result1 = s1.toString();
```

> æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡åœ°å€å€¼æ˜¯å¦ç›¸ç­‰ï¼›trueè¡¨ç¤ºç›¸åŒï¼Œfalseè¡¨ç¤ºä¸ç›¸åŒ

```java
// åˆ›å»ºä¸¤ä¸ªå­¦ç”Ÿå¯¹è±¡
Student s1 = new Student("itheima" , "14") ;
Student s2 = new Student("itheima" , "14") ;

// æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰
System.out.println(s1 == s2);
```

é€šè¿‡æºç æˆ‘ä»¬å¯ä»¥å‘ç°é»˜è®¤æƒ…å†µä¸‹equalsæ–¹æ³•æ¯”è¾ƒçš„ä¹Ÿæ˜¯å¯¹è±¡çš„åœ°å€å€¼ã€‚æ¯”è¾ƒå†…å­˜åœ°å€å€¼ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæˆ‘ä»¬å¸Œæœ›æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡çš„å±æ€§ç›¸åŒï¼Œæˆ‘ä»¬è®¤ä¸ºå°±æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼›

é‚£ä¹ˆè¦æ¯”è¾ƒå¯¹è±¡çš„å±æ€§ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨Studentç±»ä¸­é‡å†™Objectç±»ä¸­çš„equalsæ–¹æ³•ã€‚equalsæ–¹æ³•çš„é‡å†™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ideaå¼€å‘å·¥å…·å®Œæˆï¼Œå…·ä½“çš„æ“ä½œå¦‚ä¸‹æ‰€ç¤ºï¼š

1. åœ¨ç©ºç™½å¤„ä½¿ç”¨å¿«æ·é”®ï¼šalt + insertã€‚æ­¤æ—¶ä¼šå¼¹å‡ºå¦‚ä¸‹çš„å¯¹è¯æ¡†

![image-20231106183047003](https://img.picgo.net/2023/11/06/image-202311061830470032d1236d3939f9049.png)

```java
@Override
public boolean equals(Object o) {
    if (this == o) return true;
    if (o == null || getClass() != o.getClass()) return false;
    Student student = (Student) o;
    return Objects.equals(name, student.name) && Objects.equals(age, student.age);	// æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„nameå±æ€§å€¼å’Œageå±æ€§å€¼
}

@Override
public int hashCode() {
    return 0;
}
```



> å¯¹è±¡å…‹éš†

â€‹	æŠŠAå¯¹è±¡çš„å±æ€§å€¼å®Œå…¨æ‹·è´ç»™Bå¯¹è±¡ï¼Œä¹Ÿå«å¯¹è±¡æ‹·è´,å¯¹è±¡å¤åˆ¶

**å¯¹è±¡å…‹éš†çš„åˆ†ç±»ï¼š**

>æ·±å…‹éš†å’Œæµ…å…‹éš†

**æµ…å…‹éš†ï¼š**

â€‹	ä¸ç®¡å¯¹è±¡å†…éƒ¨çš„å±æ€§æ˜¯åŸºæœ¬æ•°æ®ç±»å‹è¿˜æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼Œéƒ½å®Œå…¨æ‹·è´è¿‡æ¥ 

â€‹	åŸºæœ¬æ•°æ®ç±»å‹æ‹·è´è¿‡æ¥çš„æ˜¯å…·ä½“çš„æ•°æ®ï¼Œå¼•ç”¨æ•°æ®ç±»å‹æ‹·è´è¿‡æ¥çš„æ˜¯åœ°å€å€¼ã€‚

â€‹	Objectç±»é»˜è®¤çš„æ˜¯æµ…å…‹éš†

![image-20231106183211708](https://img.picgo.net/2023/11/06/image-20231106183211708adb8b764302385a2.png)

**æ·±å…‹éš†ï¼š**

â€‹	åŸºæœ¬æ•°æ®ç±»å‹æ‹·è´è¿‡æ¥ï¼Œå­—ç¬¦ä¸²å¤ç”¨ï¼Œå¼•ç”¨æ•°æ®ç±»å‹ä¼šé‡æ–°åˆ›å»ºæ–°çš„

![image-20231106183233016](https://img.picgo.net/2023/11/06/image-20231106183233016e6156b76fe1919f7.png)

ä»£ç å®ç°ï¼š

> æµ…æ‹·è´

```java
// è¦æƒ³ä½¿ç”¨ clone()æ–¹æ³•
1. ç±»è¦å®ç° Cloneable æ¥å£
2. é‡å†™ clone()æ–¹æ³•
  @Override
    protected Object clone() throws CloneNotSupportedException {
  return super.clone();
}
```

> æ·±æ‹·è´
>
> 1. é‡å†™clone()æ–¹æ³•æ¥å®ç°æ·±æ‹·è´,åœ¨å…‹éš†å¯¹è±¡æ—¶,é€’å½’å¤åˆ¶åŸæœ‰å¯¹è±¡åŒ…å«çš„æ‰€æœ‰å­å¯¹è±¡ã€‚
> 2. é€šè¿‡å¯¹è±¡åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ¥å®ç°æ·±æ‹·è´,éœ€è¦è®©å¯¹è±¡æ‰€å«çš„å­å¯¹è±¡ä¹Ÿå®ç°åºåˆ—åŒ–æ¥å£ã€‚
> 3. ç›´æ¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡,å¹¶é€ä¸ªå¤åˆ¶åŸå¯¹è±¡å±æ€§å€¼è¿‡æ¥,ä»¥åŠé€’å½’å¤åˆ¶å…¶åŒ…å«çš„å­å¯¹è±¡ã€‚

```java
// æµ…æ‹·è´ - å…‹éš†å¯¹è±¡
class Object implements Cloneable {
  @Override
  protected Object clone() throws CloneNotSupportedException {
    return super.clone(); 
  }
}

// æ·±æ‹·è´ - é‡å†™clone() 
class DeepObject implements Cloneable {  
  private SubObject sub; //å­å¯¹è±¡
    
  @Override
  protected DeepObject clone() throws CloneNotSupportedException {
    DeepObject obj = (DeepObject)super.clone();
    obj.sub = (SubObject)sub.clone(); //é€’å½’æ‹·è´å­å¯¹è±¡
    return obj;
  }
}
```

### 7.5 Date

> åˆ›å»ºæ—¥æœŸå¯¹è±¡ï¼ŒæŠŠå½“å‰çš„æ—¶é—´

```java
new Date()
```

> åˆ›å»ºæ—¥æœŸå¯¹è±¡ï¼ŒæŠŠå½“å‰çš„æ¯«ç§’å€¼è½¬æˆæ—¥æœŸå¯¹è±¡

```java
new Date(0L)
```

> æŠŠæ—¥æœŸå¯¹è±¡è½¬æ¢æˆå¯¹åº”çš„æ—¶é—´æ¯«ç§’å€¼

```java
//åˆ›å»ºæ—¥æœŸå¯¹è±¡
Date d = new Date();
//public long getTime():è·å–çš„æ˜¯æ—¥æœŸå¯¹è±¡ä»1970å¹´1æœˆ1æ—¥ 00:00:00åˆ°ç°åœ¨çš„æ¯«ç§’å€¼
System.out.println(d.getTime() * 1.0 / 1000 / 60 / 60 / 24 / 365 + "å¹´");
```

> æŠŠæ–¹æ³•å‚æ•°ç»™å®šçš„æ¯«ç§’å€¼è®¾ç½®ç»™æ—¥æœŸå¯¹è±¡

```java
//åˆ›å»ºæ—¥æœŸå¯¹è±¡
Date d = new Date();
long time = System.currentTimeMillis();
d.setTime(time);

```

### 7.6 SimpleDateFormat

æ—¥æœŸ/æ—¶é—´æ ¼å¼åŒ–ç±»

> æ ¼å¼è§„åˆ™
>
> - `public String format(Date date)`ï¼šå°†Dateå¯¹è±¡æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚
>
> - `public Date parse(String source)`ï¼šå°†å­—ç¬¦ä¸²è§£æä¸ºDateå¯¹è±¡ã€‚

| æ ‡è¯†å­—æ¯ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ | å«ä¹‰ |
| ---------------------- | ---- |
| y                      | å¹´   |
| M                      | æœˆ   |
| d                      | æ—¥   |
| H                      | æ—¶   |
| m                      | åˆ†   |
| s                      | ç§’   |

> Demo

> å°†åˆ—å‡ºçš„æ ¼å¼çš„æ—¶é—´,è½¬æ¢ä¸º Java å†…éƒ¨çš„ Date å¯¹è±¡

```java
//1.å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºæ—¶é—´
String str = "2023-11-11 11:11:11";
//2.åˆ©ç”¨ç©ºå‚æ„é€ åˆ›å»ºsimpleDateFormatå¯¹è±¡
// ç»†èŠ‚:
//åˆ›å»ºå¯¹è±¡çš„æ ¼å¼è¦è·Ÿå­—ç¬¦ä¸²çš„æ ¼å¼å®Œå…¨ä¸€è‡´
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date date = sdf.parse(str);
//3.æ‰“å°ç»“æœ
        System.out.println(date.getTime());//1699672271000
```

> ä½¿ç”¨ format æ ¼å¼åŒ–æ—¶é—´

```java
 //1.åˆ©ç”¨ç©ºå‚æ„é€ åˆ›å»ºsimpleDateFormatå¯¹è±¡ï¼Œé»˜è®¤æ ¼å¼
SimpleDateFormat sdf1 = new SimpleDateFormat();
Date d1 = new Date(0L); // è·å– 1090 å¹´ 1 æœˆ 1 å· ä¸Šåˆ 8 ç‚¹çš„æ—¶é—´ --- æ—¶é—´æˆ³
String str1 = sdf1.format(d1); // ä½¿ç”¨æ ¼å¼åŒ–
System.out.println(str1);//1970/1/1 ä¸Šåˆ8:00



//2.åˆ©ç”¨å¸¦å‚æ„é€ åˆ›å»ºsimpleDateFormatå¯¹è±¡ï¼ŒæŒ‡å®šæ ¼å¼
SimpleDateFormat sdf2 = new SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥HH:mm:ss");
String str2 = sdf2.format(d1);
System.out.println(str2);//1970å¹´01æœˆ01æ—¥ 08:00:00
```

> æ¡ˆä¾‹ Demo

```java
/*å‡è®¾ï¼Œä½ åˆæ‹çš„å‡ºç”Ÿå¹´æœˆæ—¥ä¸º:2000-11-11
     è¯·ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºè¿™ä¸ªæ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º:2000å¹´11æœˆ11æ—¥
     åˆ›å»ºä¸€ä¸ªDateå¯¹è±¡è¡¨ç¤º2000å¹´11æœˆ11æ—¥
     åˆ›å»ºä¸€ä¸ªSimpleDateFormatå¯¹è±¡ï¼Œå¹¶å®šä¹‰æ ¼å¼ä¸ºå¹´æœˆæ—¥æŠŠæ—¶é—´å˜æˆ:2000å¹´11æœˆ11æ—¥
*/

//1.å¯ä»¥é€šè¿‡2000-11-11è¿›è¡Œè§£æï¼Œè§£ææˆä¸€ä¸ªDateå¯¹è±¡
String str = "2000-11-11";
//2.è§£æ
SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-MM-dd");
Date date = sdf1.parse(str);
//3.æ ¼å¼åŒ–
SimpleDateFormat sdf2 = new SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥");
String result = sdf2.format(date);
System.out.println(result);
```

### 7.7 Calendar

| æ–¹æ³•å                                  | è¯´æ˜                                                         |
| --------------------------------------- | ------------------------------------------------------------ |
| `public static Calendar getInstance()`  | è·å–ä¸€ä¸ªå®ƒçš„å­ç±»GregorianCalendarå¯¹è±¡ã€‚                      |
| `public int get(int field)`             | è·å–æŸä¸ªå­—æ®µçš„å€¼ã€‚fieldå‚æ•°è¡¨ç¤ºè·å–å“ªä¸ªå­—æ®µçš„å€¼ï¼Œ<br />å¯ä»¥ä½¿ç”¨Calenderä¸­å®šä¹‰çš„å¸¸é‡æ¥è¡¨ç¤ºï¼š<br />Calendar.YEAR : å¹´<br />Calendar.MONTH ï¼šæœˆ<br />Calendar.DAY_OF_MONTHï¼šæœˆä¸­çš„æ—¥æœŸ<br />Calendar.HOURï¼šå°æ—¶<br />Calendar.MINUTEï¼šåˆ†é’Ÿ<br />Calendar.SECONDï¼šç§’<br />Calendar.DAY_OF_WEEKï¼šæ˜ŸæœŸ |
| `public void set(int field,int value)`  | è®¾ç½®æŸä¸ªå­—æ®µçš„å€¼                                             |
| `public void add(int field,int amount)` | ä¸ºæŸä¸ªå­—æ®µå¢åŠ /å‡å°‘æŒ‡å®šçš„å€¼                                  |





> Demo get

```java
// è·å–åˆ°å½“å‰çš„æ—¶é—´åŒ…æ‹¬æ‰€æœ‰çš„æ—¶é—´
Calendar instance = Calendar.getInstance();

int year = instance.get(Calendar.YEAR);
//Calendarçš„æœˆä»½å€¼æ˜¯0-11
int month = instance.get(Calendar.MONTH) + 1;
int day = instance.get(Calendar.DAY_OF_MONTH);
int hour = instance.get(Calendar.HOUR);
int minute = instance.get(Calendar.MINUTE);
int second = instance.get(Calendar.SECOND);
int week = instance.get(Calendar.DAY_OF_WEEK);//è¿”å›å€¼èŒƒå›´ï¼š1--7ï¼Œåˆ†åˆ«è¡¨ç¤ºï¼š"æ˜ŸæœŸæ—¥","æ˜ŸæœŸä¸€","æ˜ŸæœŸäºŒ",...,"æ˜ŸæœŸå…­"
```

> Demo set

```java
//è®¾ç½®å±æ€§â€”â€”set(int field,int value):
Calendar c1 = Calendar.getInstance();//è·å–å½“å‰æ—¥æœŸ

//è®¡ç®—ç­é•¿å‡ºç”Ÿé‚£å¤©æ˜¯æ˜ŸæœŸå‡ (å‡å¦‚ç­é•¿å‡ºç”Ÿæ—¥æœŸä¸ºï¼š1998å¹´3æœˆ18æ—¥)
c1.set(Calendar.YEAR, 1998);
c1.set(Calendar.MONTH, 3 - 1);//è½¬æ¢ä¸ºCalendarå†…éƒ¨çš„æœˆä»½å€¼
c1.set(Calendar.DAY_OF_MONTH, 18);

int w = c1.get(Calendar.DAY_OF_WEEK);
System.out.println("ç­é•¿å‡ºç”Ÿé‚£å¤©æ˜¯ï¼š" + getWeek(w));
```

> Demo add

```java
//è®¡ç®—200å¤©ä»¥åæ˜¯å“ªå¹´å“ªæœˆå“ªæ—¥ï¼Œæ˜ŸæœŸå‡ ï¼Ÿ
Calendar c2 = Calendar.getInstance();//è·å–å½“å‰æ—¥æœŸ
c2.add(Calendar.DAY_OF_MONTH, 200);//æ—¥æœŸåŠ 200

int y = c2.get(Calendar.YEAR);
int m = c2.get(Calendar.MONTH) + 1;//è½¬æ¢ä¸ºå®é™…çš„æœˆä»½
int d = c2.get(Calendar.DAY_OF_MONTH);

int wk = c2.get(Calendar.DAY_OF_WEEK);
System.out.println("200å¤©åæ˜¯ï¼š" + y + "å¹´" + m + "æœˆ" + d + "æ—¥" + getWeek(wk));
```

### 7.8  JDK8æ—¶é—´ç›¸å…³

| JDK8æ—¶é—´ç±»ç±»å    | ä½œç”¨                   |
| ----------------- | ---------------------- |
| ZoneId            | æ—¶åŒº                   |
| Instant           | æ—¶é—´æˆ³                 |
| ZoneDateTime      | å¸¦æ—¶åŒºçš„æ—¶é—´           |
| DateTimeFormatter | ç”¨äºæ—¶é—´çš„æ ¼å¼åŒ–å’Œè§£æ |
| LocalDate         | å¹´ã€æœˆã€æ—¥             |
| LocalTime         | æ—¶ã€åˆ†ã€ç§’             |
| LocalDateTime     | å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ |
| Duration          | æ—¶é—´é—´éš”ï¼ˆç§’ï¼Œçº³ï¼Œç§’ï¼‰ |
| Period            | æ—¶é—´é—´éš”ï¼ˆå¹´ï¼Œæœˆï¼Œæ—¥ï¼‰ |
| ChronoUnit        | æ—¶é—´é—´éš”ï¼ˆæ‰€æœ‰å•ä½ï¼‰   |

## 

#### 7.8.1  ZoneId æ—¶åŒº

```java
Set<String> zoneIds = ZoneId.getAvailableZoneIds();
System.out.println(zoneIds.size());//603 Java æ‰€æ”¯æŒçš„æ‰€æœ‰çš„æ—¶åŒºä¸ªæ•°
System.out.println(zoneIds);// ä»¥æ•°ç»„çš„å½¢å¼æ‰“å°å‡ºæ‰€æœ‰çš„æ—¶åŒº


//è·å–å½“å‰ç³»ç»Ÿçš„é»˜è®¤æ—¶åŒº
ZoneId zoneId = ZoneId.systemDefault();
System.out.println(zoneId);//Asia/Shanghai

//è·å–æŒ‡å®šçš„æ—¶åŒº
ZoneId zoneId1 = ZoneId.of("Asia/Pontianak");
System.out.println(zoneId1);//Asia/Pontianak
```

#### 7.8.2  Instant æ—¶é—´æˆ³

```java
//è·å–å½“å‰æ—¶é—´çš„Instantå¯¹è±¡(æ ‡å‡†æ—¶é—´)
Instant now = Instant.now();
System.out.println(now);

//æ ¹æ®(ç§’/æ¯«ç§’/çº³ç§’)è·å–Instantå¯¹è±¡ 
//å•ä½æ˜¯ç§’
Instant instant1 = Instant.ofEpochMilli(0L);
System.out.println(instant1);//1970-01-01T00:00:00z

//å•ä½æ˜¯æ¯«ç§’
Instant instant2 = Instant.ofEpochSecond(1L);
System.out.println(instant2);//1970-01-01T00:00:01Z

//å•ä½æ˜¯çº³ç§’
Instant instant3 = Instant.ofEpochSecond(1L, 1000000000L);
System.out.println(instant3);

//ç”¨äºæ—¶é—´çš„åˆ¤æ–­
Instant instant4=Instant.ofEpochMilli(0L);
Instant instant5 =Instant.ofEpochMilli(1000L);


//isBefore:åˆ¤æ–­è°ƒç”¨è€…ä»£è¡¨çš„æ—¶é—´æ˜¯å¦åœ¨å‚æ•°è¡¨ç¤ºæ—¶é—´çš„å‰é¢
boolean result1=instant4.isBefore(instant5);
System.out.println(result1);//true

//isAfter:åˆ¤æ–­è°ƒç”¨è€…ä»£è¡¨çš„æ—¶é—´æ˜¯å¦åœ¨å‚æ•°è¡¨ç¤ºæ—¶é—´çš„åé¢
boolean result2 = instant4.isAfter(instant5);
System.out.println(result2);//false

//Instant minusXxx(long millisToSubtract) å‡å°‘æ—¶é—´ç³»åˆ—çš„æ–¹æ³•
Instant instant6 =Instant.ofEpochMilli(3000L);
System.out.println(instant6);//1970-01-01T00:00:03Z

Instant instant7 =instant6.minusSeconds(1);
System.out.println(instant7);//1970-01-01T00:00:02Z
```

### 7.9 åŒ…è£…ç±»

Javaæä¾›äº†ä¸¤ä¸ªç±»å‹ç³»ç»Ÿï¼ŒåŸºæœ¬ç±»å‹ä¸å¼•ç”¨ç±»å‹ï¼Œä½¿ç”¨åŸºæœ¬ç±»å‹åœ¨äºæ•ˆç‡ï¼Œç„¶è€Œå¾ˆå¤šæƒ…å†µï¼Œä¼šåˆ›å»ºå¯¹è±¡ä½¿ç”¨ï¼Œå› ä¸ºå¯¹è±¡å¯ä»¥åšæ›´å¤šçš„åŠŸèƒ½ï¼Œå¦‚æœæƒ³è¦æˆ‘ä»¬çš„åŸºæœ¬ç±»å‹åƒå¯¹è±¡ä¸€æ ·æ“ä½œï¼Œå°±å¯ä»¥ä½¿ç”¨åŸºæœ¬ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»ï¼Œå¦‚ä¸‹ï¼š

| åŸºæœ¬ç±»å‹ | å¯¹åº”çš„åŒ…è£…ç±»ï¼ˆä½äºjava.langåŒ…ä¸­ï¼‰ |
| -------- | --------------------------------- |
| byte     | Byte                              |
| short    | Short                             |
| int      | **Integer**                       |
| long     | Long                              |
| float    | Float                             |
| double   | Double                            |
| char     | **Character**                     |
| boolean  | Boolean                           |

```java
//public static Integer valueOf(int i)ï¼šè¿”å›è¡¨ç¤ºæŒ‡å®šçš„ int å€¼çš„ Integer å®ä¾‹
Integer i3 = Integer.valueOf(100);
System.out.println(i3);

//public static Integer valueOf(String s)ï¼šè¿”å›ä¿å­˜æŒ‡å®šStringå€¼çš„Integerå¯¹è±¡ 
Integer i4 = Integer.valueOf("100");
System.out.println(i4);

//1.æŠŠæ•´æ•°è½¬æˆäºŒè¿›åˆ¶ï¼Œåå…­è¿›åˆ¶
String str1 = Integer.toBinaryString(100);
System.out.println(str1);//1100100

//2.æŠŠæ•´æ•°è½¬æˆå…«è¿›åˆ¶
String str2 = Integer.toOctalString(100);
System.out.println(str2);//144

//3.æŠŠæ•´æ•°è½¬æˆåå…­è¿›åˆ¶
String str3 = Integer.toHexString(100);
System.out.println(str3);//64

//å°†å­—ç¬¦ä¸²ç±»å‹çš„æ•´æ•°è½¬æˆintç±»å‹çš„æ•´æ•°
//å¼ºç±»å‹è¯­è¨€:æ¯ç§æ•°æ®åœ¨javaä¸­éƒ½æœ‰å„è‡ªçš„æ•°æ®ç±»å‹
//åœ¨è®¡ç®—çš„æ—¶å€™ï¼Œå¦‚æœä¸æ˜¯åŒä¸€ç§æ•°æ®ç±»å‹ï¼Œæ˜¯æ— æ³•ç›´æ¥è®¡ç®—çš„ã€‚
int i = Integer.parseInt("123");
System.out.println(i);
System.out.println(i + 1);//124

//8ç§åŒ…è£…ç±»å½“ä¸­ï¼Œé™¤äº†Characteréƒ½æœ‰å¯¹åº”çš„parseXxxçš„æ–¹æ³•ï¼Œè¿›è¡Œç±»å‹è½¬æ¢
String str = "true";
boolean b = Boolean.parseBoolean(str);
System.out.println(b);
```

#### è£…ç®±ä¸æ‹†ç®±

```java
//åŸºæœ¬æ•°å€¼---->åŒ…è£…å¯¹è±¡
Integer i = new Integer(4);//ä½¿ç”¨æ„é€ å‡½æ•°å‡½æ•°
Integer iii = Integer.valueOf(4);//ä½¿ç”¨åŒ…è£…ç±»ä¸­çš„valueOfæ–¹æ³•

//åŒ…è£…å¯¹è±¡---->åŸºæœ¬æ•°å€¼
int num = i.intValue();


//è‡ªåŠ¨æ‹†ç®±è£…ç®±
Integer i = 4;//è‡ªåŠ¨è£…ç®±ã€‚ç›¸å½“äºInteger i = Integer.valueOf(4);
i = i + 5;//ç­‰å·å³è¾¹ï¼šå°†iå¯¹è±¡è½¬æˆåŸºæœ¬æ•°å€¼(è‡ªåŠ¨æ‹†ç®±) i.intValue() + 5;
//åŠ æ³•è¿ç®—å®Œæˆåï¼Œå†æ¬¡è£…ç®±ï¼ŒæŠŠåŸºæœ¬æ•°å€¼è½¬æˆå¯¹è±¡ã€‚
```

#### åŸºæœ¬ç±»å‹è½¬æ¢ä¸ºString

- æ–¹å¼ä¸€ï¼šç›´æ¥åœ¨æ•°å­—ååŠ ä¸€ä¸ªç©ºå­—ç¬¦ä¸²
- æ–¹å¼äºŒï¼šé€šè¿‡Stringç±»é™æ€æ–¹æ³•valueOf()

#### Stringè½¬æ¢æˆåŸºæœ¬ç±»å‹ 

```java
//String --- int
String s = "100";
//æ–¹å¼1ï¼šString --- Integer --- int
Integer i = Integer.valueOf(s);
//public int intValue()
int x = i.intValue();
System.out.println(x);
//æ–¹å¼2
//public static int parseInt(String s)
int y = Integer.parseInt(s);
System.out.println(y);
```



## 8.æ­£åˆ™è¡¨è¾¾å¼

### 8.1 æ­£åˆ™è¡¨è¾¾å¼-å­—ç¬¦ç±»

1. \[abc\]ï¼šä»£è¡¨aæˆ–è€…bï¼Œæˆ–è€…cå­—ç¬¦ä¸­çš„ä¸€ä¸ªã€‚
2. \[^abc\]ï¼šä»£è¡¨é™¤a,b,cä»¥å¤–çš„ä»»ä½•å­—ç¬¦ã€‚
3. [a-z]ï¼šä»£è¡¨a-zçš„æ‰€æœ‰å°å†™å­—ç¬¦ä¸­çš„ä¸€ä¸ªã€‚
4. [A-Z]ï¼šä»£è¡¨A-Zçš„æ‰€æœ‰å¤§å†™å­—ç¬¦ä¸­çš„ä¸€ä¸ªã€‚
5. [0-9]ï¼šä»£è¡¨0-9ä¹‹é—´çš„æŸä¸€ä¸ªæ•°å­—å­—ç¬¦ã€‚
6. [a-zA-Z0-9]ï¼šä»£è¡¨a-zæˆ–è€…A-Zæˆ–è€…0-9ä¹‹é—´çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚
7. [a-dm-p]ï¼ša åˆ° d æˆ– m åˆ° pä¹‹é—´çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ 

> "a".matches("[abc]")

### 8.2 æ­£åˆ™è¡¨è¾¾å¼-é€»è¾‘è¿ç®—ç¬¦

è¯­æ³•ç¤ºä¾‹ï¼š

1. &&ï¼šå¹¶ä¸”
2. |    ï¼šæˆ–è€…
3. \  ï¼šè½¬ä¹‰å­—ç¬¦

```java
   System.out.println("\"");
```

### 8.3 æ­£åˆ™è¡¨è¾¾å¼-é¢„å®šä¹‰å­—ç¬¦

è¯­æ³•ç¤ºä¾‹ï¼š

1. "." ï¼š åŒ¹é…ä»»ä½•å­—ç¬¦ã€‚
2. "\d"ï¼šä»»ä½•æ•°å­—[0-9]çš„ç®€å†™ï¼›
3. "\D"ï¼šä»»ä½•éæ•°å­—\[^0-9\]çš„ç®€å†™ï¼›
4. "\s"ï¼š ç©ºç™½å­—ç¬¦ï¼š[ \t\n\x0B\f\r] çš„ç®€å†™
5. "\S"ï¼š éç©ºç™½å­—ç¬¦ï¼š\[^\s\] çš„ç®€å†™
6. "\w"ï¼šå•è¯å­—ç¬¦ï¼š[a-zA-Z_0-9]çš„ç®€å†™
7. "\W"ï¼šéå•è¯å­—ç¬¦ï¼š\[^\w\]

> å¿…é¡»æ˜¯æ•°å­— å­—æ¯ ä¸‹åˆ’çº¿ è‡³å°‘ 6ä½

```java
"2442fsfsf".matches("\\w{6,}")
```

### 8.4 æ­£åˆ™è¡¨è¾¾å¼-æ•°é‡è¯

è¯­æ³•ç¤ºä¾‹ï¼š

1. X? : 0æ¬¡æˆ–1æ¬¡ ?
2. X* : 0æ¬¡åˆ°å¤šæ¬¡*
3. X+ : 1æ¬¡æˆ–å¤šæ¬¡+
4. X{n} : æ°å¥½næ¬¡
5. X{n,} : è‡³å°‘næ¬¡
6. X{n,m}: nåˆ°mæ¬¡(nå’Œméƒ½æ˜¯åŒ…å«çš„)

## 9.é›†åˆ-å¸¸ç”¨

![01_é›†åˆç±»ä½“ç³»ç»“æ„å›¾](https://img.picgo.net/2023/11/06/01_b2049fb450de998e.png)

### 9.1 Collection

> Tip:
>
> â€‹	Iteratoræ˜¯é›†åˆçš„é¡¶å±‚æ¥å£
>
> â€‹	éœ€è¦æ³¨æ„çš„æ˜¯ Collection æ˜¯æ¥å£å¹¶æ²¡æœ‰æ–¹æ³•ä½“å±äºå•åˆ—é›†åˆçš„é¡¶å±‚æ¥å£

| æ–¹æ³•å                     | è¯´æ˜                               |
| :------------------------- | :--------------------------------- |
| boolean add(E e)           | æ·»åŠ å…ƒç´                            |
| boolean remove(Object o)   | ä»é›†åˆä¸­ç§»é™¤æŒ‡å®šçš„å…ƒç´              |
| boolean removeIf(Object o) | æ ¹æ®æ¡ä»¶è¿›è¡Œç§»é™¤                   |
| void   clear()             | æ¸…ç©ºé›†åˆä¸­çš„å…ƒç´                    |
| boolean contains(Object o) | åˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å…ƒç´        |
| boolean isEmpty()          | åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º                   |
| int   size()               | é›†åˆçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•° |

### 9.2 éå†

#### 9.2.1 è¿­ä»£å™¨éå†

```java
 //åˆ›å»ºé›†åˆå¯¹è±¡
Collection<String> c = new ArrayList<>();

//æ·»åŠ å…ƒç´ 
c.add("hello");
c.add("world");
c.add("java");
c.add("javaee");

// é€šè¿‡é›†åˆçš„.iterator()æ–¹æ³•è·å– Iterator å¯¹è±¡
Iterator<String> it = c.iterator();

//ç”¨whileå¾ªç¯æ”¹è¿›å…ƒç´ çš„åˆ¤æ–­å’Œè·å–
while (it.hasNext()) {
  String s = it.next();
  System.out.println(s);
}
```

> TipğŸ’¡: 
>
> åˆ é™¤æ–¹æ³•:è¦ä½¿ç”¨è¿­ä»£å™¨è‡ªå·±çš„ remove()æ–¹æ³•
>
> ```java
> //ç”¨whileå¾ªç¯æ”¹è¿›å…ƒç´ çš„åˆ¤æ–­å’Œè·å–
> while (it.hasNext()) {
>   String s = it.next();
>    if("b".equals(s)){
>      //æŒ‡å‘è°,é‚£ä¹ˆæ­¤æ—¶å°±åˆ é™¤è°.
>      it.remove();
>    }
>   System.out.println(s);
> }
> ```

#### 9.2.2 å¢å¼º for

```java
ArrayList<String> list =  new ArrayList<>();
list.add("a");
list.add("b");
list.add("c");
list.add("d");
list.add("e");
list.add("f");

for(String str : list){
  System.out.println(str);
}
```

#### 9.2.3  lambdaè¡¨è¾¾å¼

```java
Collection<String> coll = new ArrayList<>();

coll.add("zhangsan");
coll.add("lisi");
coll.add("wangwu");

coll.forEach(new Consumer<String>() {
  @Override
  public void accept(String s) {
    System.out.println(s);
  }
});

//lambdaè¡¨è¾¾å¼
coll.forEach(s -> System.out.println(s));
```

### 9.3 Listé›†åˆ



Listé›†åˆçš„ç‰¹ç‚¹

- å­˜å–æœ‰åº

- å¯ä»¥é‡å¤

- æœ‰ç´¢å¼•

- ArrayListé›†åˆ

  â€‹	åº•å±‚æ˜¯æ•°ç»„ç»“æ„å®ç°ï¼ŒæŸ¥è¯¢å¿«ã€å¢åˆ æ…¢

- LinkedListé›†åˆ

  â€‹	åº•å±‚æ˜¯é“¾è¡¨ç»“æ„å®ç°ï¼ŒæŸ¥è¯¢æ…¢ã€å¢åˆ å¿«

æ–°å¢çš„æ–¹æ³•:

å› ä¸ºæœ‰åºçš„åŸå› ,æ‰€ä»¥ List å¯ä»¥æŒ‡å®š Indexç´¢å¼•å¢åˆ æ”¹æŸ¥



| æ–¹æ³•å                          | æè¿°                                   |
| ------------------------------- | -------------------------------------- |
| void add(int index,E   element) | åœ¨æ­¤é›†åˆä¸­çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„å…ƒç´      |
| E remove(int   index)           | åˆ é™¤æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ ï¼Œè¿”å›è¢«åˆ é™¤çš„å…ƒç´  |
| E set(int index,E   element)    | ä¿®æ”¹æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ ï¼Œè¿”å›è¢«ä¿®æ”¹çš„å…ƒç´  |
| E get(int   index)              | è¿”å›æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´                    |

1. è¿­ä»£å™¨
2. å¢å¼ºfor
3. Lambdaè¡¨è¾¾å¼
4. æ™®é€šforå¾ªç¯

```java
for (int i = 0; i < list.size(); i++) {
  //i:ä¾æ¬¡è¡¨ç¤ºé›†åˆä¸­çš„æ¯ä¸€ä¸ªç´¢å¼•
  String s = list.get(i);
  System.out.println(s);
}
```

5. åˆ—è¡¨è¿­ä»£å™¨

```java
// ä½¿ç”¨çš„æ–¹æ³•åŸºæœ¬ä¸Šå’Œè¿­ä»£å™¨ç›¸åŒiterator
ListIterator<String> it = list.listIterator();
while(it.hasNext()){
    String str = it.next();
    if("bbb".equals(str)){
        //qqq
        it.add("qqq");
    }
}
```

### 9.4 LinkedListé›†åˆçš„ç‰¹æœ‰åŠŸèƒ½

> Link ä½¿ç”¨çš„æ˜¯é“¾è¡¨ç»“æ„



| æ–¹æ³•å                    | è¯´æ˜                             |
| ------------------------- | -------------------------------- |
| public void addFirst(E e) | åœ¨è¯¥åˆ—è¡¨å¼€å¤´æ’å…¥æŒ‡å®šçš„å…ƒç´        |
| public void addLast(E e)  | å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾   |
| public E getFirst()       | è¿”å›æ­¤åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´          |
| public   E getLast()      | è¿”å›æ­¤åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´        |
| public E removeFirst()    | ä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´    |
| public   E removeLast()   | ä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªå…ƒç´  |

### 9.5 Seté›†åˆ

#### 9.5.1 ç‰¹ç‚¹

+ ä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ 
+ æ²¡æœ‰ç´¢å¼•,ä¸èƒ½ä½¿ç”¨æ™®é€šforå¾ªç¯éå†

### 9.6 TreeSeté›†åˆ

#### 9.6.1 ç‰¹ç‚¹

> åº•å±‚æ˜¯çº¢é»‘æ ‘

+ ä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ 
+ æ²¡æœ‰ç´¢å¼•
+ å¯ä»¥å°†å…ƒç´ æŒ‰ç…§è§„åˆ™è¿›è¡Œæ’åº
  + TreeSet()ï¼šæ ¹æ®å…¶å…ƒç´ çš„è‡ªç„¶æ’åºè¿›è¡Œæ’åº
  + TreeSet(Comparator comparator) ï¼šæ ¹æ®æŒ‡å®šçš„æ¯”è¾ƒå™¨è¿›è¡Œæ’åº

#### 9.6.2 æ’åº

> å¦‚æœæƒ³è¦ä¿®æ”¹ TreeSet ä¸­çš„æ’åºæ–¹æ³•,éœ€è¦Comparable

æ–¹æ³•ä¸€:

1. å¯¹è±¡éœ€è¦ implements Comparable
2. Override compareTo

æ–¹æ³•äºŒ:

åœ¨å£°æ˜çš„æ—¶å€™é‡å†™ Comparator

> Demo

```java
TreeSet<Teacher> ts = new TreeSet<>(new Comparator<Teacher>() {
  @Override
  public int compare(Teacher o1, Teacher o2) {
    //o1è¡¨ç¤ºç°åœ¨è¦å­˜å…¥çš„é‚£ä¸ªå…ƒç´ 
    //o2è¡¨ç¤ºå·²ç»å­˜å…¥åˆ°é›†åˆä¸­çš„å…ƒç´ 

    //ä¸»è¦æ¡ä»¶
    int result = o1.getAge() - o2.getAge();
    //æ¬¡è¦æ¡ä»¶
    result = result == 0 ? o1.getName().compareTo(o2.getName()) : result;
    return result;
  }
});
```

### 9.7 HashSeté›†åˆ

#### 9.7.1 ç‰¹ç‚¹

- åº•å±‚æ•°æ®ç»“æ„æ˜¯å“ˆå¸Œè¡¨
- å­˜å–æ— åº
- ä¸å¯ä»¥å­˜å‚¨é‡å¤å…ƒç´ 
- æ²¡æœ‰ç´¢å¼•,ä¸èƒ½ä½¿ç”¨æ™®é€šforå¾ªç¯éå†

### 9.8 Mapé›†åˆ

#### 9.8.1 ç‰¹ç‚¹

- åŒåˆ—é›†åˆ,ä¸€ä¸ªé”®å¯¹åº”ä¸€ä¸ªå€¼
- é”®ä¸å¯ä»¥é‡å¤,å€¼å¯ä»¥é‡å¤



| æ–¹æ³•å                                | è¯´æ˜                                 |
| ------------------------------------- | ------------------------------------ |
| `V   put(K key,V   value)    `        | æ·»åŠ å…ƒç´                              |
| `V   remove(Object key) `             | æ ¹æ®é”®åˆ é™¤é”®å€¼å¯¹å…ƒç´                  |
| `void   clear()   `                   | ç§»é™¤æ‰€æœ‰çš„é”®å€¼å¯¹å…ƒç´                  |
| `boolean containsKey(Object key)    ` | åˆ¤æ–­é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šçš„é”®             |
| `boolean containsValue(Object value)` | åˆ¤æ–­é›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šçš„å€¼             |
| `boolean isEmpty()         `          | åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º                     |
| `int size()    `                      | é›†åˆçš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯é›†åˆä¸­é”®å€¼å¯¹çš„ä¸ªæ•° |

#### 9.8.2 Mapé›†åˆçš„è·å–åŠŸèƒ½

| æ–¹æ³•å                             | è¯´æ˜                     |
| ---------------------------------- | ------------------------ |
| ` V   get(Object key) `            | æ ¹æ®é”®è·å–å€¼             |
| `Set<K>   keySet()`                | è·å–æ‰€æœ‰é”®çš„é›†åˆ         |
| `Collection<V>   values() `        | è·å–æ‰€æœ‰å€¼çš„é›†åˆ         |
| `Set<Map.Entry<K,V>>   entrySet()` | è·å–æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ |

#### 9.8.3 éå†

##### KeySet()

```java
Map<String,String> hp = new HashMap<>();
hp.put("12312","123");
hp.put("1213122312","123");
hp.put("123123412","123");

Set<String> strings = hp.keySet();
for (String string : strings) {
  System.out.println( hp.get(string));
}
```

##### entrySet()

```java
//åˆ›å»ºé›†åˆå¯¹è±¡
Map<String, String> map = new HashMap<String, String>();

//æ·»åŠ å…ƒç´ 
map.put("å¼ æ— å¿Œ", "èµµæ•");
map.put("éƒ­é–", "é»„è“‰");
map.put("æ¨è¿‡", "å°é¾™å¥³");

//è·å–æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆ
Set<Map.Entry<String, String>> entrySet = map.entrySet();
//éå†é”®å€¼å¯¹å¯¹è±¡çš„é›†åˆï¼Œå¾—åˆ°æ¯ä¸€ä¸ªé”®å€¼å¯¹å¯¹è±¡
for (Map.Entry<String, String> me : entrySet) {
  //æ ¹æ®é”®å€¼å¯¹å¯¹è±¡è·å–é”®å’Œå€¼
  String key = me.getKey();
  String value = me.getValue();
  System.out.println(key + "," + value);
}
```

### 9.9 HashMap

#### ç‰¹ç‚¹

+ HashMapåº•å±‚æ˜¯å“ˆå¸Œè¡¨ç»“æ„çš„
+ ä¾èµ–hashCodeæ–¹æ³•å’Œequalsæ–¹æ³•ä¿è¯é”®çš„å”¯ä¸€
+ å¦‚æœé”®è¦å­˜å‚¨çš„æ˜¯è‡ªå®šä¹‰å¯¹è±¡ï¼Œéœ€è¦é‡å†™hashCodeå’Œequalsæ–¹æ³•

### 9.10 TreeMap

+ TreeMapåº•å±‚æ˜¯çº¢é»‘æ ‘ç»“æ„
+ ä¾èµ–è‡ªç„¶æ’åºæˆ–è€…æ¯”è¾ƒå™¨æ’åº,å¯¹é”®è¿›è¡Œæ’åº
+ å¦‚æœé”®å­˜å‚¨çš„æ˜¯è‡ªå®šä¹‰å¯¹è±¡,éœ€è¦å®ç°Comparableæ¥å£æˆ–è€…åœ¨åˆ›å»ºTreeMapå¯¹è±¡æ—¶å€™ç»™å‡ºæ¯”è¾ƒå™¨æ’åºè§„åˆ™

#### 9.10.1 æ¯”è¾ƒæ–¹æ³•çš„é‡å†™

```java
public class Student implements Comparable<Student>{
    private String name;
    private int age;

    public Student() {
    }

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return "Student{" +
                "name='" + name + '\'' +
                ", age=" + age +
                '}';
    }

    @Override
    public int compareTo(Student o) {
        //æŒ‰ç…§å¹´é¾„è¿›è¡Œæ’åº
        int result = o.getAge() - this.getAge();
        //æ¬¡è¦æ¡ä»¶ï¼ŒæŒ‰ç…§å§“åæ’åºã€‚
        result = result == 0 ? o.getName().compareTo(this.getName()) : result;
        return result;
    }
}
```

## 10 å¯å˜å‚æ•°

**æ³¨æ„ï¼š**

â€‹	1.ä¸€ä¸ªæ–¹æ³•åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å‚æ•°

â€‹	2.å¦‚æœæ–¹æ³•ä¸­æœ‰å¤šä¸ªå‚æ•°ï¼Œå¯å˜å‚æ•°è¦æ”¾åˆ°æœ€åã€‚

```java
public class ChangeArgs {
  public static void main(String[] args) {
    int sum = getSum(6, 7, 2, 12, 2121);
    System.out.println(sum);
  }

  public static int getSum(int... arr) {
    int sum = 0;
    for (int a : arr) {
      sum += a;
    }
    return sum;
  }
}
```

## 11 Collections

```java
ArrayList<Integer> list = new ArrayList<Integer>();
//åŸæ¥å†™æ³•
//list.add(12);
//list.add(14);
//list.add(15);
//list.add(1000);


//é‡‡ç”¨å·¥å…·ç±» å®Œæˆ å¾€é›†åˆä¸­æ·»åŠ å…ƒç´   
Collections.addAll(list, 5, 222, 1ï¼Œ2);

//æ’åºæ–¹æ³• 
Collections.sort(list);

//æ‰“ä¹±é›†åˆé¡ºåº
Collections.shuffle(list);
```

### 11.1 è‡ªå®šä¹‰ sort

```java
// åˆ›å»ºå››ä¸ªå­¦ç”Ÿå¯¹è±¡ å­˜å‚¨åˆ°é›†åˆä¸­
ArrayList<Student> list = new ArrayList<Student>();

list.add(new Student("rose",18));
list.add(new Student("jack",16));
list.add(new Student("abc",20));
Collections.sort(list, new Comparator<Student>() {
  @Override
  public int compare(Student o1, Student o2) {
    return o1.getAge()-o2.getAge();//ä»¥å­¦ç”Ÿçš„å¹´é¾„å‡åº
  }
});


for (Student student : list) {
  System.out.println(student);
}
```

## 12 ä¸å¯å˜é›†åˆ

```java
//ä¸å¯å˜çš„listé›†åˆ
List<String> list = List.of("å¼ ä¸‰", "æå››", "ç‹äº”", "èµµå…­");

//ä¸å¯å˜çš„Seté›†åˆ
Set<String> set = Set.of("å¼ ä¸‰", "å¼ ä¸‰", "æå››", "ç‹äº”", "èµµå…­");

//ä¸å¯å˜çš„Mapé›†åˆ
//é”®å€¼å¯¹ä¸ªæ•°å°äºç­‰äº10
  Map<String, String> map = Map.of("å¼ ä¸‰", "å—äº¬", "å¼ ä¸‰", "åŒ—äº¬", "ç‹äº”", "ä¸Šæµ·", "èµµå…­", "å¹¿å·", "å­™ä¸ƒ", "æ·±åœ³", "å‘¨å…«", "æ­å·","å´ä¹", "å®æ³¢", "éƒ‘å", "è‹å·", "åˆ˜ä¸€", "æ— é”¡", "é™ˆäºŒ", "å˜‰å…´");

//é”®å€¼å¯¹ä¸ªæ•°å¤§äº10

HashMap<String, String> hm = new HashMap<>();
hm.put("å¼ ä¸‰", "å—äº¬");
hm.put("æå››", "åŒ—äº¬");
hm.put("ç‹äº”", "ä¸Šæµ·");
hm.put("èµµå…­", "åŒ—äº¬");
hm.put("å­™ä¸ƒ", "æ·±åœ³");
hm.put("å‘¨å…«", "æ­å·");
hm.put("å´ä¹", "å®æ³¢");
hm.put("éƒ‘å", "è‹å·");
hm.put("åˆ˜ä¸€", "æ— é”¡");
hm.put("é™ˆäºŒ", "å˜‰å…´");
hm.put("aaa", "111");

æ–¹æ³•ä¸€:
//è·å–åˆ°æ‰€æœ‰çš„é”®å€¼å¯¹å¯¹è±¡ï¼ˆEntryå¯¹è±¡ï¼‰
Set<Map.Entry<String, String>> entries = hm.entrySet();
//æŠŠentrieså˜æˆä¸€ä¸ªæ•°ç»„
Map.Entry[] arr1 = new Map.Entry[0];
//toArrayæ–¹æ³•åœ¨åº•å±‚ä¼šæ¯”è¾ƒé›†åˆçš„é•¿åº¦è·Ÿæ•°ç»„çš„é•¿åº¦ä¸¤è€…çš„å¤§å°
//å¦‚æœé›†åˆçš„é•¿åº¦ > æ•°ç»„çš„é•¿åº¦ ï¼šæ•°æ®åœ¨æ•°ç»„ä¸­æ”¾ä¸ä¸‹ï¼Œæ­¤æ—¶ä¼šæ ¹æ®å®é™…æ•°æ®çš„ä¸ªæ•°ï¼Œé‡æ–°åˆ›å»ºæ•°ç»„
//å¦‚æœé›†åˆçš„é•¿åº¦ <= æ•°ç»„çš„é•¿åº¦ï¼šæ•°æ®åœ¨æ•°ç»„ä¸­æ”¾çš„ä¸‹ï¼Œæ­¤æ—¶ä¸ä¼šåˆ›å»ºæ–°çš„æ•°ç»„ï¼Œè€Œæ˜¯ç›´æ¥ç”¨
Map.Entry[] arr2 = entries.toArray(arr1);
//ä¸å¯å˜çš„mapé›†åˆ
Map map = Map.ofEntries(arr2);
map.put("bbb","222");

æ–¹æ³•äºŒ:
Map<String, String> map = Map.copyOf(hm);
map.put("bbb","222");	
```

## 13 Streamæµ

Streamæµçš„ä¸‰ç±»æ–¹æ³•

- è·å–Streamæµ
  - åˆ›å»ºä¸€æ¡æµæ°´çº¿,å¹¶æŠŠæ•°æ®æ”¾åˆ°æµæ°´çº¿ä¸Šå‡†å¤‡è¿›è¡Œæ“ä½œ
- ä¸­é—´æ–¹æ³•
  - æµæ°´çº¿ä¸Šçš„æ“ä½œ
  - ä¸€æ¬¡æ“ä½œå®Œæ¯•ä¹‹å,è¿˜å¯ä»¥ç»§ç»­è¿›è¡Œå…¶ä»–æ“ä½œ
- ç»ˆç»“æ–¹æ³•
  - ä¸€ä¸ªStreamæµåªèƒ½æœ‰ä¸€ä¸ªç»ˆç»“æ–¹æ³•
  - æ˜¯æµæ°´çº¿ä¸Šçš„æœ€åä¸€ä¸ªæ“ä½œ



ç”ŸæˆStreamæµçš„æ–¹å¼

- Collectionä½“ç³»é›†åˆ

  `ä½¿ç”¨é»˜è®¤æ–¹æ³•stream()ç”Ÿæˆæµï¼Œ default Stream<E> stream()`

- Mapä½“ç³»é›†åˆ

  æŠŠMapè½¬æˆSeté›†åˆï¼Œé—´æ¥çš„ç”Ÿæˆæµ

- æ•°ç»„

  é€šè¿‡Arraysä¸­çš„é™æ€æ–¹æ³•streamç”Ÿæˆæµ

- åŒç§æ•°æ®ç±»å‹çš„å¤šä¸ªæ•°æ®

  `é€šè¿‡Streamæ¥å£çš„é™æ€æ–¹æ³•of(T... values)ç”Ÿæˆæµ`



> Collectionä½“ç³»çš„é›†åˆå¯ä»¥ä½¿ç”¨é»˜è®¤æ–¹æ³•stream()ç”Ÿæˆæµ

```java
List<String> list = new ArrayList<String>();
Stream<String> listStream = list.stream();

Set<String> set = new HashSet<String>();
Stream<String> setStream = set.stream();
```



> Mapä½“ç³»çš„é›†åˆé—´æ¥çš„ç”Ÿæˆæµ

```java
Map<String,Integer> map = new HashMap<String, Integer>();
Stream<String> keyStream = map.keySet().stream();
Stream<Integer> valueStream = map.values().stream();
Stream<Map.Entry<String, Integer>> entryStream = map.entrySet().stream();
```

> æ•°ç»„å¯ä»¥é€šè¿‡Arraysä¸­çš„é™æ€æ–¹æ³•streamç”Ÿæˆæµ

```java
String[] strArray = {"hello","world","java"};
Stream<String> strArrayStream = Arrays.stream(strArray);
```

> åŒç§æ•°æ®ç±»å‹çš„å¤šä¸ªæ•°æ®å¯ä»¥é€šè¿‡Streamæ¥å£çš„é™æ€æ–¹æ³•of(T... values)ç”Ÿæˆæµ

```java
Stream<String> strArrayStream2 = Stream.of("hello", "world", "java");
Stream<Integer> intStream = Stream.of(10, 20, 30);
```

### 13.1 Streamæµä¸­é—´æ“ä½œæ–¹æ³•



| æ–¹æ³•å                                              | è¯´æ˜                                                       |
| --------------------------------------------------- | ---------------------------------------------------------- |
| ` Stream<T> filter(Predicate predicate)   `         | ç”¨äºå¯¹æµä¸­çš„æ•°æ®è¿›è¡Œè¿‡æ»¤                                   |
| ` Stream<T> limit(long maxSize)     `               | è¿”å›æ­¤æµä¸­çš„å…ƒç´ ç»„æˆçš„æµï¼Œæˆªå–å‰æŒ‡å®šå‚æ•°ä¸ªæ•°çš„æ•°æ®         |
| `Stream<T> skip(long n)   `                         | è·³è¿‡æŒ‡å®šå‚æ•°ä¸ªæ•°çš„æ•°æ®ï¼Œè¿”å›ç”±è¯¥æµçš„å‰©ä½™å…ƒç´ ç»„æˆçš„æµ       |
| ` static <T> Stream<T> concat(Stream a, Stream b) ` | åˆå¹¶aå’Œbä¸¤ä¸ªæµä¸ºä¸€ä¸ªæµ                                     |
| `Stream<T> distinct()    `                          | è¿”å›ç”±è¯¥æµçš„ä¸åŒå…ƒç´ ï¼ˆæ ¹æ®Object.equals(Object) ï¼‰ç»„æˆçš„æµ |

> distinct()æ–¹æ³•çš„ä½œç”¨å¯ä»¥ç†è§£ä¸ºå»é‡

### 13.2 Streamæµç»ˆç»“æ“ä½œæ–¹æ³•

| æ–¹æ³•å                           | è¯´æ˜                     |
| -------------------------------- | ------------------------ |
| `void forEach(Consumer action) ` | å¯¹æ­¤æµçš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œ |
| `long count() `                  | è¿”å›æ­¤æµä¸­çš„å…ƒç´ æ•°       |

### 13.3 Streamæµçš„æ”¶é›†æ“ä½œ

- å¸¸ç”¨æ–¹æ³•

  | æ–¹æ³•å                           | è¯´æ˜               |
  | -------------------------------- | ------------------ |
  | `R collect(Collector collector)` | æŠŠç»“æœæ”¶é›†åˆ°é›†åˆä¸­ |

- å·¥å…·ç±»Collectorsæä¾›äº†å…·ä½“çš„æ”¶é›†æ–¹å¼

  | æ–¹æ³•å                                                       | è¯´æ˜                   |
  | ------------------------------------------------------------ | ---------------------- |
  | `public static <T> Collector toList() `                      | æŠŠå…ƒç´ æ”¶é›†åˆ°Listé›†åˆä¸­ |
  | ` public static <T> Collector toSet()  `                     | æŠŠå…ƒç´ æ”¶é›†åˆ°Seté›†åˆä¸­  |
  | `public static  Collector toMap(Function keyMapper,Function valueMapper) ` | æŠŠå…ƒç´ æ”¶é›†åˆ°Mapé›†åˆä¸­  |

> toList() toSet()

```java
//filterè´Ÿè´£è¿‡æ»¤æ•°æ®çš„.
//collectè´Ÿè´£æ”¶é›†æ•°æ®.
//è·å–æµä¸­å‰©ä½™çš„æ•°æ®,ä½†æ˜¯ä»–ä¸è´Ÿè´£åˆ›å»ºå®¹å™¨,ä¹Ÿä¸è´Ÿè´£æŠŠæ•°æ®æ·»åŠ åˆ°å®¹å™¨ä¸­.
//Collectors.toList() : åœ¨åº•å±‚ä¼šåˆ›å»ºä¸€ä¸ªListé›†åˆ.å¹¶æŠŠæ‰€æœ‰çš„æ•°æ®æ·»åŠ åˆ°Listé›†åˆä¸­.
List<Integer> list = list1.stream().filter(number -> number % 2 == 0)
  .collect(Collectors.toList());

System.out.println(list);

Set<Integer> set = list1.stream().filter(number -> number % 2 == 0)
  .collect(Collectors.toSet());
System.out.println(set);
```

> toMap()

```java
ArrayList<String> list = new ArrayList<>();
list.add("zhangsan,23");
list.add("lisi,24");
list.add("wangwu,25");

Map<String, Integer> map = list.stream().filter(
  s -> {
    String[] split = s.split(",");
    int age = Integer.parseInt(split[1]);
    return age >= 24;
  }

  //   collectæ–¹æ³•åªèƒ½è·å–åˆ°æµä¸­å‰©ä½™çš„æ¯ä¸€ä¸ªæ•°æ®.
  //åœ¨åº•å±‚ä¸èƒ½åˆ›å»ºå®¹å™¨,ä¹Ÿä¸èƒ½æŠŠæ•°æ®æ·»åŠ åˆ°å®¹å™¨å½“ä¸­

  //Collectors.toMap åˆ›å»ºä¸€ä¸ªmapé›†åˆå¹¶å°†æ•°æ®æ·»åŠ åˆ°é›†åˆå½“ä¸­

  // s ä¾æ¬¡è¡¨ç¤ºæµä¸­çš„æ¯ä¸€ä¸ªæ•°æ®

  //ç¬¬ä¸€ä¸ªlambdaè¡¨è¾¾å¼å°±æ˜¯å¦‚ä½•è·å–åˆ°Mapä¸­çš„é”®
  //ç¬¬äºŒä¸ªlambdaè¡¨è¾¾å¼å°±æ˜¯å¦‚ä½•è·å–Mapä¸­çš„å€¼
).collect(Collectors.toMap(
  s -> s.split(",")[0],
  s -> Integer.parseInt(s.split(",")[1])));

System.out.println(map);
```

## 14 I/O

| **InputStream**         | OutputStream                |
| ----------------------- | --------------------------- |
| **Reader**              | **Writer**                  |
|                         |                             |
| **FileInputStream**     | **FileOutputStream**        |
| **FileReader**          | **FileWriter**              |
|                         |                             |
| **BufferedInputStream** | **`BufferedOutputStream` ** |
| **BufferedReader**      | **BufferedWriter**          |
|                         |                             |
| **InputStreamReader**   | **OutputStreamWriter**      |
|                         |                             |
| **ObjectInputStream**   | **ObjectOutputStream**      |
|                         |                             |
|                         | **PrintStream**             |
|                         |                             |
| **ZipInputStream**      | **ZipOutputStream**         |
|                         |                             |



### 14.1 é¡¶çº§çˆ¶ç±»ä»¬

|            |           **è¾“å…¥æµ**            |              è¾“å‡ºæµ              |
| :--------: | :-----------------------------: | :------------------------------: |
| **å­—èŠ‚æµ** | å­—èŠ‚è¾“å…¥æµ<br />**InputStream** | å­—èŠ‚è¾“å‡ºæµ<br />**OutputStream** |
| **å­—ç¬¦æµ** |   å­—ç¬¦è¾“å…¥æµ<br />**Reader**    |    å­—ç¬¦è¾“å‡ºæµ<br />**Writer**    |

### 14.2 å­—èŠ‚è¾“å‡ºæµã€OutputStreamã€‘



* `public void close()` ï¼šå…³é—­æ­¤è¾“å‡ºæµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚  
* `public void flush() ` ï¼šåˆ·æ–°æ­¤è¾“å‡ºæµå¹¶å¼ºåˆ¶ä»»ä½•ç¼“å†²çš„è¾“å‡ºå­—èŠ‚è¢«å†™å‡ºã€‚  
* `public void write(byte[] b)`ï¼šå°† b.lengthå­—èŠ‚ä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å†™å…¥æ­¤è¾“å‡ºæµã€‚  
* `public void write(byte[] b, int off, int len)` ï¼šä»æŒ‡å®šçš„å­—èŠ‚æ•°ç»„å†™å…¥ lenå­—èŠ‚ï¼Œä»åç§»é‡ offå¼€å§‹è¾“å‡ºåˆ°æ­¤è¾“å‡ºæµã€‚  
* `public abstract void write(int b)` ï¼šå°†æŒ‡å®šçš„å­—èŠ‚è¾“å‡ºæµã€‚

> å°è´´å£«ï¼š
>
> closeæ–¹æ³•ï¼Œå½“å®Œæˆæµçš„æ“ä½œæ—¶ï¼Œå¿…é¡»è°ƒç”¨æ­¤æ–¹æ³•ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚

### 14.3 FileOutputStreamç±»

```java
// ä½¿ç”¨Fileå¯¹è±¡åˆ›å»ºæµå¯¹è±¡
File file = new File("a.txt");
FileOutputStream fos = new FileOutputStream(file);

// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
FileOutputStream fos = new FileOutputStream("b.txt");

// å†™å‡ºæ•°æ®
fos.write(97); // å†™å‡ºç¬¬1ä¸ªå­—èŠ‚
fos.write(98); // å†™å‡ºç¬¬2ä¸ªå­—èŠ‚
fos.write(99); // å†™å‡ºç¬¬3ä¸ªå­—èŠ‚
fos.write("sadasd".getBytes());
fos.write(b,2,2); // å†™å‡ºæŒ‡å®šé•¿åº¦å­—èŠ‚æ•°ç»„write(byte[] b, int off, int len) ,
// å…³é—­èµ„æº
fos.close();
```

æ•°æ®è¿½åŠ ç»­å†™

```java
// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
FileOutputStream fos = new FileOutputStream("fos.txt"ï¼Œtrue);     
```

* å›è½¦ç¬¦`\r`å’Œæ¢è¡Œç¬¦`\n` ï¼š
  * å›è½¦ç¬¦ï¼šå›åˆ°ä¸€è¡Œçš„å¼€å¤´ï¼ˆreturnï¼‰ã€‚
  * æ¢è¡Œç¬¦ï¼šä¸‹ä¸€è¡Œï¼ˆnewlineï¼‰ã€‚
* ç³»ç»Ÿä¸­çš„æ¢è¡Œï¼š
  * Windowsç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾æ˜¯ `å›è½¦+æ¢è¡Œ` ï¼Œå³`\r\n`ï¼›
  * Unixç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾åªæœ‰ `æ¢è¡Œ` ï¼Œå³`\n`ï¼›
  * Macç³»ç»Ÿé‡Œï¼Œæ¯è¡Œç»“å°¾æ˜¯ `å›è½¦` ï¼Œå³`\r`ã€‚ä» Mac OS Xå¼€å§‹ä¸Linuxç»Ÿä¸€ã€‚

### 14.4 å­—èŠ‚è¾“å…¥æµã€InputStreamã€‘

- `public void close()` ï¼šå…³é—­æ­¤è¾“å…¥æµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚    
- `public abstract int read()`ï¼š ä»è¾“å…¥æµè¯»å–æ•°æ®çš„ä¸‹ä¸€ä¸ªå­—èŠ‚ã€‚ 
- `public int read(byte[] b)`ï¼š ä»è¾“å…¥æµä¸­è¯»å–ä¸€äº›å­—èŠ‚æ•°ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åˆ°å­—èŠ‚æ•°ç»„ bä¸­ ã€‚

### 14.5 FileInputStreamç±»

```java
// ä½¿ç”¨Fileå¯¹è±¡åˆ›å»ºæµå¯¹è±¡
File file = new File("a.txt");
FileInputStream fos = new FileInputStream(file);

// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
FileInputStream fos = new FileInputStream("b.txt");
```

#### è¯»å–

```java
// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
FileInputStream fis = new FileInputStream("read.txt");
// è¯»å–æ•°æ®ï¼Œè¿”å›ä¸€ä¸ªå­—èŠ‚
int read = fis.read();
System.out.println((char) read);
read = fis.read();
System.out.println((char) read);
read = fis.read();
System.out.println((char) read);
read = fis.read();
System.out.println((char) read);
read = fis.read();
System.out.println((char) read);
// è¯»å–åˆ°æœ«å°¾,è¿”å›-1
read = fis.read();
System.out.println( read);



// å¾ªç¯è¯»å–
while ((b = fis.read())!=-1) {
  System.out.println((char)b);
}


// å…³é—­èµ„æº
fis.close();


//æ•°ç»„è¯»å–

// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡.
FileInputStream fis = new FileInputStream("read.txt"); // æ–‡ä»¶ä¸­ä¸ºabcde
// å®šä¹‰å˜é‡ï¼Œä½œä¸ºæœ‰æ•ˆä¸ªæ•°
int len ï¼›
// å®šä¹‰å­—èŠ‚æ•°ç»„ï¼Œä½œä¸ºè£…å­—èŠ‚æ•°æ®çš„å®¹å™¨   
byte[] b = new byte[2];
// å¾ªç¯è¯»å–
while (( len= fis.read(b))!=-1) {
  // æ¯æ¬¡è¯»å–å,æŠŠæ•°ç»„å˜æˆå­—ç¬¦ä¸²æ‰“å°
  System.out.println(new String(b));
  
  System.out.println(new String(bï¼Œ0ï¼Œlen));//  len æ¯æ¬¡è¯»å–çš„æœ‰æ•ˆå­—èŠ‚ä¸ªæ•°
}
// å…³é—­èµ„æº
fis.close();
```

### 14.5 å›¾ç‰‡å¤åˆ¶

```java
public class Copy {
  public static void main(String[] args) throws IOException {
    // 1.åˆ›å»ºæµå¯¹è±¡
    // 1.1 æŒ‡å®šæ•°æ®æº
    FileInputStream fis = new FileInputStream("D:\\test.jpg");
    // 1.2 æŒ‡å®šç›®çš„åœ°
    FileOutputStream fos = new FileOutputStream("test_copy.jpg");

    // 2.è¯»å†™æ•°æ®
    // 2.1 å®šä¹‰æ•°ç»„
    byte[] b = new byte[1024];
    // 2.2 å®šä¹‰é•¿åº¦
    int len;
    // 2.3 å¾ªç¯è¯»å–
    while ((len = fis.read(b))!=-1) {
      // 2.4 å†™å‡ºæ•°æ®
      fos.write(b, 0 , len);
    }

    // 3.å…³é—­èµ„æº
    fos.close();
    fis.close();
  }
}
```

> æµçš„å…³é—­åŸåˆ™ï¼šå…ˆå¼€åå…³ï¼Œåå¼€å…ˆå…³ã€‚

### 14.6 å­—ç¬¦æµ

å½“ä½¿ç”¨å­—èŠ‚æµè¯»å–æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ªå°é—®é¢˜ã€‚å°±æ˜¯é‡åˆ°ä¸­æ–‡å­—ç¬¦æ—¶ï¼Œå¯èƒ½ä¸ä¼šæ˜¾ç¤ºå®Œæ•´çš„å­—ç¬¦ï¼Œé‚£æ˜¯å› ä¸ºä¸€ä¸ªä¸­æ–‡å­—ç¬¦å¯èƒ½å ç”¨å¤šä¸ªå­—èŠ‚å­˜å‚¨ã€‚æ‰€ä»¥Javaæä¾›ä¸€äº›å­—ç¬¦æµç±»ï¼Œä»¥å­—ç¬¦ä¸ºå•ä½è¯»å†™æ•°æ®ï¼Œä¸“é—¨ç”¨äºå¤„ç†æ–‡æœ¬æ–‡ä»¶ã€‚

### 14.7 å­—ç¬¦è¾“å…¥æµã€Readerã€‘

- `public void close()` ï¼šå…³é—­æ­¤æµå¹¶é‡Šæ”¾ä¸æ­¤æµç›¸å…³è”çš„ä»»ä½•ç³»ç»Ÿèµ„æºã€‚    
- `public int read()`ï¼š ä»è¾“å…¥æµè¯»å–ä¸€ä¸ªå­—ç¬¦ã€‚ 
- `public int read(char[] cbuf)`ï¼š ä»è¾“å…¥æµä¸­è¯»å–ä¸€äº›å­—ç¬¦ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åˆ°å­—ç¬¦æ•°ç»„ cbufä¸­ ã€‚

### 14.8  FileReaderç±»  

```java
// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
FileReader fr = new FileReader("read.txt");
// å®šä¹‰å˜é‡ï¼Œä¿å­˜æ•°æ®
int b ï¼›
  // å¾ªç¯è¯»å–
  while ((b = fr.read())!=-1) {
    System.out.println((char)b);
  }
// å…³é—­èµ„æº
fr.close();


//æ•°ç»„è¯»å–
// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
FileReader fr = new FileReader("read.txt");
// å®šä¹‰å˜é‡ï¼Œä¿å­˜æœ‰æ•ˆå­—ç¬¦ä¸ªæ•°
int len ï¼›
  // å®šä¹‰å­—ç¬¦æ•°ç»„ï¼Œä½œä¸ºè£…å­—ç¬¦æ•°æ®çš„å®¹å™¨
  char[] cbuf = new char[2];
// å¾ªç¯è¯»å–
while ((len = fr.read(cbuf))!=-1) {
  System.out.println(new String(cbuf,0,len));
}
// å…³é—­èµ„æº
fr.close();
```

### 14.9 å­—ç¬¦è¾“å‡ºæµã€Writerã€‘

- `void write(int c)` å†™å…¥å•ä¸ªå­—ç¬¦ã€‚
- `void write(char[] cbuf) `å†™å…¥å­—ç¬¦æ•°ç»„ã€‚ 
- `abstract  void write(char[] cbuf, int off, int len) `å†™å…¥å­—ç¬¦æ•°ç»„çš„æŸä¸€éƒ¨åˆ†,offæ•°ç»„çš„å¼€å§‹ç´¢å¼•,lenå†™çš„å­—ç¬¦ä¸ªæ•°ã€‚ 
- `void write(String str) `å†™å…¥å­—ç¬¦ä¸²ã€‚ 
- `void write(String str, int off, int len)` å†™å…¥å­—ç¬¦ä¸²çš„æŸä¸€éƒ¨åˆ†,offå­—ç¬¦ä¸²çš„å¼€å§‹ç´¢å¼•,lenå†™çš„å­—ç¬¦ä¸ªæ•°ã€‚
- `void flush() `åˆ·æ–°è¯¥æµçš„ç¼“å†²ã€‚  
- `void close()` å…³é—­æ­¤æµï¼Œä½†è¦å…ˆåˆ·æ–°å®ƒã€‚ 

### 14.10 FileWriterç±»

```java
//åŸºæœ¬çš„æ•°æ®å†™å‡º
// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
FileWriter fw = new FileWriter("fw.txt");     
// å†™å‡ºæ•°æ®
fw.write(97); // å†™å‡ºç¬¬1ä¸ªå­—ç¬¦
fw.write('b'); // å†™å‡ºç¬¬2ä¸ªå­—ç¬¦
fw.write('C'); // å†™å‡ºç¬¬3ä¸ªå­—ç¬¦
fw.write(30000); // å†™å‡ºç¬¬4ä¸ªå­—ç¬¦ï¼Œä¸­æ–‡ç¼–ç è¡¨ä¸­30000å¯¹åº”ä¸€ä¸ªæ±‰å­—ã€‚

/*
        ã€æ³¨æ„ã€‘å…³é—­èµ„æºæ—¶,ä¸FileOutputStreamä¸åŒã€‚
      	 å¦‚æœä¸å…³é—­,æ•°æ®åªæ˜¯ä¿å­˜åˆ°ç¼“å†²åŒºï¼Œå¹¶æœªä¿å­˜åˆ°æ–‡ä»¶ã€‚
        */
fw.close();



//æ•°ç»„å†™å‡º
// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
FileWriter fw = new FileWriter("fw.txt");     
// å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„
char[] chars = "é»‘é©¬ç¨‹åºå‘˜".toCharArray();

// å†™å‡ºå­—ç¬¦æ•°ç»„
fw.write(chars); // é»‘é©¬ç¨‹åºå‘˜

// å†™å‡ºä»ç´¢å¼•2å¼€å§‹ï¼Œ2ä¸ªå­—èŠ‚ã€‚ç´¢å¼•2æ˜¯'ç¨‹'ï¼Œä¸¤ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯'ç¨‹åº'ã€‚
fw.write(b,2,2); // ç¨‹åº

// å…³é—­èµ„æº
fos.close();


//å­—ç¬¦ä¸²å†™å‡º
// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡
FileWriter fw = new FileWriter("fw.txt");     
// å­—ç¬¦ä¸²
String msg = "é»‘é©¬ç¨‹åºå‘˜";

// å†™å‡ºå­—ç¬¦æ•°ç»„
fw.write(msg); //é»‘é©¬ç¨‹åºå‘˜

// å†™å‡ºä»ç´¢å¼•2å¼€å§‹ï¼Œ2ä¸ªå­—èŠ‚ã€‚ç´¢å¼•2æ˜¯'ç¨‹'ï¼Œä¸¤ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯'ç¨‹åº'ã€‚
fw.write(msg,2,2);	// ç¨‹åº

// å…³é—­èµ„æº
fos.close();
```

> ç»­å†™

```java
// ä½¿ç”¨æ–‡ä»¶åç§°åˆ›å»ºæµå¯¹è±¡ï¼Œå¯ä»¥ç»­å†™æ•°æ®
FileWriter fw = new FileWriter("fw.txt"ï¼Œtrue);     
```

> æ–‡ä»¶åŠ å¯†
>
> ä½¿ç”¨å¼‚æˆ–

```java
while ((b = fis.read()) != -1) {
  fos.write(b ^ 2);
}
```

### 14.11 ç¼“å†²æµ

#### å­—èŠ‚æµ

* `public BufferedInputStream(InputStream in)` ï¼šåˆ›å»ºä¸€ä¸ª æ–°çš„ç¼“å†²è¾“å…¥æµã€‚ 
* `public BufferedOutputStream(OutputStream out)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²è¾“å‡ºæµã€‚

#### å­—ç¬¦æµ

* `public BufferedReader(Reader in)` ï¼šåˆ›å»ºä¸€ä¸ª æ–°çš„ç¼“å†²è¾“å…¥æµã€‚ 
* `public BufferedWriter(Writer out)`ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²è¾“å‡ºæµã€‚

ç¼“å†²æµçš„åŸºæœ¬åŸç†ï¼Œæ˜¯åœ¨åˆ›å»ºæµå¯¹è±¡æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå†…ç½®çš„é»˜è®¤å¤§å°çš„ç¼“å†²åŒºæ•°ç»„ï¼Œé€šè¿‡ç¼“å†²åŒºè¯»å†™ï¼Œå‡å°‘ç³»ç»ŸIOæ¬¡æ•°ï¼Œä»è€Œæé«˜è¯»å†™çš„æ•ˆç‡ã€‚

> åˆ›å»º

```java
// åˆ›å»ºå­—èŠ‚ç¼“å†²è¾“å…¥æµ
BufferedInputStream bis = new BufferedInputStream(new FileInputStream("bis.txt"));
// åˆ›å»ºå­—èŠ‚ç¼“å†²è¾“å‡ºæµ
BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream("bos.txt"));
```

> å­—ç¬¦æµ ç‰¹æœ‰æ–¹æ³•
>
> BufferedReaderï¼š`public String readLine()`: è¯»ä¸€è¡Œæ–‡å­—ã€‚ 
>
> BufferedWriterï¼š`public void newLine()`: å†™ä¸€è¡Œè¡Œåˆ†éš”ç¬¦,ç”±ç³»ç»Ÿå±æ€§å®šä¹‰ç¬¦å·ã€‚ 

```java

// åˆ›å»ºæµå¯¹è±¡
BufferedReader br = new BufferedReader(new FileReader("in.txt"));
// å®šä¹‰å­—ç¬¦ä¸²,ä¿å­˜è¯»å–çš„ä¸€è¡Œæ–‡å­—
String line  = null;
// å¾ªç¯è¯»å–,è¯»å–åˆ°æœ€åè¿”å›null
while ((line = br.readLine())!=null) {
  System.out.print(line);
  System.out.println("------");
}
// é‡Šæ”¾èµ„æº
br.close();

```

### 14.12 è½¬æ¢æµ

* `InputStreamReader(InputStream in)`: åˆ›å»ºä¸€ä¸ªä½¿ç”¨é»˜è®¤å­—ç¬¦é›†çš„å­—ç¬¦æµã€‚ 
* `InputStreamReader(InputStream in, String charsetName)`: åˆ›å»ºä¸€ä¸ªæŒ‡å®šå­—ç¬¦é›†çš„å­—ç¬¦æµã€‚

- `OutputStreamWriter(OutputStream in)`: åˆ›å»ºä¸€ä¸ªä½¿ç”¨é»˜è®¤å­—ç¬¦é›†çš„å­—ç¬¦æµã€‚ 
- `OutputStreamWriter(OutputStream in, String charsetName)`: åˆ›å»ºä¸€ä¸ªæŒ‡å®šå­—ç¬¦é›†çš„å­—ç¬¦æµã€‚

> åˆ›å»º

```java
// åˆ›å»ºæµå¯¹è±¡,æŒ‡å®šGBKç¼–ç 
InputStreamReader isr2 = new InputStreamReader(new FileInputStream(FileName) , "GBK");

OutputStreamWriter isr2 = new OutputStreamWriter(new FileOutputStream("out.txt") , "GBK");
```

> Demo

```java

// 1.å®šä¹‰æ–‡ä»¶è·¯å¾„
String srcFile = "file_gbk.txt";
String destFile = "file_utf8.txt";
// 2.åˆ›å»ºæµå¯¹è±¡
// 2.1 è½¬æ¢è¾“å…¥æµ,æŒ‡å®šGBKç¼–ç 
InputStreamReader isr = new InputStreamReader(new FileInputStream(srcFile) , "GBK");
// 2.2 è½¬æ¢è¾“å‡ºæµ,é»˜è®¤utf8ç¼–ç 
OutputStreamWriter osw = new OutputStreamWriter(new FileOutputStream(destFile));
// 3.è¯»å†™æ•°æ®
// 3.1 å®šä¹‰æ•°ç»„
char[] cbuf = new char[1024];
// 3.2 å®šä¹‰é•¿åº¦
int len;
// 3.3 å¾ªç¯è¯»å–
while ((len = isr.read(cbuf))!=-1) {
  // å¾ªç¯å†™å‡º
  osw.write(cbuf,0,len);
}
// 4.é‡Šæ”¾èµ„æº
osw.close();
isr.close();

```

### 14.13 åºåˆ—åŒ–ä¸ååºåˆ—åŒ–

#### åºåˆ—åŒ–-ObjectOutputStream

å°†Javaå¯¹è±¡çš„åŸå§‹æ•°æ®ç±»å‹å†™å‡ºåˆ°æ–‡ä»¶,å®ç°å¯¹è±¡çš„æŒä¹…å­˜å‚¨ã€‚

- `public ObjectOutputStream(OutputStream out) `ï¼š åˆ›å»ºä¸€ä¸ªæŒ‡å®šOutputStreamçš„ObjectOutputStreamã€‚

```java
FileOutputStream fileOut = new FileOutputStream("employee.txt");
ObjectOutputStream out = new ObjectOutputStream(fileOut);
```

å®ç°æ­¥éª¤

* è¯¥ç±»å¿…é¡»å®ç°`java.io.Serializable ` æ¥å£ï¼Œ`Serializable` æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œä¸å®ç°æ­¤æ¥å£çš„ç±»å°†ä¸ä¼šä½¿ä»»ä½•çŠ¶æ€åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–ï¼Œä¼šæŠ›å‡º`NotSerializableException` ã€‚
* è¯¥ç±»çš„æ‰€æœ‰å±æ€§å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ã€‚å¦‚æœæœ‰ä¸€ä¸ªå±æ€§ä¸éœ€è¦å¯åºåˆ—åŒ–çš„ï¼Œåˆ™è¯¥å±æ€§å¿…é¡»æ³¨æ˜æ˜¯ç¬æ€çš„ï¼Œä½¿ç”¨`transient` å…³é”®å­—ä¿®é¥°ã€‚

```java
public class Employee implements java.io.Serializable {
  public String name;
  public String address;
  public transient int age; // transientç¬æ€ä¿®é¥°æˆå‘˜,ä¸ä¼šè¢«åºåˆ—åŒ–
  public void addressCheck() {
    System.out.println("Address  check : " + name + " -- " + address);
  }
}
```

å†™å‡ºå¯¹è±¡æ–¹æ³•

- `public final void writeObject (Object obj)` : å°†æŒ‡å®šçš„å¯¹è±¡å†™å‡ºã€‚

```java
Employee e = new Employee();
e.name = "zhangsan";
e.address = "beiqinglu";
e.age = 20; 
try {
  // åˆ›å»ºåºåˆ—åŒ–æµå¯¹è±¡
  ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("employee.txt"));
  // å†™å‡ºå¯¹è±¡
  out.writeObject(e);
  // é‡Šæ”¾èµ„æº
  out.close();
  fileOut.close();
  System.out.println("Serialized data is saved"); // å§“åï¼Œåœ°å€è¢«åºåˆ—åŒ–ï¼Œå¹´é¾„æ²¡æœ‰è¢«åºåˆ—åŒ–ã€‚
} catch(IOException i)   {
  i.printStackTrace();
}
```

#### ååºåˆ—åŒ–-ObjectInputStreamç±»

ObjectInputStreamååºåˆ—åŒ–æµï¼Œå°†ä¹‹å‰ä½¿ç”¨ObjectOutputStreamåºåˆ—åŒ–çš„åŸå§‹æ•°æ®æ¢å¤ä¸ºå¯¹è±¡ã€‚ 

- `public ObjectInputStream(InputStream in) `ï¼š åˆ›å»ºä¸€ä¸ªæŒ‡å®šInputStreamçš„ObjectInputStreamã€‚

> Demo

```java
Employee e = null;
try {		
  // åˆ›å»ºååºåˆ—åŒ–æµ
  FileInputStream fileIn = new FileInputStream("employee.txt");
  ObjectInputStream in = new ObjectInputStream(fileIn);
  // è¯»å–ä¸€ä¸ªå¯¹è±¡
  e = (Employee) in.readObject();
  // é‡Šæ”¾èµ„æº
  in.close();
  fileIn.close();
}catch(IOException i) {
  // æ•è·å…¶ä»–å¼‚å¸¸
  i.printStackTrace();
  return;
}catch(ClassNotFoundException c)  {
  // æ•è·ç±»æ‰¾ä¸åˆ°å¼‚å¸¸
  System.out.println("Employee class not found");
  c.printStackTrace();
  return;
}
// æ— å¼‚å¸¸,ç›´æ¥æ‰“å°è¾“å‡º
System.out.println("Name: " + e.name);	// zhangsan
System.out.println("Address: " + e.address); // beiqinglu
System.out.println("age: " + e.age); // 0
```

> æ³¨æ„ğŸ“¢:
>
> â€‹	åºåˆ—åŒ–ä¹‹åå¦‚æœä¿®æ”¹äº† class æ–‡ä»¶,åˆ™ååºåˆ—åŒ–å°±ä¼šå¤±è´¥
>
> â€‹	ä½¿ç”¨ç‰ˆæœ¬å·
>
> â€‹	`Serializable` æ¥å£ç»™éœ€è¦åºåˆ—åŒ–çš„ç±»ï¼Œæä¾›äº†ä¸€ä¸ªåºåˆ—ç‰ˆæœ¬å·ã€‚`serialVersionUID` è¯¥ç‰ˆæœ¬å·çš„ç›®çš„åœ¨äºéªŒè¯åºåˆ—åŒ–çš„å¯¹è±¡å’Œå¯¹åº”ç±»æ˜¯å¦ç‰ˆæœ¬åŒ¹é…ã€‚

```java
public class Employee implements java.io.Serializable {
  // åŠ å…¥åºåˆ—ç‰ˆæœ¬å·
  private static final long serialVersionUID = 1L;
  public String name;
  public String address;
  // æ·»åŠ æ–°çš„å±æ€§ ,é‡æ–°ç¼–è¯‘, å¯ä»¥ååºåˆ—åŒ–,è¯¥å±æ€§èµ‹ä¸ºé»˜è®¤å€¼.
  public int eid; 

  public void addressCheck() {
    System.out.println("Address  check : " + name + " -- " + address);
  }
}
```

### 14.14 æ‰“å°æµ

å¹³æ—¶æˆ‘ä»¬åœ¨æ§åˆ¶å°æ‰“å°è¾“å‡ºï¼Œæ˜¯è°ƒç”¨`print`æ–¹æ³•å’Œ`println`æ–¹æ³•å®Œæˆçš„ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥è‡ªäº`java.io.PrintStream`ç±»ï¼Œè¯¥ç±»èƒ½å¤Ÿæ–¹ä¾¿åœ°æ‰“å°å„ç§æ•°æ®ç±»å‹çš„å€¼ï¼Œæ˜¯ä¸€ç§ä¾¿æ·çš„è¾“å‡ºæ–¹å¼ã€‚



- `public PrintStream(String fileName)  `ï¼š ä½¿ç”¨æŒ‡å®šçš„æ–‡ä»¶ååˆ›å»ºä¸€ä¸ªæ–°çš„æ‰“å°æµã€‚

> PrintStream ps = new PrintStream("ps.txt")ï¼›



#### æ”¹å˜æ‰“å°æµå‘

```java
// è°ƒç”¨ç³»ç»Ÿçš„æ‰“å°æµ,æ§åˆ¶å°ç›´æ¥è¾“å‡º97
System.out.println(97);

// åˆ›å»ºæ‰“å°æµ,æŒ‡å®šæ–‡ä»¶çš„åç§°
PrintStream ps = new PrintStream("ps.txt");

// è®¾ç½®ç³»ç»Ÿçš„æ‰“å°æµæµå‘,è¾“å‡ºåˆ°ps.txt
System.setOut(ps);
// è°ƒç”¨ç³»ç»Ÿçš„æ‰“å°æµ,ps.txtä¸­è¾“å‡º97
System.out.println(97);
```

### 14.15 å‹ç¼©æµå’Œè§£å‹ç¼©æµ

- ZipInputStream
  - getNextEntry
  - entry.toString
  - mkdirs
- ZipOutputStream

#### è§£å‹æµ

```java
//1.åˆ›å»ºä¸€ä¸ªFileè¡¨ç¤ºè¦è§£å‹çš„å‹ç¼©åŒ…
File src = new File("D:\\aaa.zip");
//2.åˆ›å»ºä¸€ä¸ªFileè¡¨ç¤ºè§£å‹çš„ç›®çš„åœ°
File dest = new File("D:\\");

//è§£å‹çš„æœ¬è´¨ï¼šæŠŠå‹ç¼©åŒ…é‡Œé¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹è¯»å–å‡ºæ¥ï¼Œ

//åˆ›å»ºä¸€ä¸ªè§£å‹ç¼©æµç”¨æ¥è¯»å–å‹ç¼©åŒ…ä¸­çš„æ•°æ®
ZipInputStream zip = new ZipInputStream(new FileInputStream(src));

//è¦å…ˆè·å–åˆ°å‹ç¼©åŒ…é‡Œé¢çš„æ¯ä¸€ä¸ªzipentryå¯¹è±¡
//è¡¨ç¤ºå½“å‰åœ¨å‹ç¼©åŒ…ä¸­è·å–åˆ°çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹
ZipEntry entry;


while((entry = zip.getNextEntry()) != null){
  System.out.println(entry);
  if(entry.isDirectory()){
    //æ–‡ä»¶å¤¹ï¼šéœ€è¦åœ¨ç›®çš„åœ°destå¤„åˆ›å»ºä¸€ä¸ªåŒæ ·çš„æ–‡ä»¶å¤¹
    File file = new File(dest,entry.toString());
    file.mkdirs();
  }else{
    //æ–‡ä»¶ï¼šéœ€è¦è¯»å–åˆ°å‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶ï¼Œå¹¶æŠŠä»–å­˜æ”¾åˆ°ç›®çš„åœ°destæ–‡ä»¶å¤¹ä¸­ï¼ˆæŒ‰ç…§å±‚çº§ç›®å½•è¿›è¡Œå­˜æ”¾ï¼‰
    FileOutputStream fos = new FileOutputStream(new File(dest,entry.toString()));
    int b;
    while((b = zip.read()) != -1){
      //å†™åˆ°ç›®çš„åœ°
      fos.write(b);
    }
    fos.close();
    //è¡¨ç¤ºåœ¨å‹ç¼©åŒ…ä¸­çš„ä¸€ä¸ªæ–‡ä»¶å¤„ç†å®Œæ¯•äº†ã€‚
    zip.closeEntry();
  }
}
zip.close();
```

#### å‹ç¼©æµ

##### å‹ç¼©æ–‡ä»¶

```java
/*
         *   å‹ç¼©æµ
         *      éœ€æ±‚ï¼š
         *          æŠŠD:\\a.txtæ‰“åŒ…æˆä¸€ä¸ªå‹ç¼©åŒ…
         * */
//1.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºè¦å‹ç¼©çš„æ–‡ä»¶
File src = new File("D:\\a.txt");
//2.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºå‹ç¼©åŒ…çš„ä½ç½®
File dest = new File("D:\\");


//1.åˆ›å»ºå‹ç¼©æµå…³è”å‹ç¼©åŒ…
ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(new File(dest,"a.zip")));
//2.åˆ›å»ºZipEntryå¯¹è±¡ï¼Œè¡¨ç¤ºå‹ç¼©åŒ…é‡Œé¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶å’Œæ–‡ä»¶å¤¹
//å‚æ•°ï¼šå‹ç¼©åŒ…é‡Œé¢çš„è·¯å¾„
ZipEntry entry = new ZipEntry("aaa\\bbb\\a.txt");
//3.æŠŠZipEntryå¯¹è±¡æ”¾åˆ°å‹ç¼©åŒ…å½“ä¸­
zos.putNextEntry(entry);
//4.æŠŠsrcæ–‡ä»¶ä¸­çš„æ•°æ®å†™åˆ°å‹ç¼©åŒ…å½“ä¸­
FileInputStream fis = new FileInputStream(src);
int b;
while((b = fis.read()) != -1){
  zos.write(b);
}
zos.closeEntry();
zos.close();
```

#### å‹ç¼©æ–‡ä»¶å¤¹

è·å–æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶ listFiles

```java
/*
         *   å‹ç¼©æµ
         *      éœ€æ±‚ï¼š
         *          æŠŠD:\\aaaæ–‡ä»¶å¤¹å‹ç¼©æˆä¸€ä¸ªå‹ç¼©åŒ…
         * */
//1.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºè¦å‹ç¼©çš„æ–‡ä»¶å¤¹
File src = new File("D:\\aaa");
//2.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºå‹ç¼©åŒ…æ”¾åœ¨å“ªé‡Œï¼ˆå‹ç¼©åŒ…çš„çˆ¶çº§è·¯å¾„ï¼‰
File destParent = src.getParentFile();//D:\\
//3.åˆ›å»ºFileå¯¹è±¡è¡¨ç¤ºå‹ç¼©åŒ…çš„è·¯å¾„
File dest = new File(destParent,src.getName() + ".zip");
//4.åˆ›å»ºå‹ç¼©æµå…³è”å‹ç¼©åŒ…
ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(dest));
//5.è·å–srcé‡Œé¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå˜æˆZipEntryå¯¹è±¡ï¼Œæ”¾å…¥åˆ°å‹ç¼©åŒ…å½“ä¸­




//1.è¿›å…¥srcæ–‡ä»¶å¤¹
File[] files = src.listFiles();
//2.éå†æ•°ç»„
for (File file : files) {
  if(file.isFile()){
    //3.åˆ¤æ–­-æ–‡ä»¶ï¼Œå˜æˆZipEntryå¯¹è±¡ï¼Œæ”¾å…¥åˆ°å‹ç¼©åŒ…å½“ä¸­
    ZipEntry entry = new ZipEntry(name + "\\" + file.getName());//aaa\\no1\\a.txt
    zos.putNextEntry(entry);
    //è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œå†™åˆ°å‹ç¼©åŒ…
    FileInputStream fis = new FileInputStream(file);
    int b;
    while((b = fis.read()) != -1){
      zos.write(b);
    }
    fis.close();
    zos.closeEntry();
  }else{
    //4.åˆ¤æ–­-æ–‡ä»¶å¤¹ï¼Œé€’å½’
    toZip(file,zos,name + "\\" + file.getName());
    //     no1            aaa   \\   no1
  }
}
}
```

## 15 å¤šçº¿ç¨‹

### 15.1æ–¹å¼ä¸€ç»§æ‰¿Threadç±»

æ–¹æ³•ä»‹ç»

| æ–¹æ³•å          | è¯´æ˜                                        |
| --------------- | ------------------------------------------- |
| `void run() `   | åœ¨çº¿ç¨‹å¼€å¯åï¼Œæ­¤æ–¹æ³•å°†è¢«è°ƒç”¨æ‰§è¡Œ            |
| `void start() ` | ä½¿æ­¤çº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼ŒJavaè™šæ‹Ÿæœºä¼šè°ƒç”¨runæ–¹æ³•() |

- å®ç°æ­¥éª¤

  - å®šä¹‰ä¸€ä¸ªç±»MyThreadç»§æ‰¿Threadç±»
  - `åœ¨MyThreadç±»ä¸­é‡å†™run()æ–¹æ³•`
  - åˆ›å»ºMyThreadç±»çš„å¯¹è±¡
  - å¯åŠ¨çº¿ç¨‹

- ä»£ç 

```java
public class MyThread extends Thread {
    @Override
    public void run() {
        for(int i=0; i<100; i++) {
            System.out.println(i);
        }
    }
}
public class MyThreadDemo {
    public static void main(String[] args) {
        MyThread my1 = new MyThread();
        MyThread my2 = new MyThread();

//        my1.run();
//        my2.run();

        //void start() å¯¼è‡´æ­¤çº¿ç¨‹å¼€å§‹æ‰§è¡Œ; Javaè™šæ‹Ÿæœºè°ƒç”¨æ­¤çº¿ç¨‹çš„runæ–¹æ³•
        my1.start();
        my2.start();
    }
}
```

### 15.2 æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£



| æ–¹æ³•å                                 | è¯´æ˜                   |
| -------------------------------------- | ---------------------- |
| `Thread(Runnable target)  `            | åˆ†é…ä¸€ä¸ªæ–°çš„Threadå¯¹è±¡ |
| `Thread(Runnable target, String name)` | åˆ†é…ä¸€ä¸ªæ–°çš„Threadå¯¹è±¡ |

å®ç°æ­¥éª¤

- å®šä¹‰ä¸€ä¸ªç±»MyRunnableå®ç°Runnableæ¥å£
- åœ¨MyRunnableç±»ä¸­é‡å†™run()æ–¹æ³•
- åˆ›å»ºMyRunnableç±»çš„å¯¹è±¡
- åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠMyRunnableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°
- å¯åŠ¨çº¿ç¨‹

```java
public class MyRunnable implements Runnable {
  @Override
  public void run() {
    for(int i=0; i<100; i++) {
      System.out.println(Thread.currentThread().getName()+":"+i);
    }
  }
}
public class MyRunnableDemo {
  public static void main(String[] args) {
    //åˆ›å»ºMyRunnableç±»çš„å¯¹è±¡
    MyRunnable my = new MyRunnable();

    //åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠMyRunnableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°
    //Thread(Runnable target)
    //        Thread t1 = new Thread(my);
    //        Thread t2 = new Thread(my);
    //Thread(Runnable target, String name)
    Thread t1 = new Thread(my,"å¦å…‹");
    Thread t2 = new Thread(my,"é£æœº");

    //å¯åŠ¨çº¿ç¨‹
    t1.start();
    t2.start();
  }
}
```

### 15.3 å¼ä¸‰: å®ç°Callableæ¥å£

æ–¹æ³•ä»‹ç»

| æ–¹æ³•å                              | è¯´æ˜                                               |
| ----------------------------------- | -------------------------------------------------- |
| `V call()   `                       | è®¡ç®—ç»“æœï¼Œå¦‚æœæ— æ³•è®¡ç®—ç»“æœï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸         |
| `FutureTask(Callable<V> callable) ` | åˆ›å»ºä¸€ä¸ª FutureTaskï¼Œä¸€æ—¦è¿è¡Œå°±æ‰§è¡Œç»™å®šçš„ Callable |
| `V get()                   `        | å¦‚æœ‰å¿…è¦ï¼Œç­‰å¾…è®¡ç®—å®Œæˆï¼Œç„¶åè·å–å…¶ç»“æœ             |

å®ç°æ­¥éª¤

+ å®šä¹‰ä¸€ä¸ªç±»MyCallableå®ç°Callableæ¥å£
+ `åœ¨MyCallableç±»ä¸­é‡å†™call()æ–¹æ³•`
+ åˆ›å»ºMyCallableç±»çš„å¯¹è±¡
+ åˆ›å»ºFutureçš„å®ç°ç±»FutureTaskå¯¹è±¡ï¼ŒæŠŠMyCallableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°
+ åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠFutureTaskå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°
+ å¯åŠ¨çº¿ç¨‹
+ å†è°ƒç”¨getæ–¹æ³•ï¼Œå°±å¯ä»¥è·å–çº¿ç¨‹ç»“æŸä¹‹åçš„ç»“æœã€‚

```java
public class MyCallable implements Callable<String> {
  @Override
  public String call() throws Exception {
    for (int i = 0; i < 100; i++) {
      System.out.println("è·Ÿå¥³å­©è¡¨ç™½" + i);
    }
    //è¿”å›å€¼å°±è¡¨ç¤ºçº¿ç¨‹è¿è¡Œå®Œæ¯•ä¹‹åçš„ç»“æœ
    return "ç­”åº”";
  }
}
public class Demo {
  public static void main(String[] args) throws ExecutionException, InterruptedException {
    //çº¿ç¨‹å¼€å¯ä¹‹åéœ€è¦æ‰§è¡Œé‡Œé¢çš„callæ–¹æ³•
    MyCallable mc = new MyCallable();

    //Thread t1 = new Thread(mc);

    //å¯ä»¥è·å–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åçš„ç»“æœ.ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™Threadå¯¹è±¡
    FutureTask<String> ft = new FutureTask<>(mc);

    //åˆ›å»ºçº¿ç¨‹å¯¹è±¡
    Thread t1 = new Thread(ft);

    String s = ft.get();
    //å¼€å¯çº¿ç¨‹
    t1.start();

    //String s = ft.get();
    System.out.println(s);
  }
}
```

### 15.4ä¸‰ç§æ–¹æ³•çš„æ¯”è¾ƒ

ä¸‰ç§å®ç°æ–¹å¼çš„å¯¹æ¯”

+ å®ç°Runnableã€Callableæ¥å£
  + å¥½å¤„: æ‰©å±•æ€§å¼ºï¼Œå®ç°è¯¥æ¥å£çš„åŒæ—¶è¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–çš„ç±»
  + ç¼ºç‚¹: ç¼–ç¨‹ç›¸å¯¹å¤æ‚ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨Threadç±»ä¸­çš„æ–¹æ³•
+ ç»§æ‰¿Threadç±»
  + å¥½å¤„: ç¼–ç¨‹æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Threadç±»ä¸­çš„æ–¹æ³•
  + ç¼ºç‚¹: å¯ä»¥æ‰©å±•æ€§è¾ƒå·®ï¼Œä¸èƒ½å†ç»§æ‰¿å…¶ä»–çš„ç±»

### 15.6è®¾ç½®å’Œè·å–çº¿ç¨‹åç§°

æ–¹æ³•ä»‹ç»

| æ–¹æ³•å                       | è¯´æ˜                               |
| ---------------------------- | ---------------------------------- |
| `void  setName(String name)` | å°†æ­¤çº¿ç¨‹çš„åç§°æ›´æ”¹ä¸ºç­‰äºå‚æ•°name   |
| `String  getName()   `       | è¿”å›æ­¤çº¿ç¨‹çš„åç§°                   |
| `Thread  currentThread() `   | è¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨ |

```java
public class MyThread extends Thread {
  public MyThread() {}
  public MyThread(String name) {
    super(name);
  }

  @Override
  public void run() {
    for (int i = 0; i < 100; i++) {
      System.out.println(getName()+":"+i);
    }
  }
}
public class MyThreadDemo {
  public static void main(String[] args) {
    MyThread my1 = new MyThread();
    MyThread my2 = new MyThread();

    //void setName(String name)ï¼šå°†æ­¤çº¿ç¨‹çš„åç§°æ›´æ”¹ä¸ºç­‰äºå‚æ•° name
    my1.setName("é«˜é“");
    my2.setName("é£æœº");

    //Thread(String name)
    MyThread my1 = new MyThread("é«˜é“");
    MyThread my2 = new MyThread("é£æœº");

    my1.start();
    my2.start();

    //static Thread currentThread() è¿”å›å¯¹å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨
    System.out.println(Thread.currentThread().getName());
  }
}
```

### 15.7 çº¿ç¨‹ä¼‘çœ 

ç›¸å…³æ–¹æ³•

| æ–¹æ³•å                           | è¯´æ˜                                             |
| -------------------------------- | ------------------------------------------------ |
| `static void sleep(long millis)` | ä½¿å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹åœç•™ï¼ˆæš‚åœæ‰§è¡Œï¼‰æŒ‡å®šçš„æ¯«ç§’æ•° |

### 15.8 çº¿ç¨‹ä¼˜å…ˆçº§

ä¼˜å…ˆçº§ç›¸å…³æ–¹æ³•

| æ–¹æ³•å                                      | è¯´æ˜                                                         |
| ------------------------------------------- | ------------------------------------------------------------ |
| `final int getPriority()     `              | è¿”å›æ­¤çº¿ç¨‹çš„ä¼˜å…ˆçº§                                           |
| ` final void setPriority(int newPriority) ` | æ›´æ”¹æ­¤çº¿ç¨‹çš„ä¼˜å…ˆçº§çº¿ç¨‹é»˜è®¤ä¼˜å…ˆçº§æ˜¯5ï¼›çº¿ç¨‹ä¼˜å…ˆçº§çš„èŒƒå›´æ˜¯ï¼š1-10 |

```java
public class MyCallable implements Callable<String> {
  @Override
  public String call() throws Exception {
    for (int i = 0; i < 100; i++) {
      System.out.println(Thread.currentThread().getName() + "---" + i);
    }
    return "çº¿ç¨‹æ‰§è¡Œå®Œæ¯•äº†";
  }
}
public class Demo {
  public static void main(String[] args) {
    //ä¼˜å…ˆçº§: 1 - 10 é»˜è®¤å€¼:5
    MyCallable mc = new MyCallable();

    FutureTask<String> ft = new FutureTask<>(mc);

    Thread t1 = new Thread(ft);
    t1.setName("é£æœº");
    t1.setPriority(10);
    //System.out.println(t1.getPriority());//5
    t1.start();

    MyCallable mc2 = new MyCallable();

    FutureTask<String> ft2 = new FutureTask<>(mc2);

    Thread t2 = new Thread(ft2);
    t2.setName("å¦å…‹");
    t2.setPriority(1);
    //System.out.println(t2.getPriority());//5
    t2.start();
  }
}
```

### 15.9 å®ˆæŠ¤çº¿ç¨‹

ç›¸å…³æ–¹æ³•

| æ–¹æ³•å                       | è¯´æ˜                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| `void setDaemon(boolean on)` | å°†æ­¤çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œå½“è¿è¡Œçš„çº¿ç¨‹éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼ŒJavaè™šæ‹Ÿæœºå°†é€€å‡º |

```java
public class MyThread1 extends Thread {
  @Override
  public void run() {
    for (int i = 0; i < 10; i++) {
      System.out.println(getName() + "---" + i);
    }
  }
}
public class MyThread2 extends Thread {
  @Override
  public void run() {
    for (int i = 0; i < 100; i++) {
      System.out.println(getName() + "---" + i);
    }
  }
}
public class Demo {
  public static void main(String[] args) {
    MyThread1 t1 = new MyThread1();
    MyThread2 t2 = new MyThread2();

    t1.setName("å¥³ç¥");
    t2.setName("å¤‡èƒ");

    //æŠŠç¬¬äºŒä¸ªçº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹
    //å½“æ™®é€šçº¿ç¨‹æ‰§è¡Œå®Œä¹‹å,é‚£ä¹ˆå®ˆæŠ¤çº¿ç¨‹ä¹Ÿæ²¡æœ‰ç»§ç»­è¿è¡Œä¸‹å»çš„å¿…è¦äº†.
    t2.setDaemon(true);

    t1.start();
    t2.start();
  }
}
```

### 15.10 çº¿ç¨‹åŒæ­¥

- ä»£ç æ ¼å¼

```java
synchronized(ä»»æ„å¯¹è±¡) { 
	å¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®çš„ä»£ç  
}
```

synchronized(ä»»æ„å¯¹è±¡)ï¼šå°±ç›¸å½“äºç»™ä»£ç åŠ é”äº†ï¼Œä»»æ„å¯¹è±¡å°±å¯ä»¥çœ‹æˆæ˜¯ä¸€æŠŠé”

åŒæ­¥çš„å¥½å¤„å’Œå¼Šç«¯  

- å¥½å¤„ï¼šè§£å†³äº†å¤šçº¿ç¨‹çš„æ•°æ®å®‰å…¨é—®é¢˜

- å¼Šç«¯ï¼šå½“çº¿ç¨‹å¾ˆå¤šæ—¶ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå»åˆ¤æ–­åŒæ­¥ä¸Šçš„é”ï¼Œè¿™æ˜¯å¾ˆè€—è´¹èµ„æºçš„ï¼Œæ— å½¢ä¸­ä¼šé™ä½ç¨‹åºçš„è¿è¡Œæ•ˆç‡

```java
public class SellTicket implements Runnable {
  private int tickets = 100;
  private Object obj = new Object();

  @Override
  public void run() {
    while (true) {
      synchronized (obj) { // å¯¹å¯èƒ½æœ‰å®‰å…¨é—®é¢˜çš„ä»£ç åŠ é”,å¤šä¸ªçº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€æŠŠé”
        //t1è¿›æ¥åï¼Œå°±ä¼šæŠŠè¿™æ®µä»£ç ç»™é”èµ·æ¥
        if (tickets > 0) {
          try {
            Thread.sleep(100);
            //t1ä¼‘æ¯100æ¯«ç§’
          } catch (InterruptedException e) {
            e.printStackTrace();
          }
          //çª—å£1æ­£åœ¨å‡ºå”®ç¬¬100å¼ ç¥¨
          System.out.println(Thread.currentThread().getName() + "æ­£åœ¨å‡ºå”®ç¬¬" + tickets + "å¼ ç¥¨");
          tickets--; //tickets = 99;
        }
      }
      //t1å‡ºæ¥äº†ï¼Œè¿™æ®µä»£ç çš„é”å°±è¢«é‡Šæ”¾äº†
    }
  }
}

public class SellTicketDemo {
  public static void main(String[] args) {
    SellTicket st = new SellTicket();

    Thread t1 = new Thread(st, "çª—å£1");
    Thread t2 = new Thread(st, "çª—å£2");
    Thread t3 = new Thread(st, "çª—å£3");

    t1.start();
    t2.start();
    t3.start();
  }
}
```

#### åº”ç”¨

- åŒæ­¥æ–¹æ³•çš„æ ¼å¼

  åŒæ­¥æ–¹æ³•ï¼šå°±æ˜¯æŠŠsynchronizedå…³é”®å­—åŠ åˆ°æ–¹æ³•ä¸Š

  ```java
  ä¿®é¥°ç¬¦ synchronized è¿”å›å€¼ç±»å‹ æ–¹æ³•å(æ–¹æ³•å‚æ•°) { 
  	æ–¹æ³•ä½“ï¼›
  }
  ```

  åŒæ­¥æ–¹æ³•çš„é”å¯¹è±¡æ˜¯ä»€ä¹ˆå‘¢?

  â€‹	this

- é™æ€åŒæ­¥æ–¹æ³•

  åŒæ­¥é™æ€æ–¹æ³•ï¼šå°±æ˜¯æŠŠsynchronizedå…³é”®å­—åŠ åˆ°é™æ€æ–¹æ³•ä¸Š

  ```java
  ä¿®é¥°ç¬¦ static synchronized è¿”å›å€¼ç±»å‹ æ–¹æ³•å(æ–¹æ³•å‚æ•°) { 
  	æ–¹æ³•ä½“ï¼›
  }
  ```

  åŒæ­¥é™æ€æ–¹æ³•çš„é”å¯¹è±¡æ˜¯ä»€ä¹ˆå‘¢?

  â€‹	ç±»å.class

- ä»£ç æ¼”ç¤º

```java
public class MyRunnable implements Runnable {
  private static int ticketCount = 100;

  @Override
  public void run() {
    while(true){
      if("çª—å£ä¸€".equals(Thread.currentThread().getName())){
        //åŒæ­¥æ–¹æ³•
        boolean result = synchronizedMthod();
        if(result){
          break;
        }
      }

      if("çª—å£äºŒ".equals(Thread.currentThread().getName())){
        //åŒæ­¥ä»£ç å—
        synchronized (MyRunnable.class){
          if(ticketCount == 0){
            break;
          }else{
            try {
              Thread.sleep(10);
            } catch (InterruptedException e) {
              e.printStackTrace();
            }
            ticketCount--;
            System.out.println(Thread.currentThread().getName() + "åœ¨å–ç¥¨,è¿˜å‰©ä¸‹" + ticketCount + "å¼ ç¥¨");
          }
        }
      }

    }
  }

  private static synchronized boolean synchronizedMthod() {
    if(ticketCount == 0){
      return true;
    }else{
      try {
        Thread.sleep(10);
      } catch (InterruptedException e) {
        e.printStackTrace();
      }
      ticketCount--;
      System.out.println(Thread.currentThread().getName() + "åœ¨å–ç¥¨,è¿˜å‰©ä¸‹" + ticketCount + "å¼ ç¥¨");
      return false;
    }
  }
}
```

### 15.11 Lock

Lockæ˜¯æ¥å£ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œè¿™é‡Œé‡‡ç”¨å®ƒçš„å®ç°ç±»ReentrantLockæ¥å®ä¾‹åŒ–

- ReentrantLockæ„é€ æ–¹æ³•

  | æ–¹æ³•å          | è¯´æ˜                        |
  | --------------- | --------------------------- |
  | ReentrantLock() | åˆ›å»ºä¸€ä¸ªReentrantLockçš„å®ä¾‹ |

- åŠ é”è§£é”æ–¹æ³•

  | æ–¹æ³•å        | è¯´æ˜   |
  | ------------- | ------ |
  | void lock()   | è·å¾—é” |
  | void unlock() | é‡Šæ”¾é” |

- ä»£ç æ¼”ç¤º

  ```java
  public class Ticket implements Runnable {
    //ç¥¨çš„æ•°é‡
    private int ticket = 100;
    private Object obj = new Object();
    private ReentrantLock lock = new ReentrantLock();
  
    @Override
    public void run() {
      while (true) {
        //synchronized (obj){//å¤šä¸ªçº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€æŠŠé”.
        try {
          lock.lock();
          if (ticket <= 0) {
            //å–å®Œäº†
            break;
          } else {
            Thread.sleep(100);
            ticket--;
            System.out.println(Thread.currentThread().getName() + "åœ¨å–ç¥¨,è¿˜å‰©ä¸‹" + ticket + "å¼ ç¥¨");
          }
        } catch (InterruptedException e) {
          e.printStackTrace();
        } finally {
          lock.unlock();
        }
        // }
      }
    }
  }
  
  public class Demo {
    public static void main(String[] args) {
      Ticket ticket = new Ticket();
  
      Thread t1 = new Thread(ticket);
      Thread t2 = new Thread(ticket);
      Thread t3 = new Thread(ticket);
  
      t1.setName("çª—å£ä¸€");
      t2.setName("çª—å£äºŒ");
      t3.setName("çª—å£ä¸‰");
  
      t1.start();
      t2.start();
      t3.start();
    }
  }

### 15.12 ç”Ÿäº§è€…æ¶ˆè´¹è€…

- Objectç±»çš„ç­‰å¾…å’Œå”¤é†’æ–¹æ³•

  | æ–¹æ³•å              | è¯´æ˜                                                         |
  | ------------------- | ------------------------------------------------------------ |
  | `void wait()  `     | å¯¼è‡´å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¯¥å¯¹è±¡çš„ notify()æ–¹æ³•æˆ– notifyAll()æ–¹æ³• |
  | `void notify()  `   | å”¤é†’æ­£åœ¨ç­‰å¾…å¯¹è±¡ç›‘è§†å™¨çš„å•ä¸ªçº¿ç¨‹                             |
  | `void notifyAll() ` | å”¤é†’æ­£åœ¨ç­‰å¾…å¯¹è±¡ç›‘è§†å™¨çš„æ‰€æœ‰çº¿ç¨‹                             |

> åˆ›å»ºé”å¯¹è±¡

```java
private final Object lock = new Object();
```

> å”¤é†’æ¶ˆè´¹è€…

```java
desk.getLock().notifyAll();
```

> ç­‰å¾…çº¿ç¨‹

```java
 desk.getLock().wait();
```

### 15.13 é˜»å¡é˜Ÿåˆ—

+ é˜»å¡é˜Ÿåˆ—ç»§æ‰¿ç»“æ„

![image-20231106195411939](https://img.picgo.net/2023/11/06/image-20231106195411939d1907dbb12798cb0.png)

- å¸¸è§BlockingQueue:

  ArrayBlockingQueue: åº•å±‚æ˜¯æ•°ç»„,æœ‰ç•Œ

  LinkedBlockingQueue: åº•å±‚æ˜¯é“¾è¡¨,æ— ç•Œ.ä½†ä¸æ˜¯çœŸæ­£çš„æ— ç•Œ,æœ€å¤§ä¸ºintçš„æœ€å¤§å€¼

- BlockingQueueçš„æ ¸å¿ƒæ–¹æ³•:

  `put(anObject): å°†å‚æ•°æ”¾å…¥é˜Ÿåˆ—,å¦‚æœæ”¾ä¸è¿›å»ä¼šé˜»å¡`

  `take(): å–å‡ºç¬¬ä¸€ä¸ªæ•°æ®,å–ä¸åˆ°ä¼šé˜»å¡`

```java
public class Demo02 {
  public static void main(String[] args) throws Exception {
    // åˆ›å»ºé˜»å¡é˜Ÿåˆ—çš„å¯¹è±¡,å®¹é‡ä¸º 1
    ArrayBlockingQueue<String> arrayBlockingQueue = new ArrayBlockingQueue<>(1);

    // å­˜å‚¨å…ƒç´ 
    arrayBlockingQueue.put("æ±‰å ¡åŒ…");

    // å–å…ƒç´ 
    System.out.println(arrayBlockingQueue.take());
    System.out.println(arrayBlockingQueue.take()); // å–ä¸åˆ°ä¼šé˜»å¡

    System.out.println("ç¨‹åºç»“æŸäº†");
  }
}
public class Demo02 {
  public static void main(String[] args) throws Exception {
    // åˆ›å»ºé˜»å¡é˜Ÿåˆ—çš„å¯¹è±¡,å®¹é‡ä¸º 1
    ArrayBlockingQueue<String> arrayBlockingQueue = new ArrayBlockingQueue<>(1);

    // å­˜å‚¨å…ƒç´ 
    arrayBlockingQueue.put("æ±‰å ¡åŒ…");

    // å–å…ƒç´ 
    System.out.println(arrayBlockingQueue.take());
    System.out.println(arrayBlockingQueue.take()); // å–ä¸åˆ°ä¼šé˜»å¡

    System.out.println("ç¨‹åºç»“æŸäº†");
  }
}
```

#### 15.13.1 é˜»å¡é˜Ÿåˆ—å®ç°ç­‰å¾…å”¤é†’æœºåˆ¶

```java
public class Cooker extends Thread {

  private ArrayBlockingQueue<String> bd;

  public Cooker(ArrayBlockingQueue<String> bd) {
    this.bd = bd;
  }
  //    ç”Ÿäº§è€…æ­¥éª¤ï¼š
  //            1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…
  //    å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚
  //            2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚
  //            3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚

  @Override
  public void run() {
    while (true) {
      try {
        bd.put("æ±‰å ¡åŒ…");
        System.out.println("å¨å¸ˆæ”¾å…¥ä¸€ä¸ªæ±‰å ¡åŒ…");
      } catch (InterruptedException e) {
        e.printStackTrace();
      }
    }
  }
}

public class Foodie extends Thread {
  private ArrayBlockingQueue<String> bd;

  public Foodie(ArrayBlockingQueue<String> bd) {
    this.bd = bd;
  }

  @Override
  public void run() {
    //        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚
    //        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚
    //        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ
    //        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†
    //                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§
    //        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€

    //å¥—è·¯:
    //1. while(true)æ­»å¾ªç¯
    //2. synchronized é”,é”å¯¹è±¡è¦å”¯ä¸€
    //3. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. ç»“æŸ
    //4. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. æ²¡æœ‰ç»“æŸ
    while (true) {
      try {
        String take = bd.take();
        System.out.println("åƒè´§å°†" + take + "æ‹¿å‡ºæ¥åƒäº†");
      } catch (InterruptedException e) {
        e.printStackTrace();
      }
    }

  }
}

public class Demo {
  public static void main(String[] args) {
    ArrayBlockingQueue<String> bd = new ArrayBlockingQueue<>(1);

    Foodie f = new Foodie(bd);
    Cooker c = new Cooker(bd);

    f.start();
    c.start();
  }
}
```

### 15.14 çº¿ç¨‹æ± 

#### 15.14.1 çº¿ç¨‹çš„çŠ¶æ€

```java
public class Thread {

  public enum State {

    /* æ–°å»º */
    NEW , 

    /* å¯è¿è¡ŒçŠ¶æ€ */
    RUNNABLE , 

    /* é˜»å¡çŠ¶æ€ */
    BLOCKED , 

    /* æ— é™ç­‰å¾…çŠ¶æ€ */
    WAITING , 

    /* è®¡æ—¶ç­‰å¾… */
    TIMED_WAITING , 

    /* ç»ˆæ­¢ */
    TERMINATED;

  }

  // è·å–å½“å‰çº¿ç¨‹çš„çŠ¶æ€
  public State getState() {
    return jdk.internal.misc.VM.toThreadState(threadStatus);
  }

}
```

| çº¿ç¨‹çŠ¶æ€      | å…·ä½“å«ä¹‰                                                     |
| ------------- | ------------------------------------------------------------ |
| NEW           | ä¸€ä¸ªå°šæœªå¯åŠ¨çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºåˆå§‹çŠ¶æ€ã€å¼€å§‹çŠ¶æ€ã€‚çº¿ç¨‹åˆšè¢«åˆ›å»ºï¼Œä½†æ˜¯å¹¶æœªå¯åŠ¨ã€‚è¿˜æ²¡è°ƒç”¨startæ–¹æ³•ã€‚MyThread t = new MyThread()åªæœ‰çº¿ç¨‹è±¡ï¼Œæ²¡æœ‰çº¿ç¨‹ç‰¹å¾ã€‚ |
| RUNNABLE      | å½“æˆ‘ä»¬è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„startæ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶çº¿ç¨‹å¯¹è±¡è¿›å…¥äº†RUNNABLEçŠ¶æ€ã€‚é‚£ä¹ˆæ­¤æ—¶æ‰æ˜¯çœŸæ­£çš„åœ¨JVMè¿›ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ä¸€ç»å¯åŠ¨å¹¶ä¸æ˜¯ç«‹å³å¾—åˆ°æ‰§è¡Œï¼Œçº¿ç¨‹çš„è¿è¡Œä¸å¦è¦å¬ä»¤ä¸CPUçš„è°ƒåº¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠè¿™ä¸ªä¸­é—´çŠ¶æ€ç§°ä¹‹ä¸ºå¯æ‰§è¡ŒçŠ¶æ€(RUNNABLE)ä¹Ÿå°±æ˜¯è¯´å®ƒå…·å¤‡æ‰§è¡Œçš„èµ„æ ¼ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰çœŸæ­£çš„æ‰§è¡Œèµ·æ¥è€Œæ˜¯åœ¨ç­‰å¾…CPUçš„åº¦ã€‚ |
| BLOCKED       | å½“ä¸€ä¸ªçº¿ç¨‹è¯•å›¾è·å–ä¸€ä¸ªå¯¹è±¡é”ï¼Œè€Œè¯¥å¯¹è±¡é”è¢«å…¶ä»–çš„çº¿ç¨‹æŒæœ‰ï¼Œåˆ™è¯¥çº¿ç¨‹è¿›å…¥BlockedçŠ¶æ€ï¼›å½“è¯¥çº¿ç¨‹æŒæœ‰é”æ—¶ï¼Œè¯¥çº¿ç¨‹å°†å˜æˆRunnableçŠ¶æ€ã€‚ |
| WAITING       | ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºç­‰å¾…çŠ¶æ€ã€‚é€ æˆçº¿ç¨‹ç­‰å¾…çš„åŸå› æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯è°ƒç”¨Object.wait()ã€join()æ–¹æ³•ã€‚å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œæ­£åœ¨ç­‰å¾…å…¶ä»–çº¿ç¨‹å»æ‰§è¡Œä¸€ä¸ªç‰¹å®šçš„æ“ä½œã€‚ä¾‹å¦‚ï¼šå› ä¸ºwait()è€Œç­‰å¾…çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹å»è°ƒç”¨notify()æˆ–notifyAll()ï¼›ä¸€ä¸ªå› ä¸ºjoin()è€Œç­‰å¾…çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹ç»“æŸã€‚ |
| TIMED_WAITING | ä¸€ä¸ªåœ¨é™å®šæ—¶é—´å†…ç­‰å¾…çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºé™æ—¶ç­‰å¾…çŠ¶æ€ã€‚é€ æˆçº¿ç¨‹é™æ—¶ç­‰å¾…çŠ¶æ€çš„åŸå› æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šThread.sleep(long)ï¼ŒObject.wait(long)ã€join(long)ã€‚ |
| TERMINATED    | ä¸€ä¸ªå®Œå…¨è¿è¡Œå®Œæˆçš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºç»ˆæ­¢çŠ¶æ€ã€ç»“æŸçŠ¶æ€     |

#### 15.14.2 çº¿ç¨‹æ± 

- static ExecutorService newCachedThreadPool()   åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± 
- static newFixedThreadPool(int nThreads)	    åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± 

```java
package com.itheima.mythreadpool;


//static ExecutorService newCachedThreadPool()   åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± 
//static newFixedThreadPool(int nThreads)	    åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± 

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class MyThreadPoolDemo {
  public static void main(String[] args) throws InterruptedException {

    //1,åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± å¯¹è±¡.æ± å­ä¸­é»˜è®¤æ˜¯ç©ºçš„.é»˜è®¤æœ€å¤šå¯ä»¥å®¹çº³intç±»å‹çš„æœ€å¤§å€¼.
    ExecutorService executorService = Executors.newCachedThreadPool();
    //Executors --- å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡
    //ExecutorService --- å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ§åˆ¶çº¿ç¨‹æ± 

    executorService.submit(()->{
      System.out.println(Thread.currentThread().getName() + "åœ¨æ‰§è¡Œäº†");
    });

    //Thread.sleep(2000);

    executorService.submit(()->{
      System.out.println(Thread.currentThread().getName() + "åœ¨æ‰§è¡Œäº†");
    });

    executorService.shutdown();
  }
}

```

##### æŒ‡å®šçº¿ç¨‹ä¸Šé™

```java
package com.itheima.mythreadpool;

//static ExecutorService newFixedThreadPool(int nThreads)
//åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± 

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.ThreadPoolExecutor;

public class MyThreadPoolDemo2 {
  public static void main(String[] args) {
    //å‚æ•°ä¸æ˜¯åˆå§‹å€¼è€Œæ˜¯æœ€å¤§å€¼
    ExecutorService executorService = Executors.newFixedThreadPool(10);

    ThreadPoolExecutor pool = (ThreadPoolExecutor) executorService;
    System.out.println(pool.getPoolSize());//0

    executorService.submit(()->{
      System.out.println(Thread.currentThread().getName() + "åœ¨æ‰§è¡Œäº†");
    });

    executorService.submit(()->{
      System.out.println(Thread.currentThread().getName() + "åœ¨æ‰§è¡Œäº†");
    });

    System.out.println(pool.getPoolSize());//2
    //        executorService.shutdown();
  }
}

```

#### 15.14.3 çº¿ç¨‹æ± -ThreadPoolExecutor

**åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡ :** 

ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(æ ¸å¿ƒçº¿ç¨‹æ•°é‡,æœ€å¤§çº¿ç¨‹æ•°é‡,ç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´,ä»»åŠ¡é˜Ÿåˆ—,åˆ›å»ºçº¿ç¨‹å·¥å‚,ä»»åŠ¡çš„æ‹’ç»ç­–ç•¥);

```java
package com.itheima.mythreadpool;

import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.Executors;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

public class MyThreadPoolDemo3 {
  //    å‚æ•°ä¸€ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡
  //    å‚æ•°äºŒï¼šæœ€å¤§çº¿ç¨‹æ•°
  //    å‚æ•°ä¸‰ï¼šç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´
  //    å‚æ•°å››ï¼šæ—¶é—´å•ä½
  //    å‚æ•°äº”ï¼šä»»åŠ¡é˜Ÿåˆ—
  //    å‚æ•°å…­ï¼šåˆ›å»ºçº¿ç¨‹å·¥å‚
  //    å‚æ•°ä¸ƒï¼šä»»åŠ¡çš„æ‹’ç»ç­–ç•¥
  public static void main(String[] args) {
    ThreadPoolExecutor pool = new ThreadPoolExecutor(2,5,2,TimeUnit.SECONDS,new ArrayBlockingQueue<>(10), Executors.defaultThreadFactory(),new ThreadPoolExecutor.AbortPolicy());
    pool.submit(new MyRunnable());
    pool.submit(new MyRunnable());

    pool.shutdown();
  }
}
```

![image-20231106195633410](https://img.picgo.net/2023/11/06/image-202311061956334100e42528840fea0dc.png)

```java
public ThreadPoolExecutor(int corePoolSize,
                          int maximumPoolSize,
                          long keepAliveTime,
                          TimeUnit unit,
                          BlockingQueue<Runnable> workQueue,
                          ThreadFactory threadFactory,
                          RejectedExecutionHandler handler)

  corePoolSizeï¼š   æ ¸å¿ƒçº¿ç¨‹çš„æœ€å¤§å€¼ï¼Œä¸èƒ½å°äº0
  maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°ï¼Œä¸èƒ½å°äºç­‰äº0ï¼ŒmaximumPoolSize >= corePoolSize
  keepAliveTimeï¼š  ç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´,ä¸èƒ½å°äº0
  unitï¼š           æ—¶é—´å•ä½
  workQueueï¼š      ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸èƒ½ä¸ºnull
  threadFactoryï¼š  åˆ›å»ºçº¿ç¨‹å·¥å‚,ä¸èƒ½ä¸ºnull      
  handlerï¼š        ä»»åŠ¡çš„æ‹’ç»ç­–ç•¥,ä¸èƒ½ä¸ºnull  
```

#### 15.14.5 çº¿ç¨‹æ± -éé»˜è®¤ä»»åŠ¡æ‹’ç»ç­–ç•¥

```java
ThreadPoolExecutor.AbortPolicy: 		    ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚æ˜¯é»˜è®¤çš„ç­–ç•¥ã€‚
ThreadPoolExecutor.DiscardPolicyï¼š 		   ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ è¿™æ˜¯ä¸æ¨èçš„åšæ³•ã€‚
ThreadPoolExecutor.DiscardOldestPolicyï¼š    æŠ›å¼ƒé˜Ÿåˆ—ä¸­ç­‰å¾…æœ€ä¹…çš„ä»»åŠ¡ ç„¶åæŠŠå½“å‰ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ä¸­ã€‚
ThreadPoolExecutor.CallerRunsPolicy:        è°ƒç”¨ä»»åŠ¡çš„run()æ–¹æ³•ç»•è¿‡çº¿ç¨‹æ± ç›´æ¥æ‰§è¡Œã€‚
```

## 16 ç½‘ç»œç¼–ç¨‹

### 16.1 IP

InetAddressï¼šæ­¤ç±»è¡¨ç¤ºInternetåè®®ï¼ˆIPï¼‰åœ°å€

- ç›¸å…³æ–¹æ³•

  | æ–¹æ³•å                                    | è¯´æ˜                                                         |
  | ----------------------------------------- | ------------------------------------------------------------ |
  | static InetAddress getByName(String host) | ç¡®å®šä¸»æœºåç§°çš„IPåœ°å€ã€‚ä¸»æœºåç§°å¯ä»¥æ˜¯æœºå™¨åç§°ï¼Œä¹Ÿå¯ä»¥æ˜¯IPåœ°å€ |
  | String getHostName()                      | è·å–æ­¤IPåœ°å€çš„ä¸»æœºå                                         |
  | String getHostAddress()                   | è¿”å›æ–‡æœ¬æ˜¾ç¤ºä¸­çš„IPåœ°å€å­—ç¬¦ä¸²                                 |

```java
public class InetAddressDemo {
  public static void main(String[] args) throws UnknownHostException {
    //InetAddress address = InetAddress.getByName("itheima");
    InetAddress address = InetAddress.getByName("192.168.1.66");

    //public String getHostName()ï¼šè·å–æ­¤IPåœ°å€çš„ä¸»æœºå
    String name = address.getHostName();
    //public String getHostAddress()ï¼šè¿”å›æ–‡æœ¬æ˜¾ç¤ºä¸­çš„IPåœ°å€å­—ç¬¦ä¸²
    String ip = address.getHostAddress();

    System.out.println("ä¸»æœºåï¼š" + name);
    System.out.println("IPåœ°å€ï¼š" + ip);
  }
}
```

### 16.2 UDPé€šä¿¡ç¨‹åº

#### 16.2.1å‘é€ä¿¡æ¯

- æ„é€ æ–¹æ³•

  | æ–¹æ³•å                                                      | è¯´æ˜                                                 |
  | ----------------------------------------------------------- | ---------------------------------------------------- |
  | DatagramSocket()                                            | åˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬æœºåœ°å€ä¸Šçš„ä»»ä½•å¯ç”¨ç«¯å£ |
  | DatagramPacket(byte[] buf,int len,InetAddress add,int port) | åˆ›å»ºæ•°æ®åŒ…,å‘é€é•¿åº¦ä¸ºlençš„æ•°æ®åŒ…åˆ°æŒ‡å®šä¸»æœºçš„æŒ‡å®šç«¯å£ |

- ç›¸å…³æ–¹æ³•

  | æ–¹æ³•å                         | è¯´æ˜                   |
  | ------------------------------ | ---------------------- |
  | void send(DatagramPacket p)    | å‘é€æ•°æ®æŠ¥åŒ…           |
  | void close()                   | å…³é—­æ•°æ®æŠ¥å¥—æ¥å­—       |
  | void receive(DatagramPacket p) | ä»æ­¤å¥—æ¥å­—æ¥å—æ•°æ®æŠ¥åŒ… |

- å‘é€æ•°æ®çš„æ­¥éª¤

  - åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
  - åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…
  - è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®
  - å…³é—­å‘é€ç«¯

  #### 

```java
public class SendDemo {
  public static void main(String[] args) throws IOException {
    //åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
    // DatagramSocket() æ„é€ æ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬åœ°ä¸»æœºä¸Šçš„ä»»ä½•å¯ç”¨ç«¯å£
    DatagramSocket ds = new DatagramSocket();

    //åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…
    //DatagramPacket(byte[] buf, int length, InetAddress address, int port)
    //æ„é€ ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå‘é€é•¿åº¦ä¸º lengthçš„æ•°æ®åŒ…åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å·ã€‚
    byte[] bys = "hello,udp,æˆ‘æ¥äº†".getBytes();

    DatagramPacket dp = new DatagramPacket(bys,bys.length,InetAddress.getByName("127.0.0.1"),10086);

    //è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®
    //void send(DatagramPacket p) ä»æ­¤å¥—æ¥å­—å‘é€æ•°æ®æŠ¥åŒ…
    ds.send(dp);

    //å…³é—­å‘é€ç«¯
    //void close() å…³é—­æ­¤æ•°æ®æŠ¥å¥—æ¥å­—
    ds.close();
  }
}
```

#### 16.2.2 æ¥æ”¶ä¿¡æ¯

- æ¥æ”¶æ•°æ®çš„æ­¥éª¤

  - åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
  - åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®
  - è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®
  - è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º
  - å…³é—­æ¥æ”¶ç«¯

- æ„é€ æ–¹æ³•

  | æ–¹æ³•å                              | è¯´æ˜                                            |
  | ----------------------------------- | ----------------------------------------------- |
  | DatagramPacket(byte[] buf, int len) | åˆ›å»ºä¸€ä¸ªDatagramPacketç”¨äºæ¥æ”¶é•¿åº¦ä¸ºlençš„æ•°æ®åŒ… |

- ç›¸å…³æ–¹æ³•

  | æ–¹æ³•å            | è¯´æ˜                                     |
  | ----------------- | ---------------------------------------- |
  | byte[]  getData() | è¿”å›æ•°æ®ç¼“å†²åŒº                           |
  | int  getLength()  | è¿”å›è¦å‘é€çš„æ•°æ®çš„é•¿åº¦æˆ–æ¥æ”¶çš„æ•°æ®çš„é•¿åº¦ |

- ç¤ºä¾‹ä»£ç 

```java
public class ReceiveDemo {
  public static void main(String[] args) throws IOException {
    //åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
    DatagramSocket ds = new DatagramSocket(12345);

    //åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®
    byte[] bys = new byte[1024];
    DatagramPacket dp = new DatagramPacket(bys, bys.length);

    //è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®
    ds.receive(dp);

    //è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º
    System.out.println("æ•°æ®æ˜¯ï¼š" + new String(dp.getData(), 0,                                             dp.getLength()));
  }
}
}
```

#### 16.2.3 UDPä¸‰ç§é€šè®¯æ–¹å¼

- å•æ’­

  å•æ’­ç”¨äºä¸¤ä¸ªä¸»æœºä¹‹é—´çš„ç«¯å¯¹ç«¯é€šä¿¡

- ç»„æ’­

  ç»„æ’­ç”¨äºå¯¹ä¸€ç»„ç‰¹å®šçš„ä¸»æœºè¿›è¡Œé€šä¿¡

- å¹¿æ’­

  å¹¿æ’­ç”¨äºä¸€ä¸ªä¸»æœºå¯¹æ•´ä¸ªå±€åŸŸç½‘ä¸Šæ‰€æœ‰ä¸»æœºä¸Šçš„æ•°æ®é€šä¿¡

#### 16.2.4 ç»„æ’­å®ç°

å®ç°æ­¥éª¤

- å‘é€ç«¯
  1. åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
  2. åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…(DatagramPacket)
  3. è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®(åœ¨å•æ’­ä¸­,è¿™é‡Œæ˜¯å‘ç»™æŒ‡å®šIPçš„ç”µè„‘ä½†æ˜¯åœ¨ç»„æ’­å½“ä¸­,è¿™é‡Œæ˜¯å‘ç»™ç»„æ’­åœ°å€)
  4. é‡Šæ”¾èµ„æº
- æ¥æ”¶ç«¯
  1. åˆ›å»ºæ¥æ”¶ç«¯Socketå¯¹è±¡(MulticastSocket)
  2. åˆ›å»ºä¸€ä¸ªç®±å­,ç”¨äºæ¥æ”¶æ•°æ®
  3. æŠŠå½“å‰è®¡ç®—æœºç»‘å®šä¸€ä¸ªç»„æ’­åœ°å€
  4. å°†æ•°æ®æ¥æ”¶åˆ°ç®±å­ä¸­
  5. è§£ææ•°æ®åŒ…,å¹¶æ‰“å°æ•°æ®
  6. é‡Šæ”¾èµ„æº

```java
// å‘é€ç«¯
public class ClinetDemo {
  public static void main(String[] args) throws IOException {
    // 1. åˆ›å»ºå‘é€ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
    DatagramSocket ds = new DatagramSocket();
    String s = "hello ç»„æ’­";
    byte[] bytes = s.getBytes();
    InetAddress address = InetAddress.getByName("224.0.1.0");
    int port = 10000;
    // 2. åˆ›å»ºæ•°æ®ï¼Œå¹¶æŠŠæ•°æ®æ‰“åŒ…(DatagramPacket)
    DatagramPacket dp = new DatagramPacket(bytes,bytes.length,address,port);
    // 3. è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•å‘é€æ•°æ®(åœ¨å•æ’­ä¸­,è¿™é‡Œæ˜¯å‘ç»™æŒ‡å®šIPçš„ç”µè„‘ä½†æ˜¯åœ¨ç»„æ’­å½“ä¸­,è¿™é‡Œæ˜¯å‘ç»™ç»„æ’­åœ°å€)
    ds.send(dp);
    // 4. é‡Šæ”¾èµ„æº
    ds.close();
  }
}
// æ¥æ”¶ç«¯
public class ServerDemo {
  public static void main(String[] args) throws IOException {
    // 1. åˆ›å»ºæ¥æ”¶ç«¯Socketå¯¹è±¡(MulticastSocket)
    MulticastSocket ms = new MulticastSocket(10000);
    // 2. åˆ›å»ºä¸€ä¸ªç®±å­,ç”¨äºæ¥æ”¶æ•°æ®
    DatagramPacket dp = new DatagramPacket(new byte[1024],1024);
    // 3. æŠŠå½“å‰è®¡ç®—æœºç»‘å®šä¸€ä¸ªç»„æ’­åœ°å€,è¡¨ç¤ºæ·»åŠ åˆ°è¿™ä¸€ç»„ä¸­.
    ms.joinGroup(InetAddress.getByName("224.0.1.0"));
    // 4. å°†æ•°æ®æ¥æ”¶åˆ°ç®±å­ä¸­
    ms.receive(dp);
    // 5. è§£ææ•°æ®åŒ…,å¹¶æ‰“å°æ•°æ®
    byte[] data = dp.getData();
    int length = dp.getLength();
    System.out.println(new String(data,0,length));
    // 6. é‡Šæ”¾èµ„æº
    ms.close();
  }
}
```

#### 16.2.5 UDPå¹¿æ’­å®ç°

- å®ç°æ­¥éª¤

  - å‘é€ç«¯
    1. åˆ›å»ºå‘é€ç«¯Socketå¯¹è±¡(DatagramSocket)
    2. åˆ›å»ºå­˜å‚¨æ•°æ®çš„ç®±å­,å°†å¹¿æ’­åœ°å€å°è£…è¿›å»
    3. å‘é€æ•°æ®
    4. é‡Šæ”¾èµ„æº
  - æ¥æ”¶ç«¯
    1. åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
    2. åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®
    3. è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®
    4. è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º
    5. å…³é—­æ¥æ”¶ç«¯

- ä»£ç å®ç°

```java
// å‘é€ç«¯
public class ClientDemo {
  public static void main(String[] args) throws IOException {
    // 1. åˆ›å»ºå‘é€ç«¯Socketå¯¹è±¡(DatagramSocket)
    DatagramSocket ds = new DatagramSocket();
    // 2. åˆ›å»ºå­˜å‚¨æ•°æ®çš„ç®±å­,å°†å¹¿æ’­åœ°å€å°è£…è¿›å»
    String s = "å¹¿æ’­ hello";
    byte[] bytes = s.getBytes();
    InetAddress address = InetAddress.getByName("255.255.255.255");
    int port = 10000;
    DatagramPacket dp = new DatagramPacket(bytes,bytes.length,address,port);
    // 3. å‘é€æ•°æ®
    ds.send(dp);
    // 4. é‡Šæ”¾èµ„æº
    ds.close();
  }
}

// æ¥æ”¶ç«¯
public class ServerDemo {
  public static void main(String[] args) throws IOException {
    // 1. åˆ›å»ºæ¥æ”¶ç«¯çš„Socketå¯¹è±¡(DatagramSocket)
    DatagramSocket ds = new DatagramSocket(10000);
    // 2. åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œç”¨äºæ¥æ”¶æ•°æ®
    DatagramPacket dp = new DatagramPacket(new byte[1024],1024);
    // 3. è°ƒç”¨DatagramSocketå¯¹è±¡çš„æ–¹æ³•æ¥æ”¶æ•°æ®
    ds.receive(dp);
    // 4. è§£ææ•°æ®åŒ…ï¼Œå¹¶æŠŠæ•°æ®åœ¨æ§åˆ¶å°æ˜¾ç¤º
    byte[] data = dp.getData();
    int length = dp.getLength();
    System.out.println(new String(data,0,length));
    // 5. å…³é—­æ¥æ”¶ç«¯
    ds.close();
  }
}
```

### 16.3 TCPå‘é€æ•°æ®

#### 16.3.1 å‘é€æ•°æ®

- æ„é€ æ–¹æ³•

  | æ–¹æ³•å                               | è¯´æ˜                                           |
  | ------------------------------------ | ---------------------------------------------- |
  | Socket(InetAddress address,int port) | åˆ›å»ºæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®šIPæŒ‡å®šç«¯å£å·       |
  | Socket(String host, int port)        | åˆ›å»ºæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å· |

- ç›¸å…³æ–¹æ³•

  | æ–¹æ³•å                         | è¯´æ˜                 |
  | ------------------------------ | -------------------- |
  | InputStream  getInputStream()  | è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å…¥æµ |
  | OutputStream getOutputStream() | è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµ |

- ç¤ºä¾‹ä»£ç 

```java
public class Client {
  public static void main(String[] args) throws IOException {
    //TCPåè®®ï¼Œå‘é€æ•°æ®

    //1.åˆ›å»ºSocketå¯¹è±¡
    //ç»†èŠ‚ï¼šåœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶ä¼šè¿æ¥æœåŠ¡ç«¯
    //      å¦‚æœè¿æ¥ä¸ä¸Šï¼Œä»£ç ä¼šæŠ¥é”™
    Socket socket = new Socket("127.0.0.1",10000);

    //2.å¯ä»¥ä»è¿æ¥é€šé“ä¸­è·å–è¾“å‡ºæµ
    OutputStream os = socket.getOutputStream();
    //å†™å‡ºæ•°æ®
    os.write("aaa".getBytes());

    //3.é‡Šæ”¾èµ„æº
    os.close();
    socket.close();
  }
}
```

#### 16.3.2 TCPæ¥æ”¶æ•°æ®

- æ„é€ æ–¹æ³•

  | æ–¹æ³•å                  | è¯´æ˜                             |
  | ----------------------- | -------------------------------- |
  | ServletSocket(int port) | åˆ›å»ºç»‘å®šåˆ°æŒ‡å®šç«¯å£çš„æœåŠ¡å™¨å¥—æ¥å­— |

- ç›¸å…³æ–¹æ³•

  | æ–¹æ³•å          | è¯´æ˜                           |
  | --------------- | ------------------------------ |
  | Socket accept() | ç›‘å¬è¦è¿æ¥åˆ°æ­¤çš„å¥—æ¥å­—å¹¶æ¥å—å®ƒ |

- æ³¨æ„äº‹é¡¹

  1. acceptæ–¹æ³•æ˜¯é˜»å¡çš„,ä½œç”¨å°±æ˜¯ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥
  2. å®¢æˆ·ç«¯åˆ›å»ºå¯¹è±¡å¹¶è¿æ¥æœåŠ¡å™¨,æ­¤æ—¶æ˜¯é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹åè®®,ä¿è¯è·ŸæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥
  3. é’ˆå¯¹å®¢æˆ·ç«¯æ¥è®²,æ˜¯å¾€å¤–å†™çš„,æ‰€ä»¥æ˜¯è¾“å‡ºæµ
     é’ˆå¯¹æœåŠ¡å™¨æ¥è®²,æ˜¯å¾€é‡Œè¯»çš„,æ‰€ä»¥æ˜¯è¾“å…¥æµ
  4. readæ–¹æ³•ä¹Ÿæ˜¯é˜»å¡çš„
  5. å®¢æˆ·ç«¯åœ¨å…³æµçš„æ—¶å€™,è¿˜å¤šäº†ä¸€ä¸ªå¾€æœåŠ¡å™¨å†™ç»“æŸæ ‡è®°çš„åŠ¨ä½œ
  6. æœ€åä¸€æ­¥æ–­å¼€è¿æ¥,é€šè¿‡å››æ¬¡æŒ¥æ‰‹åè®®ä¿è¯è¿æ¥ç»ˆæ­¢

- ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹

  - ![07_TCPä¸‰æ¬¡æ¡æ‰‹](https://img.picgo.net/2023/11/06/07_TCPe1d432c6585012c9.png)


- å››æ¬¡æŒ¥æ‰‹
  - ![image-20231106200054397](https://img.picgo.net/2023/11/06/image-20231106200054397dc5c73343393cbcb.png)

```java
public class Server {
  public static void main(String[] args) throws IOException {
    //TCPåè®®ï¼Œæ¥æ”¶æ•°æ®

    //1.åˆ›å»ºå¯¹è±¡ServerSocker
    ServerSocket ss = new ServerSocket(10000);

    //2.ç›‘å¬å®¢æˆ·ç«¯çš„é“¾æ¥
    Socket socket = ss.accept();

    //3.ä»è¿æ¥é€šé“ä¸­è·å–è¾“å…¥æµè¯»å–æ•°æ®
    InputStream is = socket.getInputStream();
    int b;
    while ((b = is.read()) != -1){
      System.out.println((char) b);
    }

    //4.é‡Šæ”¾èµ„æº
    socket.close();
    ss.close();
  }
}
```

## 17 åå°„

### 17.1 è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡çš„ä¸‰ç§æ–¹å¼

* Classè¿™ä¸ªç±»é‡Œé¢çš„é™æ€æ–¹æ³•forNameï¼ˆâ€œå…¨ç±»åâ€ï¼‰**ï¼ˆæœ€å¸¸ç”¨ï¼‰**
* é€šè¿‡classå±æ€§è·å–  
* é€šè¿‡å¯¹è±¡è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡

```java
//1.Classè¿™ä¸ªç±»é‡Œé¢çš„é™æ€æ–¹æ³•forName
//Class.forName("ç±»çš„å…¨ç±»å")ï¼š å…¨ç±»å = åŒ…å + ç±»å
Class clazz1 = Class.forName("com.itheima.reflectdemo.Student");
//æºä»£ç é˜¶æ®µè·å– --- å…ˆæŠŠStudentåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå†è·å–å­—èŠ‚ç æ–‡ä»¶çš„å¯¹è±¡
//clazz å°±è¡¨ç¤ºStudentè¿™ä¸ªç±»çš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ã€‚
//å°±æ˜¯å½“Student.classè¿™ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¹‹åï¼Œäº§ç”Ÿçš„å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡


//2.é€šè¿‡classå±æ€§è·å–
//ç±»å.class
Class clazz2 = Student.class;

//å› ä¸ºclassæ–‡ä»¶åœ¨ç¡¬ç›˜ä¸­æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥ï¼Œå½“è¿™ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¹‹åäº§ç”Ÿçš„å¯¹è±¡ä¹Ÿæ˜¯å”¯ä¸€çš„
System.out.println(clazz1 == clazz2);//true


//3.é€šè¿‡Studentå¯¹è±¡è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡
Student s = new Student();
Class clazz3 = s.getClass();
System.out.println(clazz1 == clazz2);//true
System.out.println(clazz2 == clazz3);//true
```

### 17.2 è·å–æ„é€ æ–¹æ³•

è§„åˆ™ï¼š

â€‹	getè¡¨ç¤ºè·å–

â€‹	Declaredè¡¨ç¤ºç§æœ‰

â€‹	æœ€åçš„sè¡¨ç¤ºæ‰€æœ‰ï¼Œå¤æ•°å½¢å¼

â€‹	å¦‚æœå½“å‰è·å–åˆ°çš„æ˜¯ç§æœ‰çš„ï¼Œå¿…é¡»è¦ä¸´æ—¶ä¿®æ”¹è®¿é—®æƒé™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨

| æ–¹æ³•å                                                       | è¯´æ˜                              |
| ------------------------------------------------------------ | --------------------------------- |
| ` Constructor<?>[] getConstructors() `                       | è·å¾—æ‰€æœ‰çš„æ„é€ ï¼ˆåªèƒ½publicä¿®é¥°ï¼‰  |
| `Constructor<?>[] getDeclaredConstructors()    `             | è·å¾—æ‰€æœ‰çš„æ„é€ ï¼ˆåŒ…å«privateä¿®é¥°ï¼‰ |
| `Constructor<T> getConstructor(Class<?>... parameterTypes)  ` | è·å–æŒ‡å®šæ„é€ ï¼ˆåªèƒ½publicä¿®é¥°ï¼‰    |
| `Constructor<T> getDeclaredConstructor(Class<?>... parameterTypes)` |                                   |

```java
public class ReflectDemo2 {
  public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException {
    //1.è·å¾—æ•´ä½“ï¼ˆclasså­—èŠ‚ç æ–‡ä»¶å¯¹è±¡ï¼‰
    Class clazz = Class.forName("com.itheima.reflectdemo.Student");


    //2.è·å–æ„é€ æ–¹æ³•å¯¹è±¡
    //è·å–æ‰€æœ‰æ„é€ æ–¹æ³•ï¼ˆpublicï¼‰
    Constructor[] constructors1 = clazz.getConstructors();
    for (Constructor constructor : constructors1) {
      System.out.println(constructor);
    }

    System.out.println("=======================");

    //è·å–æ‰€æœ‰æ„é€ ï¼ˆå¸¦ç§æœ‰çš„ï¼‰
    Constructor[] constructors2 = clazz.getDeclaredConstructors();

    for (Constructor constructor : constructors2) {
      System.out.println(constructor);
    }
    System.out.println("=======================");

    //è·å–æŒ‡å®šçš„ç©ºå‚æ„é€ 
    Constructor con1 = clazz.getConstructor();
    System.out.println(con1);

    Constructor con2 = clazz.getConstructor(String.class,int.class);
    System.out.println(con2);

    System.out.println("=======================");
    //è·å–æŒ‡å®šçš„æ„é€ (æ‰€æœ‰æ„é€ éƒ½å¯ä»¥è·å–åˆ°ï¼ŒåŒ…æ‹¬publicåŒ…æ‹¬private)
    Constructor con3 = clazz.getDeclaredConstructor();
    System.out.println(con3);
    //äº†è§£ System.out.println(con3 == con1);
    //æ¯ä¸€æ¬¡è·å–æ„é€ æ–¹æ³•å¯¹è±¡çš„æ—¶å€™ï¼Œéƒ½ä¼šæ–°newä¸€ä¸ªã€‚

    Constructor con4 = clazz.getDeclaredConstructor(String.class);
    System.out.println(con4);
  }
}
```

### 17.3 æš´åŠ›åå°„

```java
Class clazz = Class.forName("com.itheima.a02reflectdemo1.Student");
//2.è·å–æœ‰å‚æ„é€ æ–¹æ³•
Constructor con = clazz.getDeclaredConstructor(String.class, int.class);
//3.ä¸´æ—¶ä¿®æ”¹æ„é€ æ–¹æ³•çš„è®¿é—®æƒé™ï¼ˆæš´åŠ›åå°„ï¼‰
con.setAccessible(true);
//4.ç›´æ¥åˆ›å»ºå¯¹è±¡
Student stu = (Student) con.newInstance("zhangsan", 23);
```

### 17.4 è·å–æˆå‘˜å˜é‡

è§„åˆ™ï¼š

â€‹	getè¡¨ç¤ºè·å–

â€‹	Declaredè¡¨ç¤ºç§æœ‰

â€‹	æœ€åçš„sè¡¨ç¤ºæ‰€æœ‰ï¼Œå¤æ•°å½¢å¼

â€‹	å¦‚æœå½“å‰è·å–åˆ°çš„æ˜¯ç§æœ‰çš„ï¼Œå¿…é¡»è¦ä¸´æ—¶ä¿®æ”¹è®¿é—®æƒé™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨

æ–¹æ³•åï¼š

| æ–¹æ³•å                                  | è¯´æ˜                                         |
| --------------------------------------- | -------------------------------------------- |
| `Field[] getFields()    `               | è¿”å›æ‰€æœ‰æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„ï¼ˆåªèƒ½æ‹¿publicçš„ï¼‰ |
| ` Field[] getDeclaredFields()  `        | è¿”å›æ‰€æœ‰æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„ï¼Œå­˜åœ¨å°±èƒ½æ‹¿åˆ°     |
| ` Field getField(String name)     `     | è¿”å›å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡ï¼ˆåªèƒ½æ‹¿publicçš„ï¼‰       |
| `Field getDeclaredField(String name)` ` | è¿”å›å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡ï¼Œå­˜åœ¨å°±èƒ½æ‹¿åˆ°           |

### 17.5 è·å–æˆå‘˜å˜é‡å¹¶è·å–å€¼å’Œä¿®æ”¹å€¼

| æ–¹æ³•                                  | è¯´æ˜   |
| ------------------------------------- | ------ |
| `void set(Object obj, Object valueï¼‰` | èµ‹å€¼   |
| ` Object get(Object obj)    `         | è·å–å€¼ |

```java
public class ReflectDemo5 {
  public static void main(String[] args) throws ClassNotFoundException, NoSuchFieldException, IllegalAccessException {
    Student s = new Student("zhangsan",23,"å¹¿å·");
    Student ss = new Student("lisi",24,"åŒ—äº¬");

    //éœ€æ±‚ï¼š
    //åˆ©ç”¨åå°„è·å–æˆå‘˜å˜é‡å¹¶è·å–å€¼å’Œä¿®æ”¹å€¼

    //1.è·å–classå¯¹è±¡
    Class clazz = Class.forName("com.itheima.reflectdemo.Student");

    //2.è·å–nameæˆå‘˜å˜é‡
    //fieldå°±è¡¨ç¤ºnameè¿™ä¸ªå±æ€§çš„å¯¹è±¡
    Field field = clazz.getDeclaredField("name");
    //ä¸´æ—¶ä¿®é¥°ä»–çš„è®¿é—®æƒé™
    field.setAccessible(true);

    //3.è®¾ç½®(ä¿®æ”¹)nameçš„å€¼
    //å‚æ•°ä¸€ï¼šè¡¨ç¤ºè¦ä¿®æ”¹å“ªä¸ªå¯¹è±¡çš„nameï¼Ÿ
    //å‚æ•°äºŒï¼šè¡¨ç¤ºè¦ä¿®æ”¹ä¸ºå¤šå°‘ï¼Ÿ
    field.set(s,"wangwu");

    //3.è·å–nameçš„å€¼
    //è¡¨ç¤ºæˆ‘è¦è·å–è¿™ä¸ªå¯¹è±¡çš„nameçš„å€¼
    String result = (String)field.get(s);

    //4.æ‰“å°ç»“æœ
    System.out.println(result);

    System.out.println(s);
    System.out.println(ss);

  }
}


public class Student {
  private String name;
  private int age;
  public String gender;
  public String address;


  public Student() {
  }

  public Student(String name, int age, String address) {
    this.name = name;
    this.age = age;
    this.address = address;
  }


  public Student(String name, int age, String gender, String address) {
    this.name = name;
    this.age = age;
    this.gender = gender;
    this.address = address;
  }

  /**
     * è·å–
     * @return name
     */
  public String getName() {
    return name;
  }

  /**
     * è®¾ç½®
     * @param name
     */
  public void setName(String name) {
    this.name = name;
  }

  /**
     * è·å–
     * @return age
     */
  public int getAge() {
    return age;
  }

  /**
     * è®¾ç½®
     * @param age
     */
  public void setAge(int age) {
    this.age = age;
  }

  /**
     * è·å–
     * @return gender
     */
  public String getGender() {
    return gender;
  }

  /**
     * è®¾ç½®
     * @param gender
     */
  public void setGender(String gender) {
    this.gender = gender;
  }

  /**
     * è·å–
     * @return address
     */
  public String getAddress() {
    return address;
  }

  /**
     * è®¾ç½®
     * @param address
     */
  public void setAddress(String address) {
    this.address = address;
  }

  public String toString() {
    return "Student{name = " + name + ", age = " + age + ", gender = " + gender + ", address = " + address + "}";
  }
}

```

