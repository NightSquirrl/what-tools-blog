---
title: ğŸ˜¤ 10.Mybatis-plus
tag:
  - SpringBoot
  - JavaWeb
  - Mybatis-plus
recommend: 9
---

## 1. å…¥é—¨

### 1.1 å¼•å…¥MybatisPlusçš„èµ·æ­¥ä¾èµ–

```xml
<!--MybatisPlus--><dependency>    <groupId>com.baomidou</groupId>    <artifactId>mybatis-plus-boot-starter</artifactId>    <version>3.5.3.1</version></dependency>

```

### 1.2 å®šä¹‰Mapper

```java
public interface UserMapper extends BaseMapper<User> {}

```

### 1.3 å¸¸è§æ³¨é‡Š

MybatisPlusä¸­æ¯”è¾ƒå¸¸ç”¨çš„å‡ ä¸ªæ³¨è§£å¦‚ä¸‹ï¼š

@TableNameï¼šç”¨æ¥æŒ‡å®šè¡¨å

@TableIdï¼šç”¨æ¥æŒ‡å®šè¡¨ä¸­çš„ä¸»é”®å­—æ®µä¿¡æ¯

@TableFieldï¼šç”¨æ¥æŒ‡å®šè¡¨ä¸­çš„æ™®é€šå­—æ®µä¿¡æ¯

> IdTypeæšä¸¾ï¼š
>
> â€‹	AUTOï¼šæ•°æ®åº“è‡ªå¢é•¿
>
> â€‹	INPUTï¼šé€šè¿‡setæ–¹æ³•è‡ªè¡Œè¾“å…¥
>
> â€‹	ASSIGN_IDï¼šåˆ†é… IDï¼Œæ¥å£IdentifierGeneratorçš„æ–¹æ³•nextIdæ¥ç”Ÿæˆidï¼Œé»˜è®¤å®ç°ç±»ä¸ºDefaultIdentifierGeneratoré›ªèŠ±ç®—æ³•
>
> ä½¿ç”¨@TableFieldçš„å¸¸è§åœºæ™¯ï¼š
>
> â€‹	æˆå‘˜å˜é‡åä¸æ•°æ®åº“å­—æ®µåä¸ä¸€è‡´
>
> â€‹	æˆå‘˜å˜é‡åä»¥iså¼€å¤´ï¼Œä¸”æ˜¯å¸ƒå°”å€¼
>
> â€‹	æˆå‘˜å˜é‡åä¸æ•°æ®åº“å…³é”®å­—å†²çª
>
> â€‹	æˆå‘˜å˜é‡ä¸æ˜¯æ•°æ®åº“å­—æ®µ

![image-20231121171939190](https://img.picgo.net/2023/11/21/image-2023112117193919037ca944e29689139.png)

### 1.4 å¸¸è§é…ç½®

```properties
mybatis-plus:
	type-aliases-package: com.itheima.mp.domain.po # åˆ«åæ‰«æåŒ…
		mapper-locations: "classpath*:/mapper/**/*.xml" # Mapper.xmlæ–‡ä»¶åœ°å€ï¼Œé»˜è®¤å€¼
		configuration:
			map-underscore-to-camel-case: true # æ˜¯å¦å¼€å¯ä¸‹åˆ’çº¿å’Œé©¼å³°çš„æ˜ å°„
			cache-enabled: false # æ˜¯å¦å¼€å¯äºŒçº§ç¼“å­˜
		global-config:
			db-config:
				id-type: assign_id # idä¸ºé›ªèŠ±ç®—æ³•ç”Ÿæˆ
				update-strategy: not_null # æ›´æ–°ç­–ç•¥ï¼šåªæ›´æ–°éç©ºå­—æ®µ

mybatis-plus:
  configuration:
    # è¿™ä¸ªé…ç½®ä¼šå°†æ‰§è¡Œçš„sqlæ‰“å°å‡ºæ¥ï¼Œåœ¨å¼€å‘æˆ–æµ‹è¯•çš„æ—¶å€™å¯ä»¥ç”¨
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
```

## 2. æ ¸å¿ƒ

### 2.1 æ¡ä»¶æ„é€ å™¨

![image-20231121173009354](https://img.picgo.net/2023/11/21/image-20231121173009354456ab5bd720f571b.png)

```java
QueryWrapper<User> wrapper = new QueryWrapper<User>()
  	.select("id","username")
  .like("username","o")
  .ge("balance",10000)
```

### 2.2 è‡ªå®šä¹‰ sql

> å°†idåœ¨æŒ‡å®šèŒƒå›´çš„ç”¨æˆ·ï¼ˆä¾‹å¦‚1ã€2ã€4 ï¼‰çš„ä½™é¢æ‰£å‡æŒ‡å®šå€¼

1. åŸºäº Wrapperæ„å»º where æ¡ä»¶

```java
List<Long> ids = List.of(1L, 2L, 4L);
int amount = 200;
// 1.æ„å»ºæ¡ä»¶
LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<User>().in(User::getId, ids);
// 2.è‡ªå®šä¹‰SQLæ–¹æ³•è°ƒç”¨
userMapper.updateBalanceByIds(wrapper, amount);
```

2. åœ¨mapperæ–¹æ³•å‚æ•°ä¸­ç”¨Paramæ³¨è§£å£°æ˜wrapperå˜é‡åç§°ï¼Œå¿…é¡»æ˜¯ew

```java
void updateBalanceByIds(@Param("ew") LambdaQueryWrapper<User> wrapper, @Param("amount") int amount);

```

3. è‡ªå®šä¹‰SQLï¼Œå¹¶ä½¿ç”¨Wrapperæ¡ä»¶

   ```xml
   <update id="updateBalanceByIds">
     UPDATE tb_user SET balance = balance - #{amount} ${ew.customSqlSegment}
   </update>
   
   ```

   

### 2.3 IService

> ä¿å­˜
>
> save()
>
> åˆ é™¤
>
> remove()
>
> æ›´æ–°
>
> update()
>
> æŸ¥
>
> ä¸€ä¸ª
>
> get()
>
> å¤šä¸ª
>
> list
>
> æ•°é‡
>
> count
>
> åˆ†é¡µ page
>
> lambda

ä½¿ç”¨

```java
//æ¥å£
public interface IUserService extends IService<User> {

}

// å®ç°ç±»
public class UserServiceImpl extends ServiceImpl<UserMappler,User> implements IUserService {}
```



