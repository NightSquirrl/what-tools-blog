<template><div><h2 id="_1-é¡¹ç›®çš„åˆ›å»ºæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_1-é¡¹ç›®çš„åˆ›å»ºæ–¹å¼"><span>1. é¡¹ç›®çš„åˆ›å»ºæ–¹å¼</span></a></h2>
<h3 id="_1-1-åˆ›å»º-uni-app-é¡¹ç›®æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_1-1-åˆ›å»º-uni-app-é¡¹ç›®æ–¹å¼"><span>1.1 åˆ›å»º uni-app é¡¹ç›®æ–¹å¼</span></a></h3>
<p><strong>uni-app æ”¯æŒä¸¤ç§æ–¹å¼åˆ›å»ºé¡¹ç›®ï¼š</strong></p>
<ol>
<li>é€šè¿‡ HBuilderX åˆ›å»ºï¼ˆéœ€å®‰è£… HBuilderX ç¼–è¾‘å™¨ï¼‰</li>
<li>é€šè¿‡å‘½ä»¤è¡Œåˆ›å»ºï¼ˆéœ€å®‰è£… NodeJS ç¯å¢ƒï¼‰</li>
</ol>
<h2 id="_2-hbuilderx-åˆ›å»º-uni-app-é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_2-hbuilderx-åˆ›å»º-uni-app-é¡¹ç›®"><span>2. HBuilderX åˆ›å»º uni-app é¡¹ç›®</span></a></h2>
<ol>
<li>é€šè¿‡å¯è§†åŒ–çš„ hbuilderx çš„ç•Œé¢åˆ›å»ºé¡¹ç›®</li>
</ol>
<figure><img src="https://img.picgo.net/2023/11/24/uniapp_picture_2.609bc84658543df29435596a.png" alt="uniapp_picture_2.609bc846" tabindex="0" loading="lazy"><figcaption>uniapp_picture_2.609bc846</figcaption></figure>
<ol start="2">
<li><strong>å®‰è£… uni-app vue3 ç¼–è¯‘å™¨æ’ä»¶</strong></li>
<li>ç‚¹å‡»å·¥å…·-&gt;å®‰è£…æ’ä»¶,é€‰æ‹© uni-app(vue3)</li>
<li>æ‰“å¼€å¾®ä¿¡å°ç¨‹åºå¼€å‘è€…å·¥å…·,ç‚¹å‡»è®¾ç½®,ç‚¹å‡»å®‰å…¨,æ‰“å¼€æœåŠ¡ç«¯å£</li>
<li>åœ¨ hbuilderx ä¸­ç‚¹å‡»è¿è¡Œ,é€‰æ‹©å¾®ä¿¡å¼€å‘è€…å·¥å…·
<ol>
<li>ç„¶åå°±ä¼šåœ¨å¾®ä¿¡å°ç¨‹åºæ‰“å¼€,å¯ä»¥ç‚¹å‡»è¿è¡Œå®æ—¶æŸ¥çœ‹æˆ‘ä»¬çš„ç•Œé¢</li>
</ol>
</li>
</ol>
<h2 id="_3-å‘½ä»¤è¡Œåˆ›å»º-uni-app-é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_3-å‘½ä»¤è¡Œåˆ›å»º-uni-app-é¡¹ç›®"><span>3. å‘½ä»¤è¡Œåˆ›å»º uni-app é¡¹ç›®</span></a></h2>
<p><strong>ä¼˜åŠ¿</strong></p>
<p>é€šè¿‡å‘½ä»¤è¡Œåˆ›å»º uni-app é¡¹ç›®ï¼Œ<strong>ä¸å¿…ä¾èµ– HBuilderX</strong>ï¼ŒTypeScript ç±»å‹æ”¯æŒå‹å¥½ã€‚</p>
<p><strong>å‘½ä»¤è¡Œåˆ›å»º</strong> <strong>uni-app</strong> <strong>é¡¹ç›®ï¼š</strong></p>
<p>vue3 + ts ç‰ˆ</p>
<h3 id="github" tabindex="-1"><a class="header-anchor" href="#github"><span>github</span></a></h3>
<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre v-pre class="language-bash"><code><span class="token comment"># é€šè¿‡ npx ä» github ä¸‹è½½</span>
npx degit dcloudio/uni-preset-vue<span class="token comment">#vite-ts é¡¹ç›®åç§°</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å›½å†…-gitee" tabindex="-1"><a class="header-anchor" href="#å›½å†…-gitee"><span>å›½å†… gitee</span></a></h3>
<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre v-pre class="language-bash"><code><span class="token comment"># é€šè¿‡ git ä» gitee å…‹éš†ä¸‹è½½</span>
<span class="token function">git</span> clone <span class="token parameter variable">-b</span> vite-ts https://gitee.com/dcloud/uni-preset-vue.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>å¸¸è§é—®é¢˜</p>
<ul>
<li>è¿è¡Œ <code v-pre>npx</code> å‘½ä»¤ä¸‹è½½å¤±è´¥ï¼Œè¯·å°è¯•æ¢æˆ<strong>æ‰‹æœºçƒ­ç‚¹é‡è¯•</strong></li>
<li>æ¢æ‰‹æœºçƒ­ç‚¹ä¾æ—§å¤±è´¥ï¼Œè¯·å°è¯•ä»<a href="https://gitee.com/dcloud/uni-preset-vue/tree/vite-ts/" target="_blank" rel="noopener noreferrer">å›½å†…å¤‡ç”¨åœ°å€ä¸‹è½½<ExternalLinkIcon/></a></li>
<li>åœ¨ <code v-pre>manifest.json</code> æ–‡ä»¶æ·»åŠ  <a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener noreferrer">å°ç¨‹åº AppID<ExternalLinkIcon/></a> ç”¨äºçœŸæœºé¢„è§ˆ</li>
<li>è¿è¡Œ <code v-pre>npx</code> å‘½ä»¤éœ€ä¾èµ– NodeJS ç¯å¢ƒï¼Œ<a href="https://nodejs.org/zh-cn" target="_blank" rel="noopener noreferrer">NodeJS ä¸‹è½½åœ°å€<ExternalLinkIcon/></a></li>
<li>è¿è¡Œ <code v-pre>git</code> å‘½ä»¤éœ€ä¾èµ– Git ç¯å¢ƒï¼Œ<a href="https://git-scm.com/download/" target="_blank" rel="noopener noreferrer">Git ä¸‹è½½åœ°å€<ExternalLinkIcon/></a></li>
</ul>
</blockquote>
<h2 id="_4-vs-code-å¼€å‘-uni-app-é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_4-vs-code-å¼€å‘-uni-app-é¡¹ç›®"><span>4.  VS Code å¼€å‘ uni-app é¡¹ç›®</span></a></h2>
<h3 id="ä¸ºä»€ä¹ˆé€‰æ‹©-vs-code" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆé€‰æ‹©-vs-code"><span>ä¸ºä»€ä¹ˆé€‰æ‹© VS Codeï¼Ÿ</span></a></h3>
<ul>
<li>VS Code å¯¹ <strong>TS ç±»å‹æ”¯æŒå‹å¥½</strong>ï¼Œå‰ç«¯å¼€å‘è€…<strong>ä¸»æµçš„ç¼–è¾‘å™¨</strong></li>
<li>HbuilderX å¯¹ TS ç±»å‹æ”¯æŒæš‚ä¸å®Œå–„ï¼ŒæœŸå¾…å®˜æ–¹å®Œå–„ ğŸ‘€</li>
</ul>
<h3 id="ç”¨-vs-code-å¼€å‘é…ç½®" tabindex="-1"><a class="header-anchor" href="#ç”¨-vs-code-å¼€å‘é…ç½®"><span>ç”¨ VS Code å¼€å‘é…ç½®</span></a></h3>
<p>é¡¹ç›®é‡‡ç”¨ Vue3 + TS å¼€å‘ uni-app é¡¹ç›®ï¼Œæ‰€ä»¥éœ€è¦åˆ†åˆ«å®‰è£… Vue3 + TS æ’ä»¶ å’Œ uni-app æ’ä»¶ã€‚</p>
<h4 id="å®‰è£…-vue3-ts-æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-vue3-ts-æ’ä»¶"><span>å®‰è£… Vue3 + TS æ’ä»¶</span></a></h4>
<blockquote>
<p>æ³¨æ„äº‹é¡¹</p>
<p>æ²¡å¼€å‘è¿‡ Vue3 + TS é¡¹ç›®çš„å°ä¼™ä¼´æ³¨æ„ï¼Œéœ€è¦å…ˆå®‰è£… Vue3 å’Œ TS çš„æ’ä»¶ï¼Œå¹¶å®Œæˆä»¥ä¸‹é…ç½® ğŸ‘‡</p>
<ul>
<li>å®‰è£… <a href="https://marketplace.visualstudio.com/items?itemName=Vue.volar" target="_blank" rel="noopener noreferrer">Vue Language Features (Volar)<ExternalLinkIcon/></a> ï¼šVue3 è¯­æ³•æç¤ºæ’ä»¶</li>
<li>å®‰è£… <a href="https://marketplace.visualstudio.com/items?itemName=Vue.vscode-typescript-vue-plugin" target="_blank" rel="noopener noreferrer">TypeScript Vue Plugin (Volar)<ExternalLinkIcon/></a> ï¼šVue3 çš„ TS æ’ä»¶</li>
<li><strong>å·¥ä½œåŒºç¦ç”¨</strong> Vetur æ’ä»¶(Vue2 æ’ä»¶å’Œ Vue3 æ’ä»¶å†²çª)</li>
<li><strong>å·¥ä½œåŒºç¦ç”¨</strong> @builtin typescript æ’ä»¶ï¼ˆç¦ç”¨åè‡ªåŠ¨å¼€å¯ Vue3 çš„ TS æ‰˜ç®¡æ¨¡å¼ï¼‰</li>
</ul>
<p><a href="https://cn.vuejs.org/guide/typescript/overview.html#ide-support" target="_blank" rel="noopener noreferrer">æŸ¥çœ‹ Vue3 å®˜æ–¹æ–‡æ¡£<ExternalLinkIcon/></a></p>
</blockquote>
<figure><img src="https://img.picgo.net/2023/11/24/uniapp_vscode_setting.75574ba64ddb340202c90793.png" alt="uniapp_vscode_setting.75574ba6" tabindex="0" loading="lazy"><figcaption>uniapp_vscode_setting.75574ba6</figcaption></figure>
<h4 id="å®‰è£…-uni-app-æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-uni-app-æ’ä»¶"><span>å®‰è£… uni-app æ’ä»¶</span></a></h4>
<ul>
<li>ğŸ‘‰ å®‰è£… uni-app å¼€å‘æ’ä»¶
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=mrmaoddxxaa.create-uniapp-view" target="_blank" rel="noopener noreferrer">uni-create-view<ExternalLinkIcon/></a> ï¼šå¿«é€Ÿåˆ›å»º uni-app é¡µé¢</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=uni-helper.uni-helper-vscode" target="_blank" rel="noopener noreferrer">uni-helper<ExternalLinkIcon/></a> ï¼šuni-app ä»£ç æç¤º</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=evils.uniapp-vscode" target="_blank" rel="noopener noreferrer">uniapp å°ç¨‹åºæ‰©å±•<ExternalLinkIcon/></a> ï¼šé¼ æ ‡æ‚¬åœæŸ¥æ–‡æ¡£</li>
</ul>
</li>
<li>ğŸ‘‰ TS ç±»å‹æ ¡éªŒ
<ul>
<li>å®‰è£… <strong>ç±»å‹å£°æ˜æ–‡ä»¶</strong> <code v-pre>pnpm i -D miniprogram-api-typings @uni-helper/uni-app-types</code></li>
<li>é…ç½® <code v-pre>tsconfig.json</code></li>
</ul>
</li>
<li>ğŸ‘‰ JSON æ³¨é‡Šé—®é¢˜
<ul>
<li>è®¾ç½®æ–‡ä»¶å…³è”ï¼ŒæŠŠ <code v-pre>manifest.json</code> å’Œ <code v-pre>pages.json</code> è®¾ç½®ä¸º <code v-pre>jsonc</code></li>
</ul>
</li>
</ul>
<p><code v-pre>tsconfig.json</code> å‚è€ƒ</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre v-pre class="language-json"><code><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token string">"@vue/tsconfig/tsconfig.json"</span><span class="token punctuation">,</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"sourceMap"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"."</span><span class="token punctuation">,</span>
    <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"@/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./src/*"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"esnext"</span><span class="token punctuation">,</span> <span class="token string">"dom"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// ç±»å‹å£°æ˜æ–‡ä»¶</span>
    <span class="token property">"types"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"@dcloudio/types"</span><span class="token punctuation">,</span> <span class="token comment">// uni-app API ç±»å‹</span>
      <span class="token string">"miniprogram-api-typings"</span><span class="token punctuation">,</span> <span class="token comment">// åŸç”Ÿå¾®ä¿¡å°ç¨‹åºç±»å‹</span>
      <span class="token string">"@uni-helper/uni-app-types"</span> <span class="token comment">// uni-app ç»„ä»¶ç±»å‹</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// vue ç¼–è¯‘å™¨ç±»å‹ï¼Œæ ¡éªŒæ ‡ç­¾ç±»å‹</span>
  <span class="token property">"vueCompilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// åŸé…ç½® `experimentalRuntimeMode` ç°è°ƒæ•´ä¸º `nativeTags`</span>
    <span class="token property">"nativeTags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"block"</span><span class="token punctuation">,</span> <span class="token string">"component"</span><span class="token punctuation">,</span> <span class="token string">"template"</span><span class="token punctuation">,</span> <span class="token string">"slot"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"include"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src/**/*.ts"</span><span class="token punctuation">,</span> <span class="token string">"src/**/*.d.ts"</span><span class="token punctuation">,</span> <span class="token string">"src/**/*.tsx"</span><span class="token punctuation">,</span> <span class="token string">"src/**/*.vue"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å·¥ä½œåŒºè®¾ç½®å‚è€ƒ</strong></p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre v-pre class="language-json"><code><span class="token comment">// .vscode/settings.json</span>
<span class="token punctuation">{</span>
  <span class="token comment">// åœ¨ä¿å­˜æ—¶æ ¼å¼åŒ–æ–‡ä»¶</span>
  <span class="token property">"editor.formatOnSave"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// æ–‡ä»¶æ ¼å¼åŒ–é…ç½®</span>
  <span class="token property">"[json]"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"editor.defaultFormatter"</span><span class="token operator">:</span> <span class="token string">"esbenp.prettier-vscode"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// é…ç½®è¯­è¨€çš„æ–‡ä»¶å…³è”</span>
  <span class="token property">"files.associations"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"pages.json"</span><span class="token operator">:</span> <span class="token string">"jsonc"</span><span class="token punctuation">,</span> <span class="token comment">// pages.json å¯ä»¥å†™æ³¨é‡Š</span>
    <span class="token property">"manifest.json"</span><span class="token operator">:</span> <span class="token string">"jsonc"</span> <span class="token comment">// manifest.json å¯ä»¥å†™æ³¨é‡Š</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>ç‰ˆæœ¬å‡çº§</p>
<ul>
<li>åŸä¾èµ– <code v-pre>@types/wechat-miniprogram</code> ç°è°ƒæ•´ä¸º <a href="https://github.com/wechat-miniprogram/api-typings" target="_blank" rel="noopener noreferrer">miniprogram-api-typings<ExternalLinkIcon/></a>ã€‚</li>
<li>åŸé…ç½® <code v-pre>experimentalRuntimeMode</code> ç°è°ƒæ•´ä¸º <code v-pre>nativeTags</code>ã€‚</li>
</ul>
</blockquote>
<p>è¿™ä¸€æ­¥å¤„ç†å¾ˆå…³é”®ï¼Œå¦åˆ™ TS é¡¹ç›®æ— æ³•æ ¡éªŒç»„ä»¶å±æ€§ç±»å‹ã€‚</p>
<h2 id="_5-è§£è¯»-pages-json" tabindex="-1"><a class="header-anchor" href="#_5-è§£è¯»-pages-json"><span>5. è§£è¯» pages.json</span></a></h2>
<p>ç”¨äºé…ç½®é¡µé¢è·¯ç”±ã€å¯¼èˆªæ ã€tabBar ç­‰é¡µé¢ç±»ä¿¡æ¯</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre v-pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// é¡µé¢è·¯ç”±</span>
  <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>
      <span class="token comment">// é¡µé¢æ ·å¼é…ç½®</span>
      <span class="token property">"style"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"é¦–é¡µ"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"pages/my/my"</span><span class="token punctuation">,</span>
      <span class="token property">"style"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"æˆ‘çš„"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// å…¨å±€æ ·å¼é…ç½®</span>
  <span class="token property">"globalStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"navigationBarTextStyle"</span><span class="token operator">:</span> <span class="token string">"white"</span><span class="token punctuation">,</span>
    <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"uni-app"</span><span class="token punctuation">,</span>
    <span class="token property">"navigationBarBackgroundColor"</span><span class="token operator">:</span> <span class="token string">"#27BA9B"</span><span class="token punctuation">,</span>
    <span class="token property">"backgroundColor"</span><span class="token operator">:</span> <span class="token string">"#F8F8F8"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// tabBar é…ç½®</span>
  <span class="token property">"tabBar"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"selectedColor"</span><span class="token operator">:</span> <span class="token string">"#27BA9B"</span><span class="token punctuation">,</span>
    <span class="token property">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>
        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"é¦–é¡µ"</span><span class="token punctuation">,</span>
        <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"static/tabs/home_default.png"</span><span class="token punctuation">,</span>
        <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"static/tabs/home_selected.png"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/my/my"</span><span class="token punctuation">,</span>
        <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"æˆ‘çš„"</span><span class="token punctuation">,</span>
        <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"static/tabs/user_default.png"</span><span class="token punctuation">,</span>
        <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"static/tabs/user_selected.png"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-uni-app-å’ŒåŸç”Ÿå°ç¨‹åºå¼€å‘åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_6-uni-app-å’ŒåŸç”Ÿå°ç¨‹åºå¼€å‘åŒºåˆ«"><span>6. uni-app å’ŒåŸç”Ÿå°ç¨‹åºå¼€å‘åŒºåˆ«</span></a></h2>
<h3 id="å¼€å‘åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#å¼€å‘åŒºåˆ«"><span>å¼€å‘åŒºåˆ«</span></a></h3>
<p>uni-app é¡¹ç›®æ¯ä¸ªé¡µé¢æ˜¯ä¸€ä¸ª <code v-pre>.vue</code> æ–‡ä»¶ï¼Œæ•°æ®ç»‘å®šåŠäº‹ä»¶å¤„ç†åŒ <code v-pre>Vue.js</code> è§„èŒƒï¼š</p>
<ol>
<li>å±æ€§ç»‘å®š <code v-pre>src=&quot;{ { url }}&quot;</code> å‡çº§æˆ <code v-pre>:src=&quot;url&quot;</code></li>
<li>äº‹ä»¶ç»‘å®š <code v-pre>bindtap=&quot;eventName&quot;</code> å‡çº§æˆ <code v-pre>@tap=&quot;eventName&quot;</code>ï¼Œ<strong>æ”¯æŒï¼ˆï¼‰ä¼ å‚</strong></li>
<li>æ”¯æŒ Vue å¸¸ç”¨<strong>æŒ‡ä»¤</strong> <code v-pre>v-for</code>ã€<code v-pre>v-if</code>ã€<code v-pre>v-show</code>ã€<code v-pre>v-model</code> ç­‰</li>
</ol>
<h3 id="å…¶ä»–åŒºåˆ«è¡¥å……" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–åŒºåˆ«è¡¥å……"><span>å…¶ä»–åŒºåˆ«è¡¥å……</span></a></h3>
<ol>
<li>è°ƒç”¨æ¥å£èƒ½åŠ›ï¼Œ<strong>å»ºè®®å‰ç¼€</strong> <code v-pre>wx</code> æ›¿æ¢ä¸º <code v-pre>uni</code> ï¼Œå…»æˆå¥½ä¹ æƒ¯ï¼Œ<strong>æ”¯æŒå¤šç«¯å¼€å‘</strong>ã€‚</li>
<li><code v-pre>&lt;style&gt;</code> é¡µé¢æ ·å¼ä¸éœ€è¦å†™ <code v-pre>scoped</code>ï¼Œå°ç¨‹åºæ˜¯å¤šé¡µé¢åº”ç”¨ï¼Œ<strong>é¡µé¢æ ·å¼è‡ªåŠ¨éš”ç¦»</strong>ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸåˆ†ä¸‰éƒ¨åˆ†</strong>ï¼šåº”ç”¨ç”Ÿå‘½å‘¨æœŸ(å°ç¨‹åº)ï¼Œé¡µé¢ç”Ÿå‘½å‘¨æœŸ(å°ç¨‹åº)ï¼Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸ(Vue)</li>
</ol>
<h2 id="_7-ç»„ä»¶åº“" tabindex="-1"><a class="header-anchor" href="#_7-ç»„ä»¶åº“"><span>7. ç»„ä»¶åº“</span></a></h2>
<p>å®‰è£… <a href="https://uniapp.dcloud.net.cn/component/uniui/quickstart.html#npm%E5%AE%89%E8%A3%85" target="_blank" rel="noopener noreferrer">uni-ui ç»„ä»¶åº“<ExternalLinkIcon/></a></p>
<div class="language-bahs line-numbers-mode" data-ext="bahs" data-title="bahs"><pre v-pre class="language-bahs"><code>pnpm i @dcloudio/uni-ui
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é…ç½®è‡ªåŠ¨å¯¼å…¥ç»„ä»¶</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre v-pre class="language-json"><code><span class="token comment">// pages.json</span>
<span class="token punctuation">{</span>
  <span class="token comment">// ç»„ä»¶è‡ªåŠ¨å¯¼å…¥</span>
  <span class="token property">"easycom"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"autoscan"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"custom"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
+      <span class="token comment">// uni-ui è§„åˆ™å¦‚ä¸‹é…ç½®  </span>
+      <span class="token property">"^uni-(.*)"</span><span class="token operator">:</span> <span class="token string">"@dcloudio/uni-ui/lib/uni-$1/uni-$1.vue"</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// â€¦çœç•¥</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å®‰è£…ç±»å‹å£°æ˜æ–‡ä»¶</strong></p>
<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> i <span class="token parameter variable">-D</span> @uni-helper/uni-ui-types
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>é…ç½®ç±»å‹å£°æ˜æ–‡ä»¶</strong></p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre v-pre class="language-json"><code><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token property">"types"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"@dcloudio/types"</span><span class="token punctuation">,</span> <span class="token comment">// uni-app API ç±»å‹</span>
      <span class="token string">"miniprogram-api-typings"</span><span class="token punctuation">,</span> <span class="token comment">// åŸç”Ÿå¾®ä¿¡å°ç¨‹åºç±»å‹</span>
      <span class="token string">"@uni-helper/uni-app-types"</span><span class="token punctuation">,</span> <span class="token comment">// uni-app ç»„ä»¶ç±»å‹</span>
+      <span class="token string">"@uni-helper/uni-ui-types"</span> <span class="token comment">// uni-ui ç»„ä»¶ç±»å‹  </span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// vue ç¼–è¯‘å™¨ç±»å‹ï¼Œæ ¡éªŒæ ‡ç­¾ç±»å‹</span>
  <span class="token property">"vueCompilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"nativeTags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"block"</span><span class="token punctuation">,</span> <span class="token string">"component"</span><span class="token punctuation">,</span> <span class="token string">"template"</span><span class="token punctuation">,</span> <span class="token string">"slot"</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-å°ç¨‹åºç«¯-pinia-æŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#_8-å°ç¨‹åºç«¯-pinia-æŒä¹…åŒ–"><span>8. å°ç¨‹åºç«¯ Pinia æŒä¹…åŒ–</span></a></h2>
<p>è¯´æ˜ï¼š<code v-pre>Pinia</code> ç”¨æ³•ä¸ <code v-pre>Vue3</code> é¡¹ç›®å®Œå…¨ä¸€è‡´ï¼Œ<code v-pre>uni-app</code> é¡¹ç›®ä»…éœ€è§£å†³<strong>æŒä¹…åŒ–æ’ä»¶å…¼å®¹æ€§</strong>é—®é¢˜ã€‚</p>
<h3 id="æŒä¹…åŒ–å­˜å‚¨æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#æŒä¹…åŒ–å­˜å‚¨æ’ä»¶"><span>æŒä¹…åŒ–å­˜å‚¨æ’ä»¶</span></a></h3>
<p>å®‰è£…æŒä¹…åŒ–å­˜å‚¨æ’ä»¶ï¼š <a href="https://prazdevs.github.io/pinia-plugin-persistedstate/zh/guide/config.html#storage" target="_blank" rel="noopener noreferrer">pinia-plugin-persistedstate<ExternalLinkIcon/></a></p>
<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> i pinia-plugin-persistedstate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ’ä»¶é»˜è®¤ä½¿ç”¨ <code v-pre>localStorage</code> å®ç°æŒä¹…åŒ–ï¼Œå°ç¨‹åºç«¯ä¸å…¼å®¹ï¼Œéœ€è¦æ›¿æ¢æŒä¹…åŒ– APIã€‚</p>
<blockquote>
<p>Stores/modules/member.ts</p>
</blockquote>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token comment">// å®šä¹‰ Store</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useMemberStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span>
  <span class="token string">'member'</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¼šå‘˜ä¿¡æ¯</span>
    <span class="token keyword">const</span> profile <span class="token operator">=</span> ref<span class="token operator">&lt;</span>any<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// ä¿å­˜ä¼šå‘˜ä¿¡æ¯ï¼Œç™»å½•æ—¶ä½¿ç”¨</span>
    <span class="token keyword">const</span> <span class="token function-variable function">setProfile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">val</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      profile<span class="token punctuation">.</span>value <span class="token operator">=</span> val
    <span class="token punctuation">}</span>

    <span class="token comment">// æ¸…ç†ä¼šå‘˜ä¿¡æ¯ï¼Œé€€å‡ºæ—¶ä½¿ç”¨</span>
    <span class="token keyword">const</span> <span class="token function-variable function">clearProfile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      profile<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// è®°å¾— return</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      profile<span class="token punctuation">,</span>
      setProfile<span class="token punctuation">,</span>
      clearProfile<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// TODO: æŒä¹…åŒ–</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">persist</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>Stores/index/ts</p>
</blockquote>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">import</span> persist <span class="token keyword">from</span> <span class="token string">'pinia-plugin-persistedstate'</span>

<span class="token comment">// åˆ›å»º pinia å®ä¾‹</span>
<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨æ’ä»¶</span>
pinia<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>persist<span class="token punctuation">)</span>

<span class="token comment">// é»˜è®¤å¯¼å‡ºï¼Œç»™ main.ts ä½¿ç”¨</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> pinia

<span class="token comment">// æ¨¡å—ç»Ÿä¸€å¯¼å‡º</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./modules/member'</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>main.ts</p>
</blockquote>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createSSRApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> pinia <span class="token keyword">from</span> <span class="token string">'./stores'</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createSSRApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¤šç«¯å…¼å®¹" tabindex="-1"><a class="header-anchor" href="#å¤šç«¯å…¼å®¹"><span>å¤šç«¯å…¼å®¹</span></a></h3>
<p><strong>ç½‘é¡µç«¯æŒä¹…åŒ– API</strong></p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token comment">// ç½‘é¡µç«¯API</span>
localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¤šç«¯æŒä¹…åŒ– API</strong></p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token comment">// å…¼å®¹å¤šç«¯API</span>
uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å‚è€ƒä»£ç </strong></p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code>
<span class="token comment">// stores/modules/member.ts</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useMemberStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span>
  <span class="token string">'member'</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">//â€¦çœç•¥</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// é…ç½®æŒä¹…åŒ–</span>
    <span class="token literal-property property">persist</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// è°ƒæ•´ä¸ºå…¼å®¹å¤šç«¯çš„API</span>
      <span class="token literal-property property">storage</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">setItem</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">getItem</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-uni-request-è¯·æ±‚å°è£…" tabindex="-1"><a class="header-anchor" href="#_9-uni-request-è¯·æ±‚å°è£…"><span>9. uni.request è¯·æ±‚å°è£…</span></a></h2>
<h3 id="è¯·æ±‚å’Œä¸Šä¼ æ–‡ä»¶æ‹¦æˆªå™¨" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚å’Œä¸Šä¼ æ–‡ä»¶æ‹¦æˆªå™¨"><span>è¯·æ±‚å’Œä¸Šä¼ æ–‡ä»¶æ‹¦æˆªå™¨</span></a></h3>
<blockquote>
<p>å®ç°éœ€æ±‚</p>
<ol>
<li>æ‹¼æ¥åŸºç¡€åœ°å€</li>
<li>è®¾ç½®è¶…æ—¶æ—¶é—´</li>
<li>æ·»åŠ è¯·æ±‚å¤´æ ‡è¯†</li>
<li>æ·»åŠ  token</li>
</ol>
</blockquote>
<p>å‚è€ƒä»£ç </p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token comment">// src/utils/http.ts</span>

<span class="token comment">// è¯·æ±‚åŸºåœ°å€</span>
<span class="token keyword">const</span> baseURL <span class="token operator">=</span> <span class="token string">'https://pcapi-xiaotuxian-front-devtest.itheima.net'</span>

<span class="token comment">// æ‹¦æˆªå™¨é…ç½®</span>
<span class="token keyword">const</span> httpInterceptor <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ‹¦æˆªå‰è§¦å‘</span>
  <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">options</span><span class="token operator">:</span> UniApp<span class="token punctuation">.</span>RequestOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. é http å¼€å¤´éœ€æ‹¼æ¥åœ°å€</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      options<span class="token punctuation">.</span>url <span class="token operator">=</span> baseURL <span class="token operator">+</span> options<span class="token punctuation">.</span>url
    <span class="token punctuation">}</span>
    <span class="token comment">// 2. è¯·æ±‚è¶…æ—¶</span>
    options<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">10000</span>
    <span class="token comment">// 3. æ·»åŠ å°ç¨‹åºç«¯è¯·æ±‚å¤´æ ‡è¯†</span>
    options<span class="token punctuation">.</span>header <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'source-client'</span><span class="token operator">:</span> <span class="token string">'miniapp'</span><span class="token punctuation">,</span>
      <span class="token operator">...</span>options<span class="token punctuation">.</span>header<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 4. æ·»åŠ  token è¯·æ±‚å¤´æ ‡è¯†</span>
    <span class="token keyword">const</span> memberStore <span class="token operator">=</span> <span class="token function">useMemberStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> memberStore<span class="token punctuation">.</span>profile<span class="token operator">?.</span>token
    <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      options<span class="token punctuation">.</span>header<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> token
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ‹¦æˆª request è¯·æ±‚</span>
uni<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span> httpInterceptor<span class="token punctuation">)</span>
<span class="token comment">// æ‹¦æˆª uploadFile æ–‡ä»¶ä¸Šä¼ </span>
uni<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token string">'uploadFile'</span><span class="token punctuation">,</span> httpInterceptor<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>å¸¸è§é—®é¢˜</p>
<p><strong>é—®:</strong> ä¸ºä»€ä¹ˆç”¨æ‰‹æœºé¢„è§ˆæ²¡æœ‰æ•°æ®ï¼Ÿ</p>
<p><strong>ç­”:</strong> å¾®ä¿¡å°ç¨‹åºç«¯ï¼Œéœ€ç™»å½• <a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener noreferrer">å¾®ä¿¡å…¬ä¼—å¹³å°<ExternalLinkIcon/></a> é…ç½®ä»¥ä¸‹åœ°å€ä¸ºåˆæ³•åŸŸå ğŸ‘‡</p>
<div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre v-pre class="language-text"><code>https://pcapi-xiaotuxian-front-devtest.itheima.net
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote>
<h3 id="å°è£…-promise-è¯·æ±‚å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å°è£…-promise-è¯·æ±‚å‡½æ•°"><span>å°è£… Promise è¯·æ±‚å‡½æ•°</span></a></h3>
<p>å®ç°éœ€æ±‚</p>
<ol>
<li>è¿”å› Promise å¯¹è±¡ï¼Œç”¨äºå¤„ç†è¿”å›å€¼ç±»å‹</li>
<li>æˆåŠŸ resolve
<ol>
<li>æå–æ•°æ®</li>
<li>æ·»åŠ æ³›å‹</li>
</ol>
</li>
<li>å¤±è´¥ reject
<ol>
<li>401 é”™è¯¯</li>
<li>å…¶ä»–é”™è¯¯</li>
<li>ç½‘ç»œé”™è¯¯</li>
</ol>
</li>
</ol>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * è¯·æ±‚å‡½æ•°
 * <span class="token keyword">@param</span>  <span class="token parameter">UniApp<span class="token punctuation">.</span>RequestOptions</span>
 * <span class="token keyword">@returns</span> Promise
 *  1. è¿”å› Promise å¯¹è±¡ï¼Œç”¨äºå¤„ç†è¿”å›å€¼ç±»å‹
 *  2. è·å–æ•°æ®æˆåŠŸ
 *    2.1 æå–æ ¸å¿ƒæ•°æ® res.data
 *    2.2 æ·»åŠ ç±»å‹ï¼Œæ”¯æŒæ³›å‹
 *  3. è·å–æ•°æ®å¤±è´¥
 *    3.1 401é”™è¯¯  -> æ¸…ç†ç”¨æˆ·ä¿¡æ¯ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
 *    3.2 å…¶ä»–é”™è¯¯ -> æ ¹æ®åç«¯é”™è¯¯ä¿¡æ¯è½»æç¤º
 *    3.3 ç½‘ç»œé”™è¯¯ -> æç¤ºç”¨æˆ·æ¢ç½‘ç»œ
 */</span>
type Data<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> string
  <span class="token literal-property property">msg</span><span class="token operator">:</span> string
  <span class="token literal-property property">result</span><span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2.2 æ·»åŠ ç±»å‹ï¼Œæ”¯æŒæ³›å‹</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">options</span><span class="token operator">:</span> UniApp<span class="token punctuation">.</span>RequestOptions</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. è¿”å› Promise å¯¹è±¡</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token operator">&lt;</span>Data<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">>></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>options<span class="token punctuation">,</span>
      <span class="token comment">// å“åº”æˆåŠŸ</span>
      <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// çŠ¶æ€ç  2xxï¼Œå‚è€ƒ axios çš„è®¾è®¡</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>statusCode <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 2.1 æå–æ ¸å¿ƒæ•°æ® res.data</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token keyword">as</span> Data<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 401é”™è¯¯  -> æ¸…ç†ç”¨æˆ·ä¿¡æ¯ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ</span>
          <span class="token keyword">const</span> memberStore <span class="token operator">=</span> <span class="token function">useMemberStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          memberStore<span class="token punctuation">.</span><span class="token function">clearProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/pages/login/login'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// å…¶ä»–é”™è¯¯ -> æ ¹æ®åç«¯é”™è¯¯ä¿¡æ¯è½»æç¤º</span>
          uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token keyword">as</span> Data<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">.</span>msg <span class="token operator">||</span> <span class="token string">'è¯·æ±‚é”™è¯¯'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// å“åº”å¤±è´¥</span>
      <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'ç½‘ç»œé”™è¯¯ï¼Œæ¢ä¸ªç½‘ç»œè¯•è¯•'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_10-ç»Ÿä¸€ä»£ç é£æ ¼" tabindex="-1"><a class="header-anchor" href="#_10-ç»Ÿä¸€ä»£ç é£æ ¼"><span>10. ç»Ÿä¸€ä»£ç é£æ ¼</span></a></h2>
<ul>
<li>å®‰è£… <code v-pre>eslint</code> + <code v-pre>prettier</code></li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> i <span class="token parameter variable">-D</span> eslint prettier eslint-plugin-vue @vue/eslint-config-prettier @vue/eslint-config-typescript @rushstack/eslint-patch @vue/tsconfig
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li>æ–°å»º <code v-pre>.eslintrc.cjs</code> æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹ <code v-pre>eslint</code> é…ç½®</li>
</ul>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token comment">/* eslint-env node */</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@rushstack/eslint-patch/modern-module-resolution'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'plugin:vue/vue3-essential'</span><span class="token punctuation">,</span>
    <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'@vue/eslint-config-typescript'</span><span class="token punctuation">,</span>
    <span class="token string">'@vue/eslint-config-prettier'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// å°ç¨‹åºå…¨å±€å˜é‡</span>
  <span class="token literal-property property">globals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">uni</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">wx</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">WechatMiniprogram</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">getCurrentPages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">getApp</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">UniApp</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">UniHelper</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">App</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">Page</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">Component</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">AnyObject</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token string">'latest'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'prettier/prettier'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'warn'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">singleQuote</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">printWidth</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token literal-property property">trailingComma</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">endOfLine</span><span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'vue/multi-word-component-names'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'off'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'vue/no-setup-props-destructure'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'off'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'vue/no-deprecated-html-element-is'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'off'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">'@typescript-eslint/no-unused-vars'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'off'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>é…ç½® <code v-pre>package.json</code></li>
</ul>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre v-pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"script"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... çœç•¥ ...</span>
    <span class="token property">"lint"</span><span class="token operator">:</span> <span class="token string">"eslint . --ext .vue,.js,.ts --fix --ignore-path .gitignore"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>è¿è¡Œ</li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> lint
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="git-å·¥ä½œæµè§„èŒƒ-husky" tabindex="-1"><a class="header-anchor" href="#git-å·¥ä½œæµè§„èŒƒ-husky"><span>Git å·¥ä½œæµè§„èŒƒ --- husky</span></a></h3>
<ul>
<li>å®‰è£…å¹¶åˆå§‹åŒ– <code v-pre>husky</code></li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> dlx husky-init

npx husky-init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>å®‰è£… <code v-pre>lint-staged</code></li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre v-pre class="language-bash"><code><span class="token function">pnpm</span> i <span class="token parameter variable">-D</span> lint-staged
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li>é…ç½® <code v-pre>package.json</code></li>
</ul>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre v-pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"script"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... çœç•¥ ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"lint-staged"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"*.{vue,ts,js}"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"eslint --fix"</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>ä¿®æ”¹ <code v-pre>.husky/pre-commit</code> æ–‡ä»¶</li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre v-pre class="language-bash"><code>- <span class="token function">npm</span> <span class="token builtin class-name">test</span>   
+ <span class="token function">npm</span> run lint-staged  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-å®‰å…¨åŒºåŸŸ" tabindex="-1"><a class="header-anchor" href="#_11-å®‰å…¨åŒºåŸŸ"><span>11. å®‰å…¨åŒºåŸŸ</span></a></h2>
<p>ä¸åŒæ‰‹æœºçš„å®‰å…¨åŒºåŸŸä¸åŒï¼Œé€‚é…å®‰å…¨åŒºåŸŸèƒ½é˜²æ­¢é¡µé¢é‡è¦å†…å®¹è¢«é®æŒ¡ã€‚</p>
<p>å¯é€šè¿‡ <code v-pre>uni.getSystemInfoSync()</code> è·å–å±å¹•è¾¹ç•Œåˆ°å®‰å…¨åŒºçš„è·ç¦»ã€‚</p>
<figure><img src="https://img.picgo.net/2023/11/24/home_picture_2.89dbf50654a7fda1fc332c6b.png" alt="å®‰å…¨åŒºåŸŸ" tabindex="0" loading="lazy"><figcaption>å®‰å…¨åŒºåŸŸ</figcaption></figure>
<p><strong>è‡ªå®šä¹‰å¯¼èˆªé…ç½®</strong></p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre v-pre class="language-json"><code><span class="token comment">// src/pages.json</span>
<span class="token punctuation">{</span>
  <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>
  <span class="token property">"style"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"navigationStyle"</span><span class="token operator">:</span> <span class="token string">"custom"</span><span class="token punctuation">,</span> <span class="token comment">// éšè—é»˜è®¤å¯¼èˆª</span>
    <span class="token property">"navigationBarTextStyle"</span><span class="token operator">:</span> <span class="token string">"white"</span><span class="token punctuation">,</span>
    <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"é¦–é¡µ"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç»„ä»¶å®‰å…¨åŒºé€‚é…</strong></p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> src<span class="token operator">/</span>pages<span class="token operator">/</span>index<span class="token operator">/</span>componets<span class="token operator">/</span>CustomNavbar<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">></span>
<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token comment">// è·å–å±å¹•è¾¹ç•Œåˆ°å®‰å…¨åŒºåŸŸè·ç¦»</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> safeAreaInsets <span class="token punctuation">}</span> <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

<span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> é¡¶éƒ¨å ä½ <span class="token operator">--</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"navbar"</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">"{ paddingTop: safeAreaInsets?.top + 'px' }"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">...</span>çœç•¥ <span class="token operator">--</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_12-çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_12-çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•"><span>12. çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•</span></a></h2>
<p>å®ç°æµç¨‹</p>
<blockquote>
<p>çˆ¶ç»„ä»¶ä¼ é€’å‚æ•° ref=&quot;child&quot;</p>
<p>è·å–ç»„ä»¶çš„å®ä¾‹ç±»å‹ä¸»è¦æ˜¯ ts ä½¿ç”¨</p>
<p>çˆ¶ç»„ä»¶è°ƒç”¨</p>
<p>Child.value.å­æ–¹æ³•</p>
<p>å­ç»„ä»¶æš´æ¼æ–¹æ³•</p>
</blockquote>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code>
<span class="token keyword">export</span> type types <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span>  å­ç»„ä»¶<span class="token operator">></span>


child<span class="token punctuation">.</span>value<span class="token punctuation">.</span>æš´æ¼çš„æ–¹æ³•çš„ key

<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  æš´éœ²æ–¹æ³•çš„ key<span class="token operator">:</span>å…·ä½“çš„æš´æ¼æ–¹æ³•
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_13-ä¸‹æ‹‰åˆ·æ–°" tabindex="-1"><a class="header-anchor" href="#_13-ä¸‹æ‹‰åˆ·æ–°"><span>13. ä¸‹æ‹‰åˆ·æ–°</span></a></h2>
<p>åŸºäº <code v-pre>scroll-view</code> ç»„ä»¶å®ç°ä¸‹æ‹‰åˆ·æ–°ï¼Œéœ€è¦é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥å®ç°ä¸‹æ‹‰åˆ·æ–°çš„åŠŸèƒ½ã€‚</p>
<ul>
<li>é…ç½® <code v-pre>refresher-enabled</code> å±æ€§ï¼Œå¼€å¯ä¸‹æ‹‰åˆ·æ–°äº¤äº’</li>
<li>ç›‘å¬ <code v-pre>@refresherrefresh</code> äº‹ä»¶ï¼Œåˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ‰§è¡Œäº†ä¸‹æ‹‰æ“ä½œ</li>
<li>é…ç½® <code v-pre>refresher-triggered</code> å±æ€§ï¼Œå…³é—­ä¸‹æ‹‰çŠ¶æ€</li>
</ul>
<h2 id="_14-éª¨æ¶å±" tabindex="-1"><a class="header-anchor" href="#_14-éª¨æ¶å±"><span>14. éª¨æ¶å±</span></a></h2>
<p>åœ¨å¾®ä¿¡å°ç¨‹åºçš„æ¨¡æ‹Ÿå™¨ç•Œé¢ç‚¹å‡»é¡µé¢ä¿¡æ¯</p>
<figure><img src="https://img.picgo.net/2023/11/24/image-20231124213814562917856bb6661864e.png" alt="image-20231124213814562" tabindex="0" loading="lazy"><figcaption>image-20231124213814562</figcaption></figure>
<figure><img src="https://img.picgo.net/2023/11/24/image-202311242138293702604bbff0de03b52.png" alt="image-20231124213829370" tabindex="0" loading="lazy"><figcaption>image-20231124213829370</figcaption></figure>
<p>å°†ç”Ÿæˆçš„ä»£ç è¿›è¡Œä¿®æ”¹ vue å³å¯</p>
<h2 id="_15-wx-è·å–ç™»å½•å‡­è¯" tabindex="-1"><a class="header-anchor" href="#_15-wx-è·å–ç™»å½•å‡­è¯"><span>15. WX è·å–ç™»å½•å‡­è¯</span></a></h2>
<p>å‰ç«¯ï¼šè°ƒç”¨ <a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html" target="_blank" rel="noopener noreferrer">wx.login()<ExternalLinkIcon/></a> æ¥å£è·å–ç™»å½•å‡­è¯ï¼ˆcodeï¼‰ã€‚</p>
<h3 id="è·å–æ‰‹æœºå·ç " tabindex="-1"><a class="header-anchor" href="#è·å–æ‰‹æœºå·ç "><span>è·å–æ‰‹æœºå·ç </span></a></h3>
<p>å‡ºäºå®‰å…¨é™åˆ¶ï¼Œå°ç¨‹åºã€è§„å®šã€‘æƒ³è·å–ç”¨æˆ·çš„æ‰‹æœºå·ï¼Œå¿…é¡»ç”±ç”¨æˆ·ä¸»åŠ¨ã€ç‚¹å‡»æŒ‰é’®ã€‘å¹¶ã€å…è®¸ç”³è¯·ã€‘æ‰å¯è·å–åŠ å¯†çš„æ‰‹æœºå·ä¿¡æ¯ã€‚</p>
<p><strong>å‰ç«¯</strong>ï¼šæä¾› <code v-pre>open-type</code> æŒ‰é’®ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è·å–åŠ å¯†çš„æ‰‹æœºå·ä¿¡æ¯ã€‚</p>
<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre v-pre class="language-javascript"><code><span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"button phone"</span> open<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">"getPhoneNumber"</span> @getphonenumber<span class="token operator">=</span><span class="token string">"onGetphonenumber"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>text <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"icon icon-phone"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">></span>
æ‰‹æœºå·å¿«æ·ç™»å½•
  <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_16-åˆ†åŒ…é¢„ä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#_16-åˆ†åŒ…é¢„ä¸‹è½½"><span>16. åˆ†åŒ…é¢„ä¸‹è½½</span></a></h2>
<p>å½“ç”¨æˆ·è¿›å…¥ã€æˆ‘çš„ã€‘é¡µé¢æ—¶ï¼Œç”±æ¡†æ¶è‡ªåŠ¨é¢„ä¸‹è½½ã€ä¼šå‘˜æ¨¡å—ã€‘çš„åˆ†åŒ…ï¼Œæå‡è¿›å…¥åç»­åˆ†åŒ…é¡µé¢æ—¶çš„å¯åŠ¨é€Ÿåº¦ã€‚</p>
<h3 id="æ“ä½œæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#æ“ä½œæ–¹å¼"><span>æ“ä½œæ–¹å¼</span></a></h3>
<p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ä¸“é—¨ç”¨æ¥å­˜å‚¨åˆ†åŒ…çš„é¡µé¢</p>
<p>å¦‚æœå·²ç»é…ç½®äº†ä¹‹å‰ vscode çš„æ’ä»¶</p>
<p>å¯ä»¥å³é”®æ–‡ä»¶å¤¹é€‰æ‹©åˆ†åŒ…é¡µé¢</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre v-pre class="language-json"><code><span class="token comment">// src/pages.json</span>

<span class="token punctuation">{</span>
  <span class="token comment">// ...çœç•¥</span>
  <span class="token comment">// åˆ†åŒ…åŠ è½½è§„åˆ™</span>
  <span class="token property">"subPackages"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// å­åŒ…çš„æ ¹ç›®å½•</span>
      <span class="token property">"root"</span><span class="token operator">:</span> <span class="token string">"pagesMember"</span><span class="token punctuation">,</span>
      <span class="token comment">// é¡µé¢è·¯å¾„å’Œçª—å£è¡¨ç°</span>
      <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"settings/settings"</span><span class="token punctuation">,</span>
          <span class="token property">"style"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"è®¾ç½®"</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// åˆ†åŒ…é¢„ä¸‹è½½è§„åˆ™</span>
  <span class="token property">"preloadRule"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"pages/my/my"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"network"</span><span class="token operator">:</span> <span class="token string">"all"</span><span class="token punctuation">,</span> 
      <span class="token property">"packages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"pagesMember"</span><span class="token punctuation">]</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_17-é¡¹ç›®æ‰“åŒ…" tabindex="-1"><a class="header-anchor" href="#_17-é¡¹ç›®æ‰“åŒ…"><span>17. é¡¹ç›®æ‰“åŒ…</span></a></h2>
<h3 id="æ ¸å¿ƒæ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒæ­¥éª¤"><span>æ ¸å¿ƒæ­¥éª¤</span></a></h3>
<ol>
<li>è¿è¡Œæ‰“åŒ…å‘½ä»¤ <code v-pre>pnpm build:mp-weixin</code></li>
<li>é¢„è§ˆå’Œæµ‹è¯•ï¼Œå¾®ä¿¡å¼€å‘è€…å·¥å…·å¯¼å…¥ç”Ÿæˆçš„ <code v-pre>/dist/build/mp-weixin</code> ç›®å½•</li>
<li>ä¸Šä¼ å°ç¨‹åºä»£ç </li>
<li>æäº¤å®¡æ ¸å’Œå‘å¸ƒ</li>
</ol>
<h3 id="æ¡ä»¶ç¼–è¯‘" tabindex="-1"><a class="header-anchor" href="#æ¡ä»¶ç¼–è¯‘"><span>æ¡ä»¶ç¼–è¯‘</span></a></h3>
<blockquote>
<p>å¸¸è§é—®é¢˜</p>
<p>Qï¼šæŒ‰ç…§ uni-app è§„èŒƒå¼€å‘å¯ä¿è¯å¤šå¹³å°å…¼å®¹ï¼Œä½†æ¯ä¸ªå¹³å°æœ‰è‡ªå·±çš„ä¸€äº›ç‰¹æ€§ï¼Œè¯¥å¦‚ä½•å¤„ç†ï¼Ÿ</p>
<p>Aï¼šé€šè¿‡ <a href="https://uniapp.dcloud.net.cn/tutorial/platform.html#preprocessor" target="_blank" rel="noopener noreferrer">æ¡ä»¶ç¼–è¯‘<ExternalLinkIcon/></a>ï¼Œè®©ä»£ç æŒ‰æ¡ä»¶ç¼–è¯‘åˆ°æŒ‡å®šå¹³å°ã€‚</p>
</blockquote>
<p><strong>ç½‘é¡µç«¯ä¸æ”¯æŒå¾®ä¿¡å¹³å°æˆæƒç™»å½•ç­‰åŠŸèƒ½</strong>ï¼Œå¯é€šè¿‡ <a href="https://uniapp.dcloud.net.cn/tutorial/platform.html#preprocessor" target="_blank" rel="noopener noreferrer">æ¡ä»¶ç¼–è¯‘<ExternalLinkIcon/></a>ï¼Œå®ç°ä¸åŒç«¯æ¸²æŸ“ä¸åŒçš„ç™»å½•ç•Œé¢ã€‚</p>
<h3 id="æ¡ä»¶ç¼–è¯‘è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#æ¡ä»¶ç¼–è¯‘è¯­æ³•"><span>æ¡ä»¶ç¼–è¯‘è¯­æ³•</span></a></h3>
<p>é€šè¿‡ç‰¹æ®Šæ³¨é‡Šï¼Œä»¥ <strong><code v-pre>#ifdef</code></strong> æˆ– <strong><code v-pre>#ifndef</code></strong> åŠ  <strong>å¹³å°åç§°</strong> å¼€å¤´ï¼Œä»¥ <strong><code v-pre>#endif</code></strong> ç»“å°¾ã€‚</p>
<p>å¤šå¹³å°ç¼–è¯‘ï¼š<strong><code v-pre>#ifdef H5 || MP-WEIXIN</code></strong> è¡¨ç¤ºåœ¨ <strong>H5 ç«¯ æˆ– å¾®ä¿¡å°ç¨‹åºç«¯</strong> ä»£ç ã€‚</p>
<p>æ¡ä»¶ç¼–è¯‘æ”¯æŒ: æ”¯æŒ .vue, .ts, .js, .scss, .css, pages.json ç­‰æ–‡ä»¶ã€‚</p>
<div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre v-pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// å¾®ä¿¡å¹³å°ç‰¹æœ‰APIï¼Œéœ€è¦æ¡ä»¶ç¼–è¯‘</span>
<span class="token comment">// #ifdef MP-WEIXIN</span>
wx<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
wx<span class="token punctuation">.</span><span class="token function">requestPayment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// #endif</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- å¾®ä¿¡å¼€å‘èƒ½åŠ›æŒ‰é’®ï¼Œéœ€è¦æ¡ä»¶ç¼–è¯‘ --></span>
  <span class="token comment">&lt;!-- #ifdef MP-WEIXIN --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>openSetting<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆæƒç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>feedback<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é—®é¢˜åé¦ˆ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contact<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>è”ç³»æˆ‘ä»¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- #endif --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token comment">/* å¦‚æœå‡ºç°æ ·å¼å…¼å®¹ï¼Œä¹Ÿå¯æ·»åŠ æ¡ä»¶ç¼–è¯‘ */</span>
<span class="token selector">page</span> <span class="token punctuation">{</span>
  <span class="token comment">/* #ifdef H5 */</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>
  <span class="token comment">/* #endif */</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>å¼€å‘æŠ€å·§</p>
<p>å¯é€šè¿‡æœç´¢ <code v-pre>wx.</code> å’Œ <code v-pre>open-type</code> ç­‰å¹³å°å…³é”®è¯ï¼Œå¿«é€ŸæŸ¥æ‰¾éœ€è¦<strong>å°ç¨‹åºç«¯</strong>éœ€æ·»åŠ ç¼–è¯‘æ¨¡å¼çš„ä»£ç ã€‚</p>
</blockquote>
<h3 id="æ‰“åŒ…ä¸º-h5-ç«¯" tabindex="-1"><a class="header-anchor" href="#æ‰“åŒ…ä¸º-h5-ç«¯"><span>æ‰“åŒ…ä¸º H5 ç«¯</span></a></h3>
<p>æŠŠå½“å‰ uni-app é¡¹ç›®æ‰“åŒ…æˆç½‘é¡µ(H5)ç«¯ï¼Œå¹¶é…ç½®è·¯ç”±åŸºç¡€è·¯å¾„ã€‚</p>
<h3 id="æ ¸å¿ƒæ­¥éª¤-1" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒæ­¥éª¤-1"><span>æ ¸å¿ƒæ­¥éª¤</span></a></h3>
<ol>
<li>è¿è¡Œæ‰“åŒ…å‘½ä»¤ <code v-pre>pnpm build:h5</code></li>
<li>é¢„è§ˆå’Œæµ‹è¯•ï¼Œä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ <code v-pre>/dist/build/h5</code> ç›®å½•ä¸‹çš„ <code v-pre>index.html</code> æ–‡ä»¶</li>
<li>ç”±è¿ç»´éƒ¨ç½²åˆ°æœåŠ¡å™¨</li>
</ol>
<h3 id="è·¯ç”±åŸºç¡€è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±åŸºç¡€è·¯å¾„"><span>è·¯ç”±åŸºç¡€è·¯å¾„</span></a></h3>
<p>é»˜è®¤çš„è·¯ç”±åŸºç¡€è·¯å¾„ä¸º <code v-pre>/</code> æ ¹è·¯å¾„ï¼Œéƒ¨åˆ†ç½‘ç«™å¹¶ä¸æ˜¯éƒ¨ç½²åˆ°æ ¹è·¯å¾„ï¼Œéœ€è¦æŒ‰è¿ç»´è¦æ±‚è°ƒæ•´ã€‚</p>
<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre v-pre class="language-json"><code>
<span class="token comment">// manifest.json</span>
<span class="token punctuation">{</span>
  <span class="token comment">/* ç½‘é¡µç«¯ç‰¹æœ‰é…ç½® */</span>
  <span class="token property">"h5"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"router"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// åŸºç¡€è·¯å¾„ï¼š./ ä¸ºç›¸å¯¹è·¯å¾„</span>
      <span class="token property">"base"</span><span class="token operator">:</span> <span class="token string">"./"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token comment">/* å°ç¨‹åºç‰¹æœ‰ç›¸å…³ */</span><span class="token punctuation">,</span>
  <span class="token property">"mp-weixin"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// â€¦çœç•¥</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"vueVersion"</span><span class="token operator">:</span> <span class="token string">"3"</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ‰“åŒ…ä¸º-app-ç«¯" tabindex="-1"><a class="header-anchor" href="#æ‰“åŒ…ä¸º-app-ç«¯"><span>æ‰“åŒ…ä¸º APP ç«¯</span></a></h3>
<p><a href="https://uniapp.dcloud.net.cn/tutorial/run/run-app.html" target="_blank" rel="noopener noreferrer">App ç«¯<ExternalLinkIcon/></a> çš„æ‰“åŒ…ï¼Œé¢„è§ˆã€æµ‹è¯•ã€å‘è¡Œï¼Œä½¿ç”¨ <code v-pre>HBuilderX</code> å·¥å…·ã€‚</p>
</div></template>


