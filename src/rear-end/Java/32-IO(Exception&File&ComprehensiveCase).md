---
title: ğŸ˜¢ 32.IO(å¼‚å¸¸&File&ç»¼åˆæ¡ˆä¾‹ï¼‰
tag:
  - Java
recommend: 33
---

# 1. å¼‚å¸¸

## 1.1 å¼‚å¸¸æ¦‚å¿µ

å¼‚å¸¸ï¼Œå°±æ˜¯ä¸æ­£å¸¸çš„æ„æ€ã€‚åœ¨ç”Ÿæ´»ä¸­:åŒ»ç”Ÿè¯´,ä½ çš„èº«ä½“æŸä¸ªéƒ¨ä½æœ‰å¼‚å¸¸,è¯¥éƒ¨ä½å’Œæ­£å¸¸ç›¸æ¯”æœ‰ç‚¹ä¸åŒ,è¯¥éƒ¨ä½çš„åŠŸèƒ½å°†å—å½±å“.åœ¨ç¨‹åºä¸­çš„æ„æ€å°±æ˜¯ï¼š

* **å¼‚å¸¸** ï¼šæŒ‡çš„æ˜¯ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå‡ºç°çš„éæ­£å¸¸çš„æƒ…å†µï¼Œæœ€ç»ˆä¼šå¯¼è‡´JVMçš„éæ­£å¸¸åœæ­¢ã€‚

åœ¨Javaç­‰é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¼‚å¸¸æœ¬èº«æ˜¯ä¸€ä¸ªç±»ï¼Œäº§ç”Ÿå¼‚å¸¸å°±æ˜¯åˆ›å»ºå¼‚å¸¸å¯¹è±¡å¹¶æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ã€‚Javaå¤„ç†å¼‚å¸¸çš„æ–¹å¼æ˜¯ä¸­æ–­å¤„ç†ã€‚

> å¼‚å¸¸æŒ‡çš„å¹¶ä¸æ˜¯è¯­æ³•é”™è¯¯,è¯­æ³•é”™äº†,ç¼–è¯‘ä¸é€šè¿‡,ä¸ä¼šäº§ç”Ÿå­—èŠ‚ç æ–‡ä»¶,æ ¹æœ¬ä¸èƒ½è¿è¡Œ.

## 1.2 å¼‚å¸¸ä½“ç³»

å¼‚å¸¸æœºåˆ¶å…¶å®æ˜¯å¸®åŠ©æˆ‘ä»¬**æ‰¾åˆ°**ç¨‹åºä¸­çš„é—®é¢˜ï¼Œå¼‚å¸¸çš„æ ¹ç±»æ˜¯`java.lang.Throwable`ï¼Œå…¶ä¸‹æœ‰ä¸¤ä¸ªå­ç±»ï¼š`java.lang.Error`ä¸`java.lang.Exception`ï¼Œå¹³å¸¸æ‰€è¯´çš„å¼‚å¸¸æŒ‡`java.lang.Exception`ã€‚

![image-20231106193522654](https://img.picgo.net/2023/11/06/image-202311061935226546f1b86d4d02997d3.png)

**Throwableä½“ç³»ï¼š**

* **Error**:ä¸¥é‡é”™è¯¯Errorï¼Œæ— æ³•é€šè¿‡å¤„ç†çš„é”™è¯¯ï¼Œåªèƒ½äº‹å…ˆé¿å…ï¼Œå¥½æ¯”ç»ç—‡ã€‚
* **Exception**:è¡¨ç¤ºå¼‚å¸¸ï¼Œå¼‚å¸¸äº§ç”Ÿåç¨‹åºå‘˜å¯ä»¥é€šè¿‡ä»£ç çš„æ–¹å¼çº æ­£ï¼Œä½¿ç¨‹åºç»§ç»­è¿è¡Œï¼Œæ˜¯å¿…é¡»è¦å¤„ç†çš„ã€‚å¥½æ¯”æ„Ÿå†’ã€é˜‘å°¾ç‚ã€‚

**Throwableä¸­çš„å¸¸ç”¨æ–¹æ³•ï¼š**

* `public void printStackTrace()`:æ‰“å°å¼‚å¸¸çš„è¯¦ç»†ä¿¡æ¯ã€‚

  *åŒ…å«äº†å¼‚å¸¸çš„ç±»å‹,å¼‚å¸¸çš„åŸå› ,è¿˜åŒ…æ‹¬å¼‚å¸¸å‡ºç°çš„ä½ç½®,åœ¨å¼€å‘å’Œè°ƒè¯•é˜¶æ®µ,éƒ½å¾—ä½¿ç”¨printStackTraceã€‚*

* `public String getMessage()`:è·å–å‘ç”Ÿå¼‚å¸¸çš„åŸå› ã€‚

  *æç¤ºç»™ç”¨æˆ·çš„æ—¶å€™,å°±æç¤ºé”™è¯¯åŸå› ã€‚*

* `public String toString()`:è·å–å¼‚å¸¸çš„ç±»å‹å’Œå¼‚å¸¸æè¿°ä¿¡æ¯(ä¸ç”¨)ã€‚

***å‡ºç°å¼‚å¸¸,ä¸è¦ç´§å¼ ,æŠŠå¼‚å¸¸çš„ç®€å•ç±»å,æ‹·è´åˆ°APIä¸­å»æŸ¥ã€‚***

![image-20231106193540503](https://img.picgo.net/2023/11/06/image-202311061935405038cd52da83b5e0a6b.png)

## 1.3 å¼‚å¸¸åˆ†ç±»

æˆ‘ä»¬å¹³å¸¸è¯´çš„å¼‚å¸¸å°±æ˜¯æŒ‡Exceptionï¼Œå› ä¸ºè¿™ç±»å¼‚å¸¸ä¸€æ—¦å‡ºç°ï¼Œæˆ‘ä»¬å°±è¦å¯¹ä»£ç è¿›è¡Œæ›´æ­£ï¼Œä¿®å¤ç¨‹åºã€‚

**å¼‚å¸¸(Exception)çš„åˆ†ç±»**:æ ¹æ®åœ¨ç¼–è¯‘æ—¶æœŸè¿˜æ˜¯è¿è¡Œæ—¶æœŸå»æ£€æŸ¥å¼‚å¸¸?

* **ç¼–è¯‘æ—¶æœŸå¼‚å¸¸**:checkedå¼‚å¸¸ã€‚åœ¨ç¼–è¯‘æ—¶æœŸ,å°±ä¼šæ£€æŸ¥,å¦‚æœæ²¡æœ‰å¤„ç†å¼‚å¸¸,åˆ™ç¼–è¯‘å¤±è´¥ã€‚(å¦‚æ—¥æœŸæ ¼å¼åŒ–å¼‚å¸¸)
* **è¿è¡Œæ—¶æœŸå¼‚å¸¸**:runtimeå¼‚å¸¸ã€‚åœ¨è¿è¡Œæ—¶æœŸ,æ£€æŸ¥å¼‚å¸¸.åœ¨ç¼–è¯‘æ—¶æœŸ,è¿è¡Œå¼‚å¸¸ä¸ä¼šç¼–è¯‘å™¨æ£€æµ‹(ä¸æŠ¥é”™)ã€‚(å¦‚æ•°å­¦å¼‚å¸¸)

![image-20231106193557564](https://img.picgo.net/2023/11/06/image-202311061935575643ef415660a93c93e.png)

## 1.4 å¼‚å¸¸çš„äº§ç”Ÿè¿‡ç¨‹è§£æ

å…ˆè¿è¡Œä¸‹é¢çš„ç¨‹åºï¼Œç¨‹åºä¼šäº§ç”Ÿä¸€ä¸ªæ•°ç»„ç´¢å¼•è¶Šç•Œå¼‚å¸¸ArrayIndexOfBoundsExceptionã€‚æˆ‘ä»¬é€šè¿‡å›¾è§£æ¥è§£æä¸‹å¼‚å¸¸äº§ç”Ÿçš„è¿‡ç¨‹ã€‚

 å·¥å…·ç±»

```java
public class ArrayTools {
    // å¯¹ç»™å®šçš„æ•°ç»„é€šè¿‡ç»™å®šçš„è§’æ ‡è·å–å…ƒç´ ã€‚
    public static int getElement(int[] arr, int index) {
        int element = arr[index];
        return element;
    }
}
```

 æµ‹è¯•ç±»

```java
public class ExceptionDemo {
    public static void main(String[] args) {
        int[] arr = { 34, 12, 67 };
        intnum = ArrayTools.getElement(arr, 4)
        System.out.println("num=" + num);
        System.out.println("over");
    }
}
```

ä¸Šè¿°ç¨‹åºæ‰§è¡Œè¿‡ç¨‹å›¾è§£ï¼š

![image-20231106193615426](https://img.picgo.net/2023/11/06/image-20231106193615426138890927705c034.png)

## 1.5 æŠ›å‡ºå¼‚å¸¸throw

åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»è¦è€ƒè™‘ç¨‹åºå‡ºç°é—®é¢˜çš„æƒ…å†µã€‚æ¯”å¦‚ï¼Œåœ¨å®šä¹‰æ–¹æ³•æ—¶ï¼Œæ–¹æ³•éœ€è¦æ¥å—å‚æ•°ã€‚é‚£ä¹ˆï¼Œå½“è°ƒç”¨æ–¹æ³•ä½¿ç”¨æ¥å—åˆ°çš„å‚æ•°æ—¶ï¼Œé¦–å…ˆéœ€è¦å…ˆå¯¹å‚æ•°æ•°æ®è¿›è¡Œåˆæ³•çš„åˆ¤æ–­ï¼Œæ•°æ®è‹¥ä¸åˆæ³•ï¼Œå°±åº”è¯¥å‘Šè¯‰è°ƒç”¨è€…ï¼Œä¼ é€’åˆæ³•çš„æ•°æ®è¿›æ¥ã€‚è¿™æ—¶éœ€è¦ä½¿ç”¨æŠ›å‡ºå¼‚å¸¸çš„æ–¹å¼æ¥å‘Šè¯‰è°ƒç”¨è€…ã€‚

åœ¨javaä¸­ï¼Œæä¾›äº†ä¸€ä¸ª**throw**å…³é”®å­—ï¼Œå®ƒç”¨æ¥æŠ›å‡ºä¸€ä¸ªæŒ‡å®šçš„å¼‚å¸¸å¯¹è±¡ã€‚é‚£ä¹ˆï¼ŒæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å…·ä½“å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ

1. åˆ›å»ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ã€‚å°è£…ä¸€äº›æç¤ºä¿¡æ¯(ä¿¡æ¯å¯ä»¥è‡ªå·±ç¼–å†™)ã€‚

2. éœ€è¦å°†è¿™ä¸ªå¼‚å¸¸å¯¹è±¡å‘ŠçŸ¥ç»™è°ƒç”¨è€…ã€‚æ€ä¹ˆå‘ŠçŸ¥å‘¢ï¼Ÿæ€ä¹ˆå°†è¿™ä¸ªå¼‚å¸¸å¯¹è±¡ä¼ é€’åˆ°è°ƒç”¨è€…å¤„å‘¢ï¼Ÿé€šè¿‡å…³é”®å­—throwå°±å¯ä»¥å®Œæˆã€‚throw å¼‚å¸¸å¯¹è±¡ã€‚

   throw**ç”¨åœ¨æ–¹æ³•å†…**ï¼Œç”¨æ¥æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œå°†è¿™ä¸ªå¼‚å¸¸å¯¹è±¡ä¼ é€’åˆ°è°ƒç”¨è€…å¤„ï¼Œå¹¶ç»“æŸå½“å‰æ–¹æ³•çš„æ‰§è¡Œã€‚

**ä½¿ç”¨æ ¼å¼ï¼š**

```
throw new å¼‚å¸¸ç±»å(å‚æ•°);
```

 ä¾‹å¦‚ï¼š

```java
throw new NullPointerException("è¦è®¿é—®çš„arræ•°ç»„ä¸å­˜åœ¨");

throw new ArrayIndexOutOfBoundsException("è¯¥ç´¢å¼•åœ¨æ•°ç»„ä¸­ä¸å­˜åœ¨ï¼Œå·²è¶…å‡ºèŒƒå›´");
```

å­¦ä¹ å®ŒæŠ›å‡ºå¼‚å¸¸çš„æ ¼å¼åï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢ç¨‹åºæ¼”ç¤ºä¸‹throwçš„ä½¿ç”¨ã€‚

```java
public class ThrowDemo {
    public static void main(String[] args) {
        //åˆ›å»ºä¸€ä¸ªæ•°ç»„ 
        int[] arr = {2,4,52,2};
        //æ ¹æ®ç´¢å¼•æ‰¾å¯¹åº”çš„å…ƒç´  
        int index = 4;
        int element = getElement(arr, index);

        System.out.println(element);
        System.out.println("over");
    }
    /*
     * æ ¹æ® ç´¢å¼•æ‰¾åˆ°æ•°ç»„ä¸­å¯¹åº”çš„å…ƒç´ 
     */
    public static int getElement(int[] arr,int index){ 
       	//åˆ¤æ–­  ç´¢å¼•æ˜¯å¦è¶Šç•Œ
        if(index<0 || index>arr.length-1){
             /*
             åˆ¤æ–­æ¡ä»¶å¦‚æœæ»¡è¶³ï¼Œå½“æ‰§è¡Œå®ŒthrowæŠ›å‡ºå¼‚å¸¸å¯¹è±¡åï¼Œæ–¹æ³•å·²ç»æ— æ³•ç»§ç»­è¿ç®—ã€‚
             è¿™æ—¶å°±ä¼šç»“æŸå½“å‰æ–¹æ³•çš„æ‰§è¡Œï¼Œå¹¶å°†å¼‚å¸¸å‘ŠçŸ¥ç»™è°ƒç”¨è€…ã€‚è¿™æ—¶å°±éœ€è¦é€šè¿‡å¼‚å¸¸æ¥è§£å†³ã€‚ 
              */
             throw new ArrayIndexOutOfBoundsException("å“¥ä»¬ï¼Œè§’æ ‡è¶Šç•Œäº†```");
        }
        int element = arr[index];
        return element;
    }
}
```

> æ³¨æ„ï¼šå¦‚æœäº§ç”Ÿäº†é—®é¢˜ï¼Œæˆ‘ä»¬å°±ä¼šthrowå°†é—®é¢˜æè¿°ç±»å³å¼‚å¸¸è¿›è¡ŒæŠ›å‡ºï¼Œä¹Ÿå°±æ˜¯å°†é—®é¢˜è¿”å›ç»™è¯¥æ–¹æ³•çš„è°ƒç”¨è€…ã€‚
>
> é‚£ä¹ˆå¯¹äºè°ƒç”¨è€…æ¥è¯´ï¼Œè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿä¸€ç§æ˜¯è¿›è¡Œæ•è·å¤„ç†ï¼Œå¦ä¸€ç§å°±æ˜¯ç»§ç»­è®²é—®é¢˜å£°æ˜å‡ºå»ï¼Œä½¿ç”¨throwså£°æ˜å¤„ç†ã€‚

## 1.6 å£°æ˜å¼‚å¸¸throws

**å£°æ˜å¼‚å¸¸**ï¼šå°†é—®é¢˜æ ‡è¯†å‡ºæ¥ï¼ŒæŠ¥å‘Šç»™è°ƒç”¨è€…ã€‚å¦‚æœæ–¹æ³•å†…é€šè¿‡throwæŠ›å‡ºäº†ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œè€Œæ²¡æœ‰æ•è·å¤„ç†ï¼ˆç¨åè®²è§£è¯¥æ–¹å¼ï¼‰ï¼Œé‚£ä¹ˆå¿…é¡»é€šè¿‡throwsè¿›è¡Œå£°æ˜ï¼Œè®©è°ƒç”¨è€…å»å¤„ç†ã€‚

å…³é”®å­—**throws**è¿ç”¨äºæ–¹æ³•å£°æ˜ä¹‹ä¸Š,ç”¨äºè¡¨ç¤ºå½“å‰æ–¹æ³•ä¸å¤„ç†å¼‚å¸¸,è€Œæ˜¯æé†’è¯¥æ–¹æ³•çš„è°ƒç”¨è€…æ¥å¤„ç†å¼‚å¸¸(æŠ›å‡ºå¼‚å¸¸).

**å£°æ˜å¼‚å¸¸æ ¼å¼ï¼š**

```
ä¿®é¥°ç¬¦ è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°) throws å¼‚å¸¸ç±»å1,å¼‚å¸¸ç±»å2â€¦{   }	
```

å£°æ˜å¼‚å¸¸çš„ä»£ç æ¼”ç¤ºï¼š

```java
public class ThrowsDemo {
    public static void main(String[] args) throws FileNotFoundException {
        read("a.txt");
    }

    // å¦‚æœå®šä¹‰åŠŸèƒ½æ—¶æœ‰é—®é¢˜å‘ç”Ÿéœ€è¦æŠ¥å‘Šç»™è°ƒç”¨è€…ã€‚å¯ä»¥é€šè¿‡åœ¨æ–¹æ³•ä¸Šä½¿ç”¨throwså…³é”®å­—è¿›è¡Œå£°æ˜
    public static void read(String path) throws FileNotFoundException {
        if (!path.equals("a.txt")) {//å¦‚æœä¸æ˜¯ a.txtè¿™ä¸ªæ–‡ä»¶ 
            // æˆ‘å‡è®¾  å¦‚æœä¸æ˜¯ a.txt è®¤ä¸º è¯¥æ–‡ä»¶ä¸å­˜åœ¨ æ˜¯ä¸€ä¸ªé”™è¯¯ ä¹Ÿå°±æ˜¯å¼‚å¸¸  throw
            throw new FileNotFoundException("æ–‡ä»¶ä¸å­˜åœ¨");
        }
    }
}
```

throwsç”¨äºè¿›è¡Œå¼‚å¸¸ç±»çš„å£°æ˜ï¼Œè‹¥è¯¥æ–¹æ³•å¯èƒ½æœ‰å¤šç§å¼‚å¸¸æƒ…å†µäº§ç”Ÿï¼Œé‚£ä¹ˆåœ¨throwsåé¢å¯ä»¥å†™å¤šä¸ªå¼‚å¸¸ç±»ï¼Œç”¨é€—å·éš”å¼€ã€‚

```java
public class ThrowsDemo2 {
    public static void main(String[] args) throws IOException {
        read("a.txt");
    }

    public static void read(String path)throws FileNotFoundException, IOException {
        if (!path.equals("a.txt")) {//å¦‚æœä¸æ˜¯ a.txtè¿™ä¸ªæ–‡ä»¶ 
            // æˆ‘å‡è®¾  å¦‚æœä¸æ˜¯ a.txt è®¤ä¸º è¯¥æ–‡ä»¶ä¸å­˜åœ¨ æ˜¯ä¸€ä¸ªé”™è¯¯ ä¹Ÿå°±æ˜¯å¼‚å¸¸  throw
            throw new FileNotFoundException("æ–‡ä»¶ä¸å­˜åœ¨");
        }
        if (!path.equals("b.txt")) {
            throw new IOException();
        }
    }
}
```

## 1.7 æ•è·å¼‚å¸¸tryâ€¦catch

å¦‚æœå¼‚å¸¸å‡ºç°çš„è¯,ä¼šç«‹åˆ»ç»ˆæ­¢ç¨‹åº,æ‰€ä»¥æˆ‘ä»¬å¾—å¤„ç†å¼‚å¸¸:

1. è¯¥æ–¹æ³•ä¸å¤„ç†,è€Œæ˜¯å£°æ˜æŠ›å‡º,ç”±è¯¥æ–¹æ³•çš„è°ƒç”¨è€…æ¥å¤„ç†(throws)ã€‚
2. åœ¨æ–¹æ³•ä¸­ä½¿ç”¨try-catchçš„è¯­å¥å—æ¥å¤„ç†å¼‚å¸¸ã€‚

**try-catch**çš„æ–¹å¼å°±æ˜¯æ•è·å¼‚å¸¸ã€‚

* **æ•è·å¼‚å¸¸**ï¼šJavaä¸­å¯¹å¼‚å¸¸æœ‰é’ˆå¯¹æ€§çš„è¯­å¥è¿›è¡Œæ•è·ï¼Œå¯ä»¥å¯¹å‡ºç°çš„å¼‚å¸¸è¿›è¡ŒæŒ‡å®šæ–¹å¼çš„å¤„ç†ã€‚

æ•è·å¼‚å¸¸è¯­æ³•å¦‚ä¸‹ï¼š

```java
try{
     ç¼–å†™å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸çš„ä»£ç 
}catch(å¼‚å¸¸ç±»å‹  e){
     å¤„ç†å¼‚å¸¸çš„ä»£ç 
     //è®°å½•æ—¥å¿—/æ‰“å°å¼‚å¸¸ä¿¡æ¯/ç»§ç»­æŠ›å‡ºå¼‚å¸¸
}
```

**tryï¼š**è¯¥ä»£ç å—ä¸­ç¼–å†™å¯èƒ½äº§ç”Ÿå¼‚å¸¸çš„ä»£ç ã€‚

**catchï¼š**ç”¨æ¥è¿›è¡ŒæŸç§å¼‚å¸¸çš„æ•è·ï¼Œå®ç°å¯¹æ•è·åˆ°çš„å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚

> æ³¨æ„:tryå’Œcatchéƒ½ä¸èƒ½å•ç‹¬ä½¿ç”¨,å¿…é¡»è¿ç”¨ã€‚

æ¼”ç¤ºå¦‚ä¸‹ï¼š

```java
public class TryCatchDemo {
    public static void main(String[] args) {
        try {// å½“äº§ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¿…é¡»æœ‰å¤„ç†æ–¹å¼ã€‚è¦ä¹ˆæ•è·ï¼Œè¦ä¹ˆå£°æ˜ã€‚
            read("b.txt");
        } catch (FileNotFoundException e) {// æ‹¬å·ä¸­éœ€è¦å®šä¹‰ä»€ä¹ˆå‘¢ï¼Ÿ
          	//tryä¸­æŠ›å‡ºçš„æ˜¯ä»€ä¹ˆå¼‚å¸¸ï¼Œåœ¨æ‹¬å·ä¸­å°±å®šä¹‰ä»€ä¹ˆå¼‚å¸¸ç±»å‹
            System.out.println(e);
        }
        System.out.println("over");
    }
    /*
     *
     * æˆ‘ä»¬ å½“å‰çš„è¿™ä¸ªæ–¹æ³•ä¸­ æœ‰å¼‚å¸¸  æœ‰ç¼–è¯‘æœŸå¼‚å¸¸
     */
    public static void read(String path) throws FileNotFoundException {
        if (!path.equals("a.txt")) {//å¦‚æœä¸æ˜¯ a.txtè¿™ä¸ªæ–‡ä»¶ 
            // æˆ‘å‡è®¾  å¦‚æœä¸æ˜¯ a.txt è®¤ä¸º è¯¥æ–‡ä»¶ä¸å­˜åœ¨ æ˜¯ä¸€ä¸ªé”™è¯¯ ä¹Ÿå°±æ˜¯å¼‚å¸¸  throw
            throw new FileNotFoundException("æ–‡ä»¶ä¸å­˜åœ¨");
        }
    }
}
```

å¦‚ä½•è·å–å¼‚å¸¸ä¿¡æ¯ï¼š

Throwableç±»ä¸­å®šä¹‰äº†ä¸€äº›æŸ¥çœ‹æ–¹æ³•:

* `public String getMessage()`:è·å–å¼‚å¸¸çš„æè¿°ä¿¡æ¯,åŸå› (æç¤ºç»™ç”¨æˆ·çš„æ—¶å€™,å°±æç¤ºé”™è¯¯åŸå› ã€‚


* `public String toString()`:è·å–å¼‚å¸¸çš„ç±»å‹å’Œå¼‚å¸¸æè¿°ä¿¡æ¯(ä¸ç”¨)ã€‚
* `public void printStackTrace()`:æ‰“å°å¼‚å¸¸çš„è·Ÿè¸ªæ ˆä¿¡æ¯å¹¶è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚

â€‹            *åŒ…å«äº†å¼‚å¸¸çš„ç±»å‹,å¼‚å¸¸çš„åŸå› ,è¿˜åŒ…æ‹¬å¼‚å¸¸å‡ºç°çš„ä½ç½®,åœ¨å¼€å‘å’Œè°ƒè¯•é˜¶æ®µ,éƒ½å¾—ä½¿ç”¨printStackTraceã€‚*

åœ¨å¼€å‘ä¸­å‘¢ä¹Ÿå¯ä»¥åœ¨catchå°†ç¼–è¯‘æœŸå¼‚å¸¸è½¬æ¢æˆè¿è¡ŒæœŸå¼‚å¸¸å¤„ç†ã€‚

å¤šä¸ªå¼‚å¸¸ä½¿ç”¨æ•è·åˆè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ

1. å¤šä¸ªå¼‚å¸¸åˆ†åˆ«å¤„ç†ã€‚
2. å¤šä¸ªå¼‚å¸¸ä¸€æ¬¡æ•è·ï¼Œå¤šæ¬¡å¤„ç†ã€‚
3. å¤šä¸ªå¼‚å¸¸ä¸€æ¬¡æ•è·ä¸€æ¬¡å¤„ç†ã€‚

ä¸€èˆ¬æˆ‘ä»¬æ˜¯ä½¿ç”¨ä¸€æ¬¡æ•è·å¤šæ¬¡å¤„ç†æ–¹å¼ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```java
try{
     ç¼–å†™å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸çš„ä»£ç 
}catch(å¼‚å¸¸ç±»å‹A  e){  å½“tryä¸­å‡ºç°Aç±»å‹å¼‚å¸¸,å°±ç”¨è¯¥catchæ¥æ•è·.
     å¤„ç†å¼‚å¸¸çš„ä»£ç 
     //è®°å½•æ—¥å¿—/æ‰“å°å¼‚å¸¸ä¿¡æ¯/ç»§ç»­æŠ›å‡ºå¼‚å¸¸
}catch(å¼‚å¸¸ç±»å‹B  e){  å½“tryä¸­å‡ºç°Bç±»å‹å¼‚å¸¸,å°±ç”¨è¯¥catchæ¥æ•è·.
     å¤„ç†å¼‚å¸¸çš„ä»£ç 
     //è®°å½•æ—¥å¿—/æ‰“å°å¼‚å¸¸ä¿¡æ¯/ç»§ç»­æŠ›å‡ºå¼‚å¸¸
}
```

> æ³¨æ„:è¿™ç§å¼‚å¸¸å¤„ç†æ–¹å¼ï¼Œè¦æ±‚å¤šä¸ªcatchä¸­çš„å¼‚å¸¸ä¸èƒ½ç›¸åŒï¼Œå¹¶ä¸”è‹¥catchä¸­çš„å¤šä¸ªå¼‚å¸¸ä¹‹é—´æœ‰å­çˆ¶ç±»å¼‚å¸¸çš„å…³ç³»ï¼Œé‚£ä¹ˆå­ç±»å¼‚å¸¸è¦æ±‚åœ¨ä¸Šé¢çš„catchå¤„ç†ï¼Œçˆ¶ç±»å¼‚å¸¸åœ¨ä¸‹é¢çš„catchå¤„ç†ã€‚

## 1.8 finally ä»£ç å—

**finally**ï¼šæœ‰ä¸€äº›ç‰¹å®šçš„ä»£ç æ— è®ºå¼‚å¸¸æ˜¯å¦å‘ç”Ÿï¼Œéƒ½éœ€è¦æ‰§è¡Œã€‚å¦å¤–ï¼Œå› ä¸ºå¼‚å¸¸ä¼šå¼•å‘ç¨‹åºè·³è½¬ï¼Œå¯¼è‡´æœ‰äº›è¯­å¥æ‰§è¡Œä¸åˆ°ã€‚è€Œfinallyå°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œåœ¨finallyä»£ç å—ä¸­å­˜æ”¾çš„ä»£ç éƒ½æ˜¯ä¸€å®šä¼šè¢«æ‰§è¡Œçš„ã€‚

ä»€ä¹ˆæ—¶å€™çš„ä»£ç å¿…é¡»æœ€ç»ˆæ‰§è¡Œï¼Ÿ

å½“æˆ‘ä»¬åœ¨tryè¯­å¥å—ä¸­æ‰“å¼€äº†ä¸€äº›ç‰©ç†èµ„æº(ç£ç›˜æ–‡ä»¶/ç½‘ç»œè¿æ¥/æ•°æ®åº“è¿æ¥ç­‰),æˆ‘ä»¬éƒ½å¾—åœ¨ä½¿ç”¨å®Œä¹‹å,æœ€ç»ˆå…³é—­æ‰“å¼€çš„èµ„æºã€‚

finallyçš„è¯­æ³•:

 try...catch....finally:è‡ªèº«éœ€è¦å¤„ç†å¼‚å¸¸,æœ€ç»ˆè¿˜å¾—å…³é—­èµ„æºã€‚

> æ³¨æ„:finallyä¸èƒ½å•ç‹¬ä½¿ç”¨ã€‚

æ¯”å¦‚åœ¨æˆ‘ä»¬ä¹‹åå­¦ä¹ çš„IOæµä¸­ï¼Œå½“æ‰“å¼€äº†ä¸€ä¸ªå…³è”æ–‡ä»¶çš„èµ„æºï¼Œæœ€åç¨‹åºä¸ç®¡ç»“æœå¦‚ä½•ï¼Œéƒ½éœ€è¦æŠŠè¿™ä¸ªèµ„æºå…³é—­æ‰ã€‚

finallyä»£ç å‚è€ƒå¦‚ä¸‹ï¼š

```java
public class TryCatchDemo4 {
    public static void main(String[] args) {
        try {
            read("a.txt");
        } catch (FileNotFoundException e) {
            //æŠ“å–åˆ°çš„æ˜¯ç¼–è¯‘æœŸå¼‚å¸¸  æŠ›å‡ºå»çš„æ˜¯è¿è¡ŒæœŸ 
            throw new RuntimeException(e);
        } finally {
            System.out.println("ä¸ç®¡ç¨‹åºæ€æ ·ï¼Œè¿™é‡Œéƒ½å°†ä¼šè¢«æ‰§è¡Œã€‚");
        }
        System.out.println("over");
    }
    /*
     *
     * æˆ‘ä»¬ å½“å‰çš„è¿™ä¸ªæ–¹æ³•ä¸­ æœ‰å¼‚å¸¸  æœ‰ç¼–è¯‘æœŸå¼‚å¸¸
     */
    public static void read(String path) throws FileNotFoundException {
        if (!path.equals("a.txt")) {//å¦‚æœä¸æ˜¯ a.txtè¿™ä¸ªæ–‡ä»¶ 
            // æˆ‘å‡è®¾  å¦‚æœä¸æ˜¯ a.txt è®¤ä¸º è¯¥æ–‡ä»¶ä¸å­˜åœ¨ æ˜¯ä¸€ä¸ªé”™è¯¯ ä¹Ÿå°±æ˜¯å¼‚å¸¸  throw
            throw new FileNotFoundException("æ–‡ä»¶ä¸å­˜åœ¨");
        }
    }
}
```

> å½“åªæœ‰åœ¨tryæˆ–è€…catchä¸­è°ƒç”¨é€€å‡ºJVMçš„ç›¸å…³æ–¹æ³•,æ­¤æ—¶finallyæ‰ä¸ä¼šæ‰§è¡Œ,å¦åˆ™finallyæ°¸è¿œä¼šæ‰§è¡Œã€‚

## 1.9 å¼‚å¸¸æ³¨æ„äº‹é¡¹

* è¿è¡Œæ—¶å¼‚å¸¸è¢«æŠ›å‡ºå¯ä»¥ä¸å¤„ç†ã€‚å³ä¸æ•è·ä¹Ÿä¸å£°æ˜æŠ›å‡ºã€‚
* å¦‚æœçˆ¶ç±»æŠ›å‡ºäº†å¤šä¸ªå¼‚å¸¸,å­ç±»è¦†ç›–çˆ¶ç±»æ–¹æ³•æ—¶,åªèƒ½æŠ›å‡ºç›¸åŒçš„å¼‚å¸¸æˆ–è€…æ˜¯ä»–çš„å­é›†ã€‚
* çˆ¶ç±»æ–¹æ³•æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œå­ç±»è¦†ç›–çˆ¶ç±»è¯¥æ–¹æ³•æ—¶ä¹Ÿä¸å¯æŠ›å‡ºå¼‚å¸¸ã€‚æ­¤æ—¶å­ç±»äº§ç”Ÿè¯¥å¼‚å¸¸ï¼Œåªèƒ½æ•è·å¤„ç†ï¼Œä¸èƒ½å£°æ˜æŠ›å‡º
* å½“å¤šå¼‚å¸¸å¤„ç†æ—¶ï¼Œæ•è·å¤„ç†ï¼Œå‰è¾¹çš„ç±»ä¸èƒ½æ˜¯åè¾¹ç±»çš„çˆ¶ç±»
* åœ¨try/catchåå¯ä»¥è¿½åŠ finallyä»£ç å—ï¼Œå…¶ä¸­çš„ä»£ç ä¸€å®šä¼šè¢«æ‰§è¡Œï¼Œé€šå¸¸ç”¨äºèµ„æºå›æ”¶ã€‚

## 1.10 æ¦‚è¿°

**ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰å¼‚å¸¸ç±»:**

æˆ‘ä»¬è¯´äº†Javaä¸­ä¸åŒçš„å¼‚å¸¸ç±»,åˆ†åˆ«è¡¨ç¤ºç€æŸä¸€ç§å…·ä½“çš„å¼‚å¸¸æƒ…å†µ,é‚£ä¹ˆåœ¨å¼€å‘ä¸­æ€»æ˜¯æœ‰äº›å¼‚å¸¸æƒ…å†µæ˜¯SUNæ²¡æœ‰å®šä¹‰å¥½çš„,æ­¤æ—¶æˆ‘ä»¬æ ¹æ®è‡ªå·±ä¸šåŠ¡çš„å¼‚å¸¸æƒ…å†µæ¥å®šä¹‰å¼‚å¸¸ç±»ã€‚,ä¾‹å¦‚å¹´é¾„è´Ÿæ•°é—®é¢˜,è€ƒè¯•æˆç»©è´Ÿæ•°é—®é¢˜ã€‚

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå‘ç°è¿™äº›å¼‚å¸¸éƒ½æ˜¯JDKå†…éƒ¨å®šä¹‰å¥½çš„ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­ä¹Ÿä¼šå‡ºç°å¾ˆå¤šå¼‚å¸¸,è¿™äº›å¼‚å¸¸å¾ˆå¯èƒ½åœ¨JDKä¸­æ²¡æœ‰å®šä¹‰è¿‡,ä¾‹å¦‚å¹´é¾„è´Ÿæ•°é—®é¢˜,è€ƒè¯•æˆç»©è´Ÿæ•°é—®é¢˜.é‚£ä¹ˆèƒ½ä¸èƒ½è‡ªå·±å®šä¹‰å¼‚å¸¸å‘¢ï¼Ÿ

**ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰å¼‚å¸¸ç±»:**

åœ¨å¼€å‘ä¸­æ ¹æ®è‡ªå·±ä¸šåŠ¡çš„å¼‚å¸¸æƒ…å†µæ¥å®šä¹‰å¼‚å¸¸ç±».

è‡ªå®šä¹‰ä¸€ä¸ªä¸šåŠ¡é€»è¾‘å¼‚å¸¸: **LoginException**ã€‚ä¸€ä¸ªç™»é™†å¼‚å¸¸ç±»ã€‚

**å¼‚å¸¸ç±»å¦‚ä½•å®šä¹‰:**

1. è‡ªå®šä¹‰ä¸€ä¸ªç¼–è¯‘æœŸå¼‚å¸¸: è‡ªå®šä¹‰ç±» å¹¶ç»§æ‰¿äº`java.lang.Exception`ã€‚
2. è‡ªå®šä¹‰ä¸€ä¸ªè¿è¡Œæ—¶æœŸçš„å¼‚å¸¸ç±»:è‡ªå®šä¹‰ç±» å¹¶ç»§æ‰¿äº`java.lang.RuntimeException`ã€‚

## 1.11 è‡ªå®šä¹‰å¼‚å¸¸çš„ç»ƒä¹ 

è¦æ±‚ï¼šæˆ‘ä»¬æ¨¡æ‹Ÿç™»é™†æ“ä½œï¼Œå¦‚æœç”¨æˆ·åå·²å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸å¹¶æç¤ºï¼šäº²ï¼Œè¯¥ç”¨æˆ·åå·²ç»è¢«æ³¨å†Œã€‚

é¦–å…ˆå®šä¹‰ä¸€ä¸ªç™»é™†å¼‚å¸¸ç±»LoginExceptionï¼š

```java
// ä¸šåŠ¡é€»è¾‘å¼‚å¸¸
public class LoginException extends Exception {
    /**
     * ç©ºå‚æ„é€ 
     */
    public LoginException() {
    }

    /**
     *
     * @param message è¡¨ç¤ºå¼‚å¸¸æç¤º
     */
    public LoginException(String message) {
        super(message);
    }
}
```

æ¨¡æ‹Ÿç™»é™†æ“ä½œï¼Œä½¿ç”¨æ•°ç»„æ¨¡æ‹Ÿæ•°æ®åº“ä¸­å­˜å‚¨çš„æ•°æ®ï¼Œå¹¶æä¾›å½“å‰æ³¨å†Œè´¦å·æ˜¯å¦å­˜åœ¨æ–¹æ³•ç”¨äºåˆ¤æ–­ã€‚

```java
public class Demo {
    // æ¨¡æ‹Ÿæ•°æ®åº“ä¸­å·²å­˜åœ¨è´¦å·
    private static String[] names = {"bill","hill","jill"};
   
    public static void main(String[] args) {     
        //è°ƒç”¨æ–¹æ³•
        try{
            // å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç 
            checkUsername("nill");
            System.out.println("æ³¨å†ŒæˆåŠŸ");//å¦‚æœæ²¡æœ‰å¼‚å¸¸å°±æ˜¯æ³¨å†ŒæˆåŠŸ
        } catch(LoginException e) {
            //å¤„ç†å¼‚å¸¸
            e.printStackTrace();
        }
    }

    //åˆ¤æ–­å½“å‰æ³¨å†Œè´¦å·æ˜¯å¦å­˜åœ¨
    //å› ä¸ºæ˜¯ç¼–è¯‘æœŸå¼‚å¸¸ï¼Œåˆæƒ³è°ƒç”¨è€…å»å¤„ç† æ‰€ä»¥å£°æ˜è¯¥å¼‚å¸¸
    public static boolean checkUsername(String uname) throws LoginException {
        for (String name : names) {
            if(name.equals(uname)){//å¦‚æœåå­—åœ¨è¿™é‡Œé¢ å°±æŠ›å‡ºç™»é™†å¼‚å¸¸
                throw new LoginException("äº²"+name+"å·²ç»è¢«æ³¨å†Œäº†ï¼");
            }
        }
        return true;
    }
}
```

# 2. Fileç±»

## 2.1 æ¦‚è¿°

`java.io.File` ç±»æ˜¯æ–‡ä»¶å’Œç›®å½•è·¯å¾„åçš„æŠ½è±¡è¡¨ç¤ºï¼Œä¸»è¦ç”¨äºæ–‡ä»¶å’Œç›®å½•çš„åˆ›å»ºã€æŸ¥æ‰¾å’Œåˆ é™¤ç­‰æ“ä½œã€‚

## 2.2 æ„é€ æ–¹æ³•

- `public File(String pathname) ` ï¼šé€šè¿‡å°†ç»™å®šçš„**è·¯å¾„åå­—ç¬¦ä¸²**è½¬æ¢ä¸ºæŠ½è±¡è·¯å¾„åæ¥åˆ›å»ºæ–°çš„ Fileå®ä¾‹ã€‚  
- `public File(String parent, String child) ` ï¼šä»**çˆ¶è·¯å¾„åå­—ç¬¦ä¸²å’Œå­è·¯å¾„åå­—ç¬¦ä¸²**åˆ›å»ºæ–°çš„ Fileå®ä¾‹ã€‚
- `public File(File parent, String child)` ï¼šä»**çˆ¶æŠ½è±¡è·¯å¾„åå’Œå­è·¯å¾„åå­—ç¬¦ä¸²**åˆ›å»ºæ–°çš„ Fileå®ä¾‹ã€‚  
- æ„é€ ä¸¾ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
// æ–‡ä»¶è·¯å¾„å
String pathname = "D:\\aaa.txt";
File file1 = new File(pathname); 

// æ–‡ä»¶è·¯å¾„å
String pathname2 = "D:\\aaa\\bbb.txt";
File file2 = new File(pathname2); 

// é€šè¿‡çˆ¶è·¯å¾„å’Œå­è·¯å¾„å­—ç¬¦ä¸²
 String parent = "d:\\aaa";
 String child = "bbb.txt";
 File file3 = new File(parent, child);

// é€šè¿‡çˆ¶çº§Fileå¯¹è±¡å’Œå­è·¯å¾„å­—ç¬¦ä¸²
File parentDir = new File("d:\\aaa");
String child = "bbb.txt";
File file4 = new File(parentDir, child);
```

> å°è´´å£«ï¼š
>
> 1. ä¸€ä¸ªFileå¯¹è±¡ä»£è¡¨ç¡¬ç›˜ä¸­å®é™…å­˜åœ¨çš„ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•ã€‚
> 2. æ— è®ºè¯¥è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œéƒ½ä¸å½±å“Fileå¯¹è±¡çš„åˆ›å»ºã€‚

## 2.3 å¸¸ç”¨æ–¹æ³•

### è·å–åŠŸèƒ½çš„æ–¹æ³•

- `public String getAbsolutePath() ` ï¼šè¿”å›æ­¤Fileçš„ç»å¯¹è·¯å¾„åå­—ç¬¦ä¸²ã€‚

- ` public String getPath() ` ï¼šå°†æ­¤Fileè½¬æ¢ä¸ºè·¯å¾„åå­—ç¬¦ä¸²ã€‚ 

- `public String getName()`  ï¼šè¿”å›ç”±æ­¤Fileè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•çš„åç§°ã€‚  

- `public long length()`  ï¼šè¿”å›ç”±æ­¤Fileè¡¨ç¤ºçš„æ–‡ä»¶çš„é•¿åº¦ã€‚ 

  æ–¹æ³•æ¼”ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š

  ```java
  public class FileGet {
      public static void main(String[] args) {
          File f = new File("d:/aaa/bbb.java");     
          System.out.println("æ–‡ä»¶ç»å¯¹è·¯å¾„:"+f.getAbsolutePath());
          System.out.println("æ–‡ä»¶æ„é€ è·¯å¾„:"+f.getPath());
          System.out.println("æ–‡ä»¶åç§°:"+f.getName());
          System.out.println("æ–‡ä»¶é•¿åº¦:"+f.length()+"å­—èŠ‚");
  
          File f2 = new File("d:/aaa");     
          System.out.println("ç›®å½•ç»å¯¹è·¯å¾„:"+f2.getAbsolutePath());
          System.out.println("ç›®å½•æ„é€ è·¯å¾„:"+f2.getPath());
          System.out.println("ç›®å½•åç§°:"+f2.getName());
          System.out.println("ç›®å½•é•¿åº¦:"+f2.length());
      }
  }
  è¾“å‡ºç»“æœï¼š
  æ–‡ä»¶ç»å¯¹è·¯å¾„:d:\aaa\bbb.java
  æ–‡ä»¶æ„é€ è·¯å¾„:d:\aaa\bbb.java
  æ–‡ä»¶åç§°:bbb.java
  æ–‡ä»¶é•¿åº¦:636å­—èŠ‚
  
  ç›®å½•ç»å¯¹è·¯å¾„:d:\aaa
  ç›®å½•æ„é€ è·¯å¾„:d:\aaa
  ç›®å½•åç§°:aaa
  ç›®å½•é•¿åº¦:4096
  ```

> APIä¸­è¯´æ˜ï¼šlength()ï¼Œè¡¨ç¤ºæ–‡ä»¶çš„é•¿åº¦ã€‚ä½†æ˜¯Fileå¯¹è±¡è¡¨ç¤ºç›®å½•ï¼Œåˆ™è¿”å›å€¼æœªæŒ‡å®šã€‚

### ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„

- **ç»å¯¹è·¯å¾„**ï¼šä»ç›˜ç¬¦å¼€å§‹çš„è·¯å¾„ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„è·¯å¾„ã€‚
- **ç›¸å¯¹è·¯å¾„**ï¼šç›¸å¯¹äºé¡¹ç›®ç›®å½•çš„è·¯å¾„ï¼Œè¿™æ˜¯ä¸€ä¸ªä¾¿æ·çš„è·¯å¾„ï¼Œå¼€å‘ä¸­ç»å¸¸ä½¿ç”¨ã€‚

```java
public class FilePath {
    public static void main(String[] args) {
      	// Dç›˜ä¸‹çš„bbb.javaæ–‡ä»¶
        File f = new File("D:\\bbb.java");
        System.out.println(f.getAbsolutePath());
      	
		// é¡¹ç›®ä¸‹çš„bbb.javaæ–‡ä»¶
        File f2 = new File("bbb.java");
        System.out.println(f2.getAbsolutePath());
    }
}
è¾“å‡ºç»“æœï¼š
D:\bbb.java
D:\idea_project_test4\bbb.java
```

### åˆ¤æ–­åŠŸèƒ½çš„æ–¹æ³•

- `public boolean exists()` ï¼šæ­¤Fileè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å®é™…å­˜åœ¨ã€‚
- `public boolean isDirectory()` ï¼šæ­¤Fileè¡¨ç¤ºçš„æ˜¯å¦ä¸ºç›®å½•ã€‚
- `public boolean isFile()` ï¼šæ­¤Fileè¡¨ç¤ºçš„æ˜¯å¦ä¸ºæ–‡ä»¶ã€‚

æ–¹æ³•æ¼”ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public class FileIs {
    public static void main(String[] args) {
        File f = new File("d:\\aaa\\bbb.java");
        File f2 = new File("d:\\aaa");
      	// åˆ¤æ–­æ˜¯å¦å­˜åœ¨
        System.out.println("d:\\aaa\\bbb.java æ˜¯å¦å­˜åœ¨:"+f.exists());
        System.out.println("d:\\aaa æ˜¯å¦å­˜åœ¨:"+f2.exists());
      	// åˆ¤æ–­æ˜¯æ–‡ä»¶è¿˜æ˜¯ç›®å½•
        System.out.println("d:\\aaa æ–‡ä»¶?:"+f2.isFile());
        System.out.println("d:\\aaa ç›®å½•?:"+f2.isDirectory());
    }
}
è¾“å‡ºç»“æœï¼š
d:\aaa\bbb.java æ˜¯å¦å­˜åœ¨:true
d:\aaa æ˜¯å¦å­˜åœ¨:true
d:\aaa æ–‡ä»¶?:false
d:\aaa ç›®å½•?:true
```

### åˆ›å»ºåˆ é™¤åŠŸèƒ½çš„æ–¹æ³•

- `public boolean createNewFile()` ï¼šå½“ä¸”ä»…å½“å…·æœ‰è¯¥åç§°çš„æ–‡ä»¶å°šä¸å­˜åœ¨æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶ã€‚ 
- `public boolean delete()` ï¼šåˆ é™¤ç”±æ­¤Fileè¡¨ç¤ºçš„æ–‡ä»¶æˆ–ç›®å½•ã€‚  
- `public boolean mkdir()` ï¼šåˆ›å»ºç”±æ­¤Fileè¡¨ç¤ºçš„ç›®å½•ã€‚
- `public boolean mkdirs()` ï¼šåˆ›å»ºç”±æ­¤Fileè¡¨ç¤ºçš„ç›®å½•ï¼ŒåŒ…æ‹¬ä»»ä½•å¿…éœ€ä½†ä¸å­˜åœ¨çš„çˆ¶ç›®å½•ã€‚

æ–¹æ³•æ¼”ç¤ºï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public class FileCreateDelete {
    public static void main(String[] args) throws IOException {
        // æ–‡ä»¶çš„åˆ›å»º
        File f = new File("aaa.txt");
        System.out.println("æ˜¯å¦å­˜åœ¨:"+f.exists()); // false
        System.out.println("æ˜¯å¦åˆ›å»º:"+f.createNewFile()); // true
        System.out.println("æ˜¯å¦å­˜åœ¨:"+f.exists()); // true
		
     	// ç›®å½•çš„åˆ›å»º
      	File f2= new File("newDir");	
        System.out.println("æ˜¯å¦å­˜åœ¨:"+f2.exists());// false
        System.out.println("æ˜¯å¦åˆ›å»º:"+f2.mkdir());	// true
        System.out.println("æ˜¯å¦å­˜åœ¨:"+f2.exists());// true

		// åˆ›å»ºå¤šçº§ç›®å½•
      	File f3= new File("newDira\\newDirb");
        System.out.println(f3.mkdir());// false
        File f4= new File("newDira\\newDirb");
        System.out.println(f4.mkdirs());// true
      
      	// æ–‡ä»¶çš„åˆ é™¤
       	System.out.println(f.delete());// true
      
      	// ç›®å½•çš„åˆ é™¤
        System.out.println(f2.delete());// true
        System.out.println(f4.delete());// false
    }
}
```

> APIä¸­è¯´æ˜ï¼šdeleteæ–¹æ³•ï¼Œå¦‚æœæ­¤Fileè¡¨ç¤ºç›®å½•ï¼Œåˆ™ç›®å½•å¿…é¡»ä¸ºç©ºæ‰èƒ½åˆ é™¤ã€‚

## 2.4 ç›®å½•çš„éå†

- `public String[] list()` ï¼šè¿”å›ä¸€ä¸ªStringæ•°ç»„ï¼Œè¡¨ç¤ºè¯¥Fileç›®å½•ä¸­çš„æ‰€æœ‰å­æ–‡ä»¶æˆ–ç›®å½•ã€‚
- `public File[] listFiles()` ï¼šè¿”å›ä¸€ä¸ªFileæ•°ç»„ï¼Œè¡¨ç¤ºè¯¥Fileç›®å½•ä¸­çš„æ‰€æœ‰çš„å­æ–‡ä»¶æˆ–ç›®å½•ã€‚  

```java
public class FileFor {
    public static void main(String[] args) {
        File dir = new File("d:\\java_code");
      
      	//è·å–å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹çš„åç§°ã€‚
		String[] names = dir.list();
		for(String name : names){
			System.out.println(name);
		}
        //è·å–å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹å¯¹è±¡ï¼Œåªè¦æ‹¿åˆ°äº†æ–‡ä»¶å¯¹è±¡ï¼Œé‚£ä¹ˆå°±å¯ä»¥è·å–æ›´å¤šä¿¡æ¯
        File[] files = dir.listFiles();
        for (File file : files) {
            System.out.println(file);
        }
    }
}
```

> å°è´´å£«ï¼š
>
> è°ƒç”¨listFilesæ–¹æ³•çš„Fileå¯¹è±¡ï¼Œè¡¨ç¤ºçš„å¿…é¡»æ˜¯å®é™…å­˜åœ¨çš„ç›®å½•ï¼Œå¦åˆ™è¿”å›nullï¼Œæ— æ³•è¿›è¡Œéå†ã€‚

## 2.5 ç»¼åˆç»ƒä¹ 

#### ç»ƒä¹ 1ï¼šåˆ›å»ºæ–‡ä»¶å¤¹

â€‹	åœ¨å½“å‰æ¨¡å—ä¸‹çš„aaaæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªa.txtæ–‡ä»¶

ä»£ç å®ç°ï¼š

```java
public class Test1 {
    public static void main(String[] args) throws IOException {
        //éœ€æ±‚ï¼šåœ¨å½“å‰æ¨¡å—ä¸‹çš„aaaæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªa.txtæ–‡ä»¶

        //1.åˆ›å»ºa.txtçš„çˆ¶çº§è·¯å¾„
        File file = new File("myfile\\aaa");
        //2.åˆ›å»ºçˆ¶çº§è·¯å¾„
        //å¦‚æœaaaæ˜¯å­˜åœ¨çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶åˆ›å»ºå¤±è´¥çš„ã€‚
        //å¦‚æœaaaæ˜¯ä¸å­˜åœ¨çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶åˆ›å»ºæˆåŠŸçš„ã€‚
        file.mkdirs();
        //3.æ‹¼æ¥çˆ¶çº§è·¯å¾„å’Œå­çº§è·¯å¾„
        File src = new File(file,"a.txt");
        boolean b = src.createNewFile();
        if(b){
            System.out.println("åˆ›å»ºæˆåŠŸ");
        }else{
            System.out.println("åˆ›å»ºå¤±è´¥");
        }
    }
}
```

#### ç»ƒä¹ 2ï¼šæŸ¥æ‰¾æ–‡ä»¶ï¼ˆä¸è€ƒè™‘å­æ–‡ä»¶å¤¹ï¼‰

â€‹	å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ‰¾æŸä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ˜¯å¦æœ‰ä»¥aviç»“å°¾çš„ç”µå½±ï¼ˆæš‚æ—¶ä¸éœ€è¦è€ƒè™‘å­æ–‡ä»¶å¤¹ï¼‰

ä»£ç ç¤ºä¾‹ï¼š

```java
public class Test2 {
    public static void main(String[] args) {
        /*éœ€æ±‚ï¼š
             å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ‰¾æŸä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ˜¯å¦æœ‰ä»¥aviç»“å°¾çš„ç”µå½±ã€‚
	        ï¼ˆæš‚æ—¶ä¸éœ€è¦è€ƒè™‘å­æ–‡ä»¶å¤¹ï¼‰
        */

        File file = new File("D:\\aaa\\bbb");
        boolean b = haveAVI(file);
        System.out.println(b);
    }
    /*
    * ä½œç”¨ï¼šç”¨æ¥æ‰¾æŸä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ˜¯å¦æœ‰ä»¥aviç»“å°¾çš„ç”µå½±
    * å½¢å‚ï¼šè¦æŸ¥æ‰¾çš„æ–‡ä»¶å¤¹
    * è¿”å›å€¼ï¼šæŸ¥æ‰¾çš„ç»“æœ  å­˜åœ¨true  ä¸å­˜åœ¨false
    * */
    public static boolean haveAVI(File file){// D:\\aaa
        //1.è¿›å…¥aaaæ–‡ä»¶å¤¹ï¼Œè€Œä¸”è¦è·å–é‡Œé¢æ‰€æœ‰çš„å†…å®¹
        File[] files = file.listFiles();
        //2.éå†æ•°ç»„è·å–é‡Œé¢çš„æ¯ä¸€ä¸ªå…ƒç´ 
        for (File f : files) {
            //fï¼šä¾æ¬¡è¡¨ç¤ºaaaæ–‡ä»¶å¤¹é‡Œé¢æ¯ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹çš„è·¯å¾„
            if(f.isFile() && f.getName().endsWith(".avi")){
                return true;
            }
        }
        //3.å¦‚æœå¾ªç¯ç»“æŸä¹‹åè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œç›´æ¥è¿”å›false
        return false;
    }
}
```

### ç»ƒä¹ 3ï¼šï¼ˆè€ƒè™‘å­æ–‡ä»¶å¤¹ï¼‰

â€‹	æ‰¾åˆ°ç”µè„‘ä¸­æ‰€æœ‰ä»¥aviç»“å°¾çš„ç”µå½±ã€‚ï¼ˆéœ€è¦è€ƒè™‘å­æ–‡ä»¶å¤¹ï¼‰

ä»£ç ç¤ºä¾‹ï¼š

```java
public class Test3 {
    public static void main(String[] args) {
        /* éœ€æ±‚ï¼š
        æ‰¾åˆ°ç”µè„‘ä¸­æ‰€æœ‰ä»¥aviç»“å°¾çš„ç”µå½±ã€‚ï¼ˆéœ€è¦è€ƒè™‘å­æ–‡ä»¶å¤¹ï¼‰


        å¥—è·¯ï¼š
            1ï¼Œè¿›å…¥æ–‡ä»¶å¤¹
            2ï¼Œéå†æ•°ç»„
            3ï¼Œåˆ¤æ–­
            4ï¼Œåˆ¤æ–­

        */

        findAVI();

    }

    public static void findAVI(){
        //è·å–æœ¬åœ°æ‰€æœ‰çš„ç›˜ç¬¦
        File[] arr = File.listRoots();
        for (File f : arr) {
            findAVI(f);
        }
    }

    public static void findAVI(File src){//"C:\\
        //1.è¿›å…¥æ–‡ä»¶å¤¹src
        File[] files = src.listFiles();
        //2.éå†æ•°ç»„,ä¾æ¬¡å¾—åˆ°srcé‡Œé¢æ¯ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹
        if(files != null){
            for (File file : files) {
                if(file.isFile()){
                    //3ï¼Œåˆ¤æ–­ï¼Œå¦‚æœæ˜¯æ–‡ä»¶ï¼Œå°±å¯ä»¥æ‰§è¡Œé¢˜ç›®çš„ä¸šåŠ¡é€»è¾‘
                    String name = file.getName();
                    if(name.endsWith(".avi")){
                        System.out.println(file);
                    }
                }else{
                    //4ï¼Œåˆ¤æ–­ï¼Œå¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œå°±å¯ä»¥é€’å½’
                    //ç»†èŠ‚ï¼šå†æ¬¡è°ƒç”¨æœ¬æ–¹æ³•çš„æ—¶å€™ï¼Œå‚æ•°ä¸€å®šè¦æ˜¯srcçš„æ¬¡ä¸€çº§è·¯å¾„
                    findAVI(file);
                }
            }
        }
    }
}
```

### ç»ƒä¹ 4ï¼šåˆ é™¤å¤šçº§æ–‡ä»¶å¤¹

éœ€æ±‚ï¼š å¦‚æœæˆ‘ä»¬è¦åˆ é™¤ä¸€ä¸ªæœ‰å†…å®¹çš„æ–‡ä»¶å¤¹
	   1.å…ˆåˆ é™¤æ–‡ä»¶å¤¹é‡Œé¢æ‰€æœ‰çš„å†…å®¹
           2.å†åˆ é™¤è‡ªå·±

ä»£ç ç¤ºä¾‹ï¼š

```java
public class Test4 {
    public static void main(String[] args) {
        /*
           åˆ é™¤ä¸€ä¸ªå¤šçº§æ–‡ä»¶å¤¹
           å¦‚æœæˆ‘ä»¬è¦åˆ é™¤ä¸€ä¸ªæœ‰å†…å®¹çš„æ–‡ä»¶å¤¹
           1.å…ˆåˆ é™¤æ–‡ä»¶å¤¹é‡Œé¢æ‰€æœ‰çš„å†…å®¹
           2.å†åˆ é™¤è‡ªå·±
        */

        File file = new File("D:\\aaa\\src");
        delete(file);

    }

    /*
    * ä½œç”¨ï¼šåˆ é™¤srcæ–‡ä»¶å¤¹
    * å‚æ•°ï¼šè¦åˆ é™¤çš„æ–‡ä»¶å¤¹
    * */
    public static void delete(File src){
        //1.å…ˆåˆ é™¤æ–‡ä»¶å¤¹é‡Œé¢æ‰€æœ‰çš„å†…å®¹
        //è¿›å…¥src
        File[] files = src.listFiles();
        //éå†
        for (File file : files) {
            //åˆ¤æ–­,å¦‚æœæ˜¯æ–‡ä»¶ï¼Œåˆ é™¤
            if(file.isFile()){
                file.delete();
            }else {
                //åˆ¤æ–­,å¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œå°±é€’å½’
                delete(file);
            }
        }
        //2.å†åˆ é™¤è‡ªå·±
        src.delete();
    }
}
```

### ç»ƒä¹ 5ï¼šç»Ÿè®¡å¤§å°

â€‹	éœ€æ±‚ï¼šç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶å¤¹çš„æ€»å¤§å°

ä»£ç ç¤ºä¾‹ï¼š

```java
public class Test5 {
    public static void main(String[] args) {
       /*éœ€æ±‚ï¼š
            ç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶å¤¹çš„æ€»å¤§å°
      */


        File file = new File("D:\\aaa\\src");

        long len = getLen(file);
        System.out.println(len);//4919189
    }

    /*
    * ä½œç”¨ï¼š
    *       ç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶å¤¹çš„æ€»å¤§å°
    * å‚æ•°ï¼š
    *       è¡¨ç¤ºè¦ç»Ÿè®¡çš„é‚£ä¸ªæ–‡ä»¶å¤¹
    * è¿”å›å€¼ï¼š
    *       ç»Ÿè®¡ä¹‹åçš„ç»“æœ
    *
    * æ–‡ä»¶å¤¹çš„æ€»å¤§å°ï¼š
    *       è¯´ç™½äº†ï¼Œæ–‡ä»¶å¤¹é‡Œé¢æ‰€æœ‰æ–‡ä»¶çš„å¤§å°
    * */
    public static long getLen(File src){
        //1.å®šä¹‰å˜é‡è¿›è¡Œç´¯åŠ 
        long len = 0;
        //2.è¿›å…¥srcæ–‡ä»¶å¤¹
        File[] files = src.listFiles();
        //3.éå†æ•°ç»„
        for (File file : files) {
            //4.åˆ¤æ–­
            if(file.isFile()){
                //æˆ‘ä»¬å°±æŠŠå½“å‰æ–‡ä»¶çš„å¤§å°ç´¯åŠ åˆ°lenå½“ä¸­
                len = len + file.length();
            }else{
                //åˆ¤æ–­ï¼Œå¦‚æœæ˜¯æ–‡ä»¶å¤¹å°±é€’å½’
                len = len + getLen(file);
            }
        }
        return len;
    }
}
```

### ç»ƒä¹ 6ï¼šç»Ÿè®¡æ–‡ä»¶ä¸ªæ•°

  éœ€æ±‚ï¼šç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­æ¯ç§æ–‡ä»¶çš„ä¸ªæ•°å¹¶æ‰“å°ã€‚ï¼ˆè€ƒè™‘å­æ–‡ä»¶å¤¹ï¼‰
            æ‰“å°æ ¼å¼å¦‚ä¸‹ï¼š
            txt:3ä¸ª
            doc:4ä¸ª
            jpg:6ä¸ª

ä»£ç ç¤ºä¾‹ï¼š

```java
public class Test6 {
    public static void main(String[] args) throws IOException {
        /*
            éœ€æ±‚ï¼šç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­æ¯ç§æ–‡ä»¶çš„ä¸ªæ•°å¹¶æ‰“å°ã€‚ï¼ˆè€ƒè™‘å­æ–‡ä»¶å¤¹ï¼‰
            æ‰“å°æ ¼å¼å¦‚ä¸‹ï¼š
            txt:3ä¸ª
            doc:4ä¸ª
            jpg:6ä¸ª
        */
        File file = new File("D:\\aaa\\src");
        HashMap<String, Integer> hm = getCount(file);
        System.out.println(hm);
    }

    /*
    * ä½œç”¨ï¼š
    *       ç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­æ¯ç§æ–‡ä»¶çš„ä¸ªæ•°
    * å‚æ•°ï¼š
    *       è¦ç»Ÿè®¡çš„é‚£ä¸ªæ–‡ä»¶å¤¹
    * è¿”å›å€¼ï¼š
    *       ç”¨æ¥ç»Ÿè®¡mapé›†åˆ
    *       é”®ï¼šåç¼€å å€¼ï¼šæ¬¡æ•°
    *
    *       a.txt
    *       a.a.txt
    *       aaaï¼ˆä¸éœ€è¦ç»Ÿè®¡çš„ï¼‰
    *
    *
    * */
    public static HashMap<String,Integer> getCount(File src){
        //1.å®šä¹‰é›†åˆç”¨æ¥ç»Ÿè®¡
        HashMap<String,Integer> hm = new HashMap<>();
        //2.è¿›å…¥srcæ–‡ä»¶å¤¹
        File[] files = src.listFiles();
        //3.éå†æ•°ç»„
        for (File file : files) {
            //4.åˆ¤æ–­ï¼Œå¦‚æœæ˜¯æ–‡ä»¶ï¼Œç»Ÿè®¡
            if(file.isFile()){
                //a.txt
                String name = file.getName();
                String[] arr = name.split("\\.");
                if(arr.length >= 2){
                    String endName = arr[arr.length - 1];
                    if(hm.containsKey(endName)){
                        //å­˜åœ¨
                        int count = hm.get(endName);
                        count++;
                        hm.put(endName,count);
                    }else{
                        //ä¸å­˜åœ¨
                        hm.put(endName,1);
                    }
                }
            }else{
                //5.åˆ¤æ–­ï¼Œå¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œé€’å½’
                //sonMapé‡Œé¢æ˜¯å­æ–‡ä»¶ä¸­æ¯ä¸€ç§æ–‡ä»¶çš„ä¸ªæ•°
                HashMap<String, Integer> sonMap = getCount(file);
                //hm:  txt=1  jpg=2  doc=3
                //sonMap: txt=3 jpg=1
                //éå†sonMapæŠŠé‡Œé¢çš„å€¼ç´¯åŠ åˆ°hmå½“ä¸­
                Set<Map.Entry<String, Integer>> entries = sonMap.entrySet();
                for (Map.Entry<String, Integer> entry : entries) {
                    String key = entry.getKey();
                    int value = entry.getValue();
                    if(hm.containsKey(key)){
                        //å­˜åœ¨
                        int count = hm.get(key);
                        count = count + value;
                        hm.put(key,count);
                    }else{
                        //ä¸å­˜åœ¨
                        hm.put(key,value);
                    }
                }
            }
        }
        return hm;
    }
}
```





