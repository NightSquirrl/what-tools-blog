# 9.2 组合式 API FAQ

## 什么是组合式 API？

### 组合式 API 是一系列 API 的集合，使我们可以使用函数而不是声明选项的方式书写 Vue 组件

### 涵盖了以下方面的 API

- 响应性 API：例如` ref()` 和 `reactive()`

- 生命周期钩子：例如 `onMounted()` 和`onUnmounted()`

- 依赖注入：例如 `provide()` 和 `inject()`

### 组合式 API 是 Vue 3 的内置功能，而要想在在 Vue 2 中使用，可以使用官方维护的插件 @vue/composition-api。在 Vue 3 中，组合式 API 基本上都会配合  语法在单文件组件中使用

## 为什么要有组合式 API？

### 更好的逻辑复用

### 更灵活的代码组织

### 更好的类型推导

### 生产包体积更小

## 与选项式 API 的关系

### 组合式 API 是否覆盖了所有场景？

- 对于有状态的逻辑来说，的确如此

### 可以同时使用两种 API 吗？

- 可以。你可以在一个选项式 API 组件中使用 `setup()` 选项

### 选项式 API 会被废弃吗？

- 不会

## 与 Class API 的关系

### 不再推荐在 Vue 3 中使用 Class API，因为组合式 API 提供了很好的 TypeScript 集成，并具有额外的逻辑重用和代码组织优势

## 和 React Hooks 相比

### 它是组合式 API 的主要灵感来源，它们具有相同级别的逻辑组织能力

### 区别

- React Hooks 在组件每次更新时都会重新调用，影响性能

- 相比起来，Vue 的组合式 API：

	- 仅调用 `setup()` 或  的代码一次

	- Vue 的响应性系统运行时会自动收集计算属性和侦听器的依赖，因此无需我们手动声明依赖

	- 无需手动缓存回调函数来避免不必要的组件更新


![9.2-API-FAQbc90fabae39b0c06.png](https://img.picgo.net/2024/02/10/9.2-API-FAQbc90fabae39b0c06.png)