# 2.5 类与样式绑定

## 简介

### 数据绑定的一个常见需求场景是操纵元素的 CSS 类列表和内联样式

### 因为它们都是 attribute，我们可以使用 v-bind 来做，我们只需要通过表达式计算出一个字符串作为最终结果即可

### 然而频繁地连接字符串让人很闹心，也很容易出错。因此，Vue 专门为 class 和 style 的 v-bind 用法提供了特殊的功能增强。除了字符串外，表达式的结果还可以是对象或数组

## 绑定 HTML 类

### 绑定对象

- 我们可以给 :class (v-bind:class 的缩写) 传递一个对象来动态切换类

- 举例：

	- active 是否存在取决于数据属性 isActive 的真假值

- 也可以在对象中写多个字段来操作多个类

- :class 指令也可以和一般的 class attribute 共存

  <div
    class='static'
    :class='{ active: isActive, &#39;text-danger&#39;: hasError }'
  ></div>
  
  它将会被渲染成：
  
  <div class='static active'></div>
- 也可以绑定一个返回对象的计算属性（通用且好用的实践）

  const isActive = ref(true)
  const error = ref(null)
  
  const classObject = computed(() => ({
    active: isActive.value && !error.value,
    &#39;text-danger&#39;: error.value && error.value.type === &#39;fatal&#39;
  }))
  <div :class='classObject'></div>
### 绑定数组

- 可以给 :class 绑定一个数组以应用一系列 CSS 类

  const activeClass = ref(&#39;active&#39;)
  const errorClass = ref(&#39;text-danger&#39;)
  <div :class='[activeClass, errorClass]'></div>
  渲染的结果是：
  
  <div class='active text-danger'></div>
- 按条件触发某个类，可以使用三元表达式

- 在有多个依赖条件的类时会有些冗长。因此也可以在数组中使用对象语法

  <div :class='[{ active: isActive }, errorClass]'></div>
### 和组件配合

- 对于只有一个根元素的组件，当你使用了 class attribute 时，这些类会被添加到根元素上，并与该元素上已有的类合并

- 如果你的组件有多个根元素，你将需要指定哪个根元素来接收这个类。你可以通过组件的 $attrs property 来实现指定

## 绑定内联样式

### 绑定对象

- :style 支持绑定 JavaScript 对象值，对应的是 HTML 元素的 style 属性

- 尽管推荐使用 camelCase，但 :style 也支持 kebab-cased 形式的 CSS 属性 key

- 直接绑定一个样式对象通常是一个好主意，这样可以使模板更加简洁

  const styleObject = reactive({
    color: &#39;red&#39;,
    fontSize: &#39;13px&#39;
  })
  <div :style='styleObject'></div>
- 如果样式对象需要更复杂的逻辑，也可以使用返回样式对象的计算属性

### 绑定数组

- 可以给 :style 绑定一个包含多个样式对象的数组。这些对象会被合并和应用到同一元素上

### 自动前缀

- 当你在 :style 中使用了需要浏览器特殊前缀的 CSS 属性时，Vue 会自动为他们加上相应的前缀。

### 样式多值

- 可以对一个样式属性提供多个 (不同前缀的) 值

	- 数组仅会渲染浏览器支持的最后一个值


![2.5a5e3006bb2a3e75c.png](https://img.picgo.net/2024/02/10/2.5a5e3006bb2a3e75c.png)