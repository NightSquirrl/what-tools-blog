# 3.5 插槽

## 插槽内容与插口

###  元素是一个插槽的插口，指出了父元素提供的插槽内容在哪里被渲染

### 使用插槽后，组件的扩展性、可复用性都增强了

### Vue 组件的插槽机制是受原生 Web Component  元素的启发而诞生，同时还做了一些功能拓展

## 渲染作用域

### 插槽内容可以访问到父组件的数据，因为插槽内容本身也是父组件模板的一部分

### 插槽内容无法访问子组件的数据

### 规则是：任何父组件模板中的东西都只被编译到父组件的作用域中；而任何子组件模板中的东西都只被编译到子组件的作用域中

## 默认内容

### 我们也经常会遇到外部没有提供任何内容的情况，此时为插槽提供一个默认的内容来渲染就很有必要

### 要让其成为默认内容，需要将其写在  标签之间

## 具名插槽

### 有时一个组件中可能会有多个插槽的插口，对于这种场景， 元素可以有一个特殊的 attribute name，可以是一个独一无二的标识符，用来区分各个插槽，确定每一处最终会渲染的内容

```vue
<script setup>
const emit = defineEmits({
  // 没有校验
  click: null,

  // 校验 submit 事件
  submit: ({ email, password }) => {
    if (email && password) {
      return true
    } else {
      console.warn(&#39;Invalid submit event payload!&#39;)
      return false
    }
  }
})

function submitForm(email, password) {
  emit(&#39;submit&#39;, { email, password })
}
</script>
```

### 没有提供 name 的  插口会隐式地命名为“default”

### 要为具名插槽传入内容，我们需要使用一个含 v-slot 指令的  元素，并将目标插槽的名字传给该指令

### v-slot 有对应的简写 #，因此  可简写为 。意思是“将这部分模板片段传入子组件的 header 插槽中”

### 当一个组件同时接收默认插槽和具名插槽时，所有位于顶级的非  节点都被隐式地视为默认插槽的内容

## 动态插槽名

### 动态指令参数在 v-slot 上也是有效的，即可以定义下面这样的动态插槽名：

- ...

## 作用域插槽

### 在某些场景下插槽的内容可能想要同时使用父组件域内和子组件域内的数据。要做到这一点，我们需要一种方法来让子组件在渲染时将一部分数据提供给插槽


```js
<input v-model='searchText' />
// 和下面这段代码是等价的：

<input
  :value='searchText'
  @input='searchText = $event.target.value'
/>

```

### 我们也确实有办法这么做！可以像对组件传递 prop 那样，向一个插槽的插口上传递 attribute

### 子组件传入插槽的 props 作为了 v-slot 指令的值，可以在插槽内的表达式中访问

### 具名作用域插槽

- 具名作用域插槽的工作方式也是类似的，插槽 props 可以作为 v-slot 指令的值被访问到：v-slot:name="slotProps"。当使用缩写时是这样

```vue
  <MyComponent>
    <template #header='headerProps'>
      {{ headerProps }}
    </template>
  
    <template #default='defaultProps'>
      {{ defaultProps }}
    </template>
  
    <template #footer='footerProps'>
      {{ footerProps }}
    </template>
  </MyComponent>

```
- 向具名插槽中传入 props：

- 注意插槽上的 name 是由 Vue 保留的，不会作为 props 传递给插槽。因此最终 headerProps 的结果是` { message: 'hello' }`


![3.5fea02aa8fc5bb934.png](https://img.picgo.net/2024/02/10/3.5fea02aa8fc5bb934.png)