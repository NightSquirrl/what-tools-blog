---
title: Token
tag:
  - storage
  - JWT
star: true
---


[参考 JWT 认证](/rear-end/JavaWeb/6-JWT.md)


### 认证流程

Step-1：用户端发起登录请求，发账号密码给服务端

Step-2：服务端进行鉴权认证，判断用户名密码是否正确合法

1. 认证成功 服务端将创建一个 JWT 字符串响应发送给前端 （response:{token:xxx.xxx.xxx}）
    1.1 前端拿到 JWT 的 token，如果想要数据，就分割第二段 xxx ，第二段是数据的载体，拿到后进行 Base64 解码就可以了
    1.2 后续前端发的所有请求，在请求头中都会自动带上 {Authorization:token}，把 token 传送给后端
    1.3 后端拿到 token 后会进行 token 解密，检查 signature 进行放行，如果 signature 没有被修改，就会进行放行
2. 认证失败 发送用户鉴权失败信息给前端

### 优缺点

#### 优势

- 无状态性，token 本身包含了所有必要的用户信息或授权信息，服务器无需存储关于用户会话的状态信息，降低了服务器内存压力。
- 跨域支持，由于token可以轻松附加在HTTP请求头中（如Authorization头），不受同源策略限制，因此非常适合跨域应用场景。
- 通过将token作为请求的一部分，而不是依赖于cookie，可以在一定程度上降低 CSRF（跨站请求伪造）攻击的风险.
- 安全性高，使用非对称加密算法颁发的token 可以保证即使在网络上传输也不会泄漏敏感信息，只有拥有私钥的服务端才能解密并验证token的有效性。
- 灵活性高，token可以自由定制，包含自定义的有效载荷信息，并且可以指定过期时间，便于实现细粒度的权限控制。

#### 劣势

- 安全性风险，如果token没有正确实现安全措施，例如未加密存储或传输过程未受到保护，那么token被盗用可能导致安全问题。
- 因为token是无状态的，如果用户注销或权限发生变化，如果不实时更新或撤销token，服务器无法立即终止旧token的有效性，只能等待token过期。
- 存储与刷新频繁，token的存储需要妥善管理，如若存放在客户端且未加密，易遭窃取；同时，长生命周期的token需要刷新机制来延长用户会话，否则可能导致用户频繁重新登录。