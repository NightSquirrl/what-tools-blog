# 安全

## 报告漏洞

### 建议始终使用最新版本的 Vue 及其官方配套库，以确保你的应用尽可能地安全

### 如需报告漏洞，请发送电子邮件至 security@vuejs.org

## 首要规则：不要使用无法信赖的模板

### 使用 Vue 时最基本的安全规则就是不要将无法信赖的内容作为你的组件模板。使用无法信赖的模板相当于允许任意的 JavaScript 在你的应用中执行。更糟糕的是，如果在服务端渲染时执行了这些代码，可能会导致服务器被攻击

## Vue 如何保护你

### HTML 内容

- 无论是使用模板还是渲染函数，内容都是自动转义的。

### Attribute 绑定

- 动态 attribute 的绑定也会被自动转义

## 潜在的危险

### 介绍

- 在任何 Web 应用中，允许以 HTML、CSS 或 JavaScript 形式执行未经无害化处理的、用户提供的内容都有潜在的安全隐患，因此应尽可能避免。不过有时候一些风险或许是可以接受的

- 例如，像 CodePen 和 JSFiddle 这样的服务允许执行用户提供的内容，但这是在 iframe 这样一个可预期的沙盒环境中。当一个重要的功能本身会伴随某种程度的漏洞时，就需要你自行权衡该功能的重要性和该漏洞所带来的最坏情况

### 注入 HTML

- 我们现在已经知道 Vue 会自动转义 HTML 内容，防止你意外地将可执行的 HTML 注入到你的应用中。然而，在你知道 HTML 安全的情况下，你还是可以显式地渲染 HTML 内容

- 请注意，用户提供的 HTML 永远不能被认为是 100% 安全的，除非它在 iframe 这样的沙盒环境中，或者在某个只有编写了该 HTML 的用户才能看到的地方。此外，允许用户编写自己的 Vue 模板也会带来类似的危险

### 注入 URL

- 如果这个 URL 允许通过 javascript: 执行 JavaScript，即没有进行无害化处理，那么就会有一些潜在的安全问题。可以使用一些库来解决此类问题，比如 sanitize-url

- 但请注意，如果你只是在前端做了 URL 无害化处理，那么这个安全问题还没有彻底根除

### 注入样式

- 如果允许在  元素中插入用户提供的内容，会造成更大的漏洞，因为这使得用户能控制整个页面的样式。

- 为了避免用户的点击被劫持，我们建议仅在沙盒环境的 iframe 中允许用户控制 CSS。或者，当用户控制样式绑定时，我们建议使用其对象值形式并仅允许用户提供能够安全控制的、特定的 property

### 注入 JavaScript

- 我们强烈建议任何时候都不要在 Vue 中渲染 ，因为模板和渲染函数不应有其他副作用。但是，渲染  并不是插入在运行时执行的 JavaScript 字符串的唯一方法

- 每个 HTML 元素都有能接受字符串形式 JavaScript 的 attribute，例如 onclick、onfocus 和 onmouseenter。绑定任何用户提供的 JavaScript 给这些事件 attribute 都具有潜在风险，因此需要避免这么做

## 最佳实践

### 最基本的规则就是只要你允许执行未经无害化处理的、用户提供的内容 (无论是 HTML、JavaScript 还是 CSS)，你就可能面临攻击。无论是使用 Vue、其他框架，或是不使用框架，道理都是一样的

### 除了上面为处理潜在危险提供的建议，我们也建议你熟读下面这些资源

- HTML5 安全手册

	- https://html5sec.org/

- OWASP 的跨站脚本攻击 (XSS) 防护手册

## 后端协调

### 类似跨站请求伪造 (CSRF/XSRF) 和跨站脚本引入 (XSSI) 这样的 HTTP 安全漏洞，主要由后端负责处理，因此不是 Vue 应该考虑的问题。但是，你应该与后端团队保持沟通，了解如何更好地与后端 API 进行交互，例如在提交表单时携带 CSRF 令牌

## 服务端渲染 (SSR)

### 在使用 SSR 时还有一些其他的安全注意事项，因此请确保遵循我们的 SSR 文档给出的最佳实践来避免产生漏洞

- https://staging-cn.vuejs.org/guide/scaling-up/ssr.html



![7.4cc8cc0434477154b.png](https://img.picgo.net/2024/02/10/7.4cc8cc0434477154b.png)